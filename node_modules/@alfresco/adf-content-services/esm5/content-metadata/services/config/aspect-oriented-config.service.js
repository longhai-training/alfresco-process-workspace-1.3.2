/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { getGroup, getProperty } from './property-group-reader';
var AspectOrientedConfigService = /** @class */ (function () {
    function AspectOrientedConfigService(config) {
        this.config = config;
    }
    /**
     * @param {?} groupName
     * @return {?}
     */
    AspectOrientedConfigService.prototype.isGroupAllowed = /**
     * @param {?} groupName
     * @return {?}
     */
    function (groupName) {
        if (this.isIncludeAllEnabled()) {
            return true;
        }
        /** @type {?} */
        var groupNames = Object.keys(this.config);
        return groupNames.indexOf(groupName) !== -1;
    };
    /**
     * @param {?} propertyGroups
     * @return {?}
     */
    AspectOrientedConfigService.prototype.reorganiseByConfig = /**
     * @param {?} propertyGroups
     * @return {?}
     */
    function (propertyGroups) {
        var _this = this;
        /** @type {?} */
        var aspects = this.config;
        /** @type {?} */
        var aspectNames = Object.keys(aspects);
        return aspectNames
            .reduce((/**
         * @param {?} groupAccumulator
         * @param {?} aspectName
         * @return {?}
         */
        function (groupAccumulator, aspectName) {
            /** @type {?} */
            var newGroup = _this.getOrganisedPropertyGroup(propertyGroups, aspectName);
            return groupAccumulator.concat(newGroup);
        }), [])
            .filter((/**
         * @param {?} organisedPropertyGroup
         * @return {?}
         */
        function (organisedPropertyGroup) { return organisedPropertyGroup.properties.length > 0; }));
    };
    /**
     * @param {?} propertyGroups
     * @return {?}
     */
    AspectOrientedConfigService.prototype.appendAllPreset = /**
     * @param {?} propertyGroups
     * @return {?}
     */
    function (propertyGroups) {
        /** @type {?} */
        var groups = Object.keys(propertyGroups)
            .map((/**
         * @param {?} groupName
         * @return {?}
         */
        function (groupName) {
            /** @type {?} */
            var propertyGroup = propertyGroups[groupName];
            /** @type {?} */
            var properties = propertyGroup.properties;
            return Object.assign({}, propertyGroup, {
                properties: Object.keys(properties).map((/**
                 * @param {?} propertyName
                 * @return {?}
                 */
                function (propertyName) { return properties[propertyName]; }))
            });
        }));
        return groups;
    };
    /**
     * @param {?} propertyGroups
     * @return {?}
     */
    AspectOrientedConfigService.prototype.filterExcludedPreset = /**
     * @param {?} propertyGroups
     * @return {?}
     */
    function (propertyGroups) {
        var _this = this;
        if (this.config.exclude) {
            return propertyGroups.filter((/**
             * @param {?} preset
             * @return {?}
             */
            function (preset) {
                return !_this.config.exclude.includes(preset.name);
            }));
        }
        return propertyGroups;
    };
    /**
     * @return {?}
     */
    AspectOrientedConfigService.prototype.isIncludeAllEnabled = /**
     * @return {?}
     */
    function () {
        return this.config.includeAll;
    };
    /**
     * @private
     * @param {?} propertyGroups
     * @param {?} aspectName
     * @return {?}
     */
    AspectOrientedConfigService.prototype.getOrganisedPropertyGroup = /**
     * @private
     * @param {?} propertyGroups
     * @param {?} aspectName
     * @return {?}
     */
    function (propertyGroups, aspectName) {
        /** @type {?} */
        var group = getGroup(propertyGroups, aspectName);
        /** @type {?} */
        var newGroup = [];
        if (group) {
            /** @type {?} */
            var aspectProperties = this.config[aspectName];
            /** @type {?} */
            var properties = void 0;
            if (aspectProperties === '*') {
                properties = getProperty(propertyGroups, aspectName, aspectProperties);
            }
            else {
                properties = ((/** @type {?} */ (aspectProperties)))
                    .map((/**
                 * @param {?} propertyName
                 * @return {?}
                 */
                function (propertyName) { return getProperty(propertyGroups, aspectName, propertyName); }))
                    .filter((/**
                 * @param {?} props
                 * @return {?}
                 */
                function (props) { return props !== undefined; }));
            }
            newGroup = [{ title: group.title, properties: properties }];
        }
        return newGroup;
    };
    return AspectOrientedConfigService;
}());
export { AspectOrientedConfigService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    AspectOrientedConfigService.prototype.config;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNwZWN0LW9yaWVudGVkLWNvbmZpZy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsZnJlc2NvL2FkZi1jb250ZW50LXNlcnZpY2VzLyIsInNvdXJjZXMiOlsiY29udGVudC1tZXRhZGF0YS9zZXJ2aWNlcy9jb25maWcvYXNwZWN0LW9yaWVudGVkLWNvbmZpZy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBLE9BQU8sRUFBRSxRQUFRLEVBQUUsV0FBVyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFaEU7SUFFSSxxQ0FBb0IsTUFBVztRQUFYLFdBQU0sR0FBTixNQUFNLENBQUs7SUFBSSxDQUFDOzs7OztJQUU3QixvREFBYzs7OztJQUFyQixVQUFzQixTQUFpQjtRQUNuQyxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxFQUFFO1lBQzVCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7O1lBQ0ssVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMzQyxPQUFPLFVBQVUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDaEQsQ0FBQzs7Ozs7SUFFTSx3REFBa0I7Ozs7SUFBekIsVUFBMEIsY0FBc0M7UUFBaEUsaUJBVUM7O1lBVFMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNOztZQUN2QixXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFFdEMsT0FBTyxXQUFXO2FBQ2IsTUFBTTs7Ozs7UUFBQyxVQUFDLGdCQUFnQixFQUFFLFVBQVU7O2dCQUMzQixRQUFRLEdBQUcsS0FBSSxDQUFDLHlCQUF5QixDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUM7WUFDM0UsT0FBTyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0MsQ0FBQyxHQUFFLEVBQUUsQ0FBQzthQUNMLE1BQU07Ozs7UUFBQyxVQUFDLHNCQUFzQixJQUFLLE9BQUEsc0JBQXNCLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQTVDLENBQTRDLEVBQUMsQ0FBQztJQUMxRixDQUFDOzs7OztJQUVNLHFEQUFlOzs7O0lBQXRCLFVBQXVCLGNBQXNDOztZQUNuRCxNQUFNLEdBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUM7YUFDdEMsR0FBRzs7OztRQUFDLFVBQUMsU0FBUzs7Z0JBQ0wsYUFBYSxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUM7O2dCQUMzQyxVQUFVLEdBQUcsYUFBYSxDQUFDLFVBQVU7WUFFekMsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxhQUFhLEVBQUU7Z0JBQ3BDLFVBQVUsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUc7Ozs7Z0JBQUMsVUFBQyxZQUFZLElBQUssT0FBQSxVQUFVLENBQUMsWUFBWSxDQUFDLEVBQXhCLENBQXdCLEVBQUM7YUFDdEYsQ0FBQyxDQUFDO1FBQ1AsQ0FBQyxFQUFDO1FBRU4sT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7Ozs7SUFFTSwwREFBb0I7Ozs7SUFBM0IsVUFBNEIsY0FBd0M7UUFBcEUsaUJBT0M7UUFORyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFO1lBQ3JCLE9BQU8sY0FBYyxDQUFDLE1BQU07Ozs7WUFBQyxVQUFDLE1BQU07Z0JBQ2hDLE9BQU8sQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RELENBQUMsRUFBQyxDQUFDO1NBQ047UUFDRCxPQUFPLGNBQWMsQ0FBQztJQUMxQixDQUFDOzs7O0lBRU0seURBQW1COzs7SUFBMUI7UUFDSSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ2xDLENBQUM7Ozs7Ozs7SUFFTywrREFBeUI7Ozs7OztJQUFqQyxVQUFrQyxjQUFjLEVBQUUsVUFBVTs7WUFDbEQsS0FBSyxHQUFHLFFBQVEsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDOztZQUM5QyxRQUFRLEdBQUcsRUFBRTtRQUVqQixJQUFJLEtBQUssRUFBRTs7Z0JBQ0QsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7O2dCQUM1QyxVQUFVLFNBQUE7WUFFZCxJQUFJLGdCQUFnQixLQUFLLEdBQUcsRUFBRTtnQkFDMUIsVUFBVSxHQUFHLFdBQVcsQ0FBQyxjQUFjLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixDQUFDLENBQUM7YUFDMUU7aUJBQU07Z0JBQ0gsVUFBVSxHQUFHLENBQUMsbUJBQVcsZ0JBQWdCLEVBQUEsQ0FBQztxQkFDckMsR0FBRzs7OztnQkFBQyxVQUFDLFlBQVksSUFBSyxPQUFBLFdBQVcsQ0FBQyxjQUFjLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxFQUFyRCxDQUFxRCxFQUFDO3FCQUM1RSxNQUFNOzs7O2dCQUFDLFVBQUMsS0FBSyxJQUFLLE9BQUEsS0FBSyxLQUFLLFNBQVMsRUFBbkIsQ0FBbUIsRUFBQyxDQUFDO2FBQy9DO1lBRUQsUUFBUSxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxVQUFVLFlBQUEsRUFBRSxDQUFDLENBQUM7U0FDbkQ7UUFFRCxPQUFPLFFBQVEsQ0FBQztJQUNwQixDQUFDO0lBQ0wsa0NBQUM7QUFBRCxDQUFDLEFBeEVELElBd0VDOzs7Ozs7O0lBdEVlLDZDQUFtQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IENvbnRlbnRNZXRhZGF0YUNvbmZpZywgT3JnYW5pc2VkUHJvcGVydHlHcm91cCwgUHJvcGVydHlHcm91cENvbnRhaW5lciB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY29udGVudC1tZXRhZGF0YS5pbnRlcmZhY2VzJztcbmltcG9ydCB7IGdldEdyb3VwLCBnZXRQcm9wZXJ0eSB9IGZyb20gJy4vcHJvcGVydHktZ3JvdXAtcmVhZGVyJztcblxuZXhwb3J0IGNsYXNzIEFzcGVjdE9yaWVudGVkQ29uZmlnU2VydmljZSBpbXBsZW1lbnRzIENvbnRlbnRNZXRhZGF0YUNvbmZpZyB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZzogYW55KSB7IH1cblxuICAgIHB1YmxpYyBpc0dyb3VwQWxsb3dlZChncm91cE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5pc0luY2x1ZGVBbGxFbmFibGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdyb3VwTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZyk7XG4gICAgICAgIHJldHVybiBncm91cE5hbWVzLmluZGV4T2YoZ3JvdXBOYW1lKSAhPT0gLTE7XG4gICAgfVxuXG4gICAgcHVibGljIHJlb3JnYW5pc2VCeUNvbmZpZyhwcm9wZXJ0eUdyb3VwczogUHJvcGVydHlHcm91cENvbnRhaW5lcik6IE9yZ2FuaXNlZFByb3BlcnR5R3JvdXBbXSB7XG4gICAgICAgIGNvbnN0IGFzcGVjdHMgPSB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgIGFzcGVjdE5hbWVzID0gT2JqZWN0LmtleXMoYXNwZWN0cyk7XG5cbiAgICAgICAgcmV0dXJuIGFzcGVjdE5hbWVzXG4gICAgICAgICAgICAucmVkdWNlKChncm91cEFjY3VtdWxhdG9yLCBhc3BlY3ROYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3R3JvdXAgPSB0aGlzLmdldE9yZ2FuaXNlZFByb3BlcnR5R3JvdXAocHJvcGVydHlHcm91cHMsIGFzcGVjdE5hbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBncm91cEFjY3VtdWxhdG9yLmNvbmNhdChuZXdHcm91cCk7XG4gICAgICAgICAgICB9LCBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoKG9yZ2FuaXNlZFByb3BlcnR5R3JvdXApID0+IG9yZ2FuaXNlZFByb3BlcnR5R3JvdXAucHJvcGVydGllcy5sZW5ndGggPiAwKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXBwZW5kQWxsUHJlc2V0KHByb3BlcnR5R3JvdXBzOiBQcm9wZXJ0eUdyb3VwQ29udGFpbmVyKTogT3JnYW5pc2VkUHJvcGVydHlHcm91cFtdIHtcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gIE9iamVjdC5rZXlzKHByb3BlcnR5R3JvdXBzKVxuICAgICAgICAgICAgLm1hcCgoZ3JvdXBOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydHlHcm91cCA9IHByb3BlcnR5R3JvdXBzW2dyb3VwTmFtZV0sXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0eUdyb3VwLnByb3BlcnRpZXM7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcHJvcGVydHlHcm91cCwge1xuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKS5tYXAoKHByb3BlcnR5TmFtZSkgPT4gcHJvcGVydGllc1twcm9wZXJ0eU5hbWVdKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGdyb3VwcztcbiAgICB9XG5cbiAgICBwdWJsaWMgZmlsdGVyRXhjbHVkZWRQcmVzZXQocHJvcGVydHlHcm91cHM6IE9yZ2FuaXNlZFByb3BlcnR5R3JvdXBbXSk6IE9yZ2FuaXNlZFByb3BlcnR5R3JvdXBbXSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5leGNsdWRlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlHcm91cHMuZmlsdGVyKChwcmVzZXQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuY29uZmlnLmV4Y2x1ZGUuaW5jbHVkZXMocHJlc2V0Lm5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3BlcnR5R3JvdXBzO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0luY2x1ZGVBbGxFbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuaW5jbHVkZUFsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9yZ2FuaXNlZFByb3BlcnR5R3JvdXAocHJvcGVydHlHcm91cHMsIGFzcGVjdE5hbWUpIHtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSBnZXRHcm91cChwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSk7XG4gICAgICAgIGxldCBuZXdHcm91cCA9IFtdO1xuXG4gICAgICAgIGlmIChncm91cCkge1xuICAgICAgICAgICAgY29uc3QgYXNwZWN0UHJvcGVydGllcyA9IHRoaXMuY29uZmlnW2FzcGVjdE5hbWVdO1xuICAgICAgICAgICAgbGV0IHByb3BlcnRpZXM7XG5cbiAgICAgICAgICAgIGlmIChhc3BlY3RQcm9wZXJ0aWVzID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gZ2V0UHJvcGVydHkocHJvcGVydHlHcm91cHMsIGFzcGVjdE5hbWUsIGFzcGVjdFByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0gKDxzdHJpbmdbXT4gYXNwZWN0UHJvcGVydGllcylcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgocHJvcGVydHlOYW1lKSA9PiBnZXRQcm9wZXJ0eShwcm9wZXJ0eUdyb3VwcywgYXNwZWN0TmFtZSwgcHJvcGVydHlOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigocHJvcHMpID0+IHByb3BzICE9PSB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXdHcm91cCA9IFt7IHRpdGxlOiBncm91cC50aXRsZSwgcHJvcGVydGllcyB9XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdHcm91cDtcbiAgICB9XG59XG4iXX0=