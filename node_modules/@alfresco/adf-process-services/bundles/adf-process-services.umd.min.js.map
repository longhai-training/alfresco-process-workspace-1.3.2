{"version":3,"sources":["ng://@alfresco/adf-process-services/process-list/models/filter-process.model.ts","ng://@alfresco/adf-process-services/process-list/services/process-filter.service.ts","ng://@alfresco/adf-process-services/app-list/icon.model.ts","ng://@alfresco/adf-process-services/process-list/components/process-filters.component.ts","ng://@alfresco/adf-process-services/process-list/models/process-definition.model.ts","ng://@alfresco/adf-process-services/process-list/models/process-instance-variable.model.ts","ng://@alfresco/adf-process-services/process-list/models/process-instance.model.ts","ng://@alfresco/adf-process-services/process-list/models/process-list.model.ts","ng://@alfresco/adf-process-services/process-list/services/process.service.ts","ng://@alfresco/adf-process-services/process-list/components/process-instance-details.component.ts","ng://@alfresco/adf-process-services/process-list/components/process-audit.directive.ts","ng://@alfresco/adf-process-services/process-list/components/process-instance-header.component.ts","node_modules/tslib/tslib.es6.js","ng://@alfresco/adf-process-services/task-list/models/filter.model.ts","ng://@alfresco/adf-process-services/task-list/models/task-preset.model.ts","ng://@alfresco/adf-process-services/task-list/models/form.model.ts","ng://@alfresco/adf-process-services/task-list/models/task-details.model.ts","ng://@alfresco/adf-process-services/task-list/models/task-list.model.ts","ng://@alfresco/adf-process-services/task-list/services/tasklist.service.ts","ng://@alfresco/adf-process-services/task-list/components/task-list.component.ts","ng://@alfresco/adf-process-services/task-list/components/checklist.component.ts","ng://@alfresco/adf-process-services/task-list/validators/task-description.validator.ts","ng://@alfresco/adf-process-services/task-list/components/task-header.component.ts","ng://@alfresco/adf-process-services/task-list/components/task-details.component.ts","ng://@alfresco/adf-process-services/task-list/components/no-task-detail-template.directive.ts","ng://@alfresco/adf-process-services/task-list/services/task-filter.service.ts","ng://@alfresco/adf-process-services/task-list/components/task-filters.component.ts","ng://@alfresco/adf-process-services/task-list/components/task-audit.directive.ts","ng://@alfresco/adf-process-services/task-list/components/start-task.component.ts","ng://@alfresco/adf-process-services/task-list/components/task-standalone.component.ts","ng://@alfresco/adf-process-services/task-list/components/attach-form.component.ts","ng://@alfresco/adf-process-services/task-list/services/process-upload.service.ts","ng://@alfresco/adf-process-services/task-list/services/task-upload.service.ts","ng://@alfresco/adf-process-services/task-list/models/start-task.model.ts","ng://@alfresco/adf-process-services/task-list/models/task-details.event.ts","ng://@alfresco/adf-process-services/task-list/models/user-event.model.ts","ng://@alfresco/adf-process-services/task-list/models/user-group.model.ts","ng://@alfresco/adf-process-services/material.module.ts","ng://@alfresco/adf-process-services/process-comments/process-comments.component.ts","ng://@alfresco/adf-process-services/process-comments/process-comments.module.ts","ng://@alfresco/adf-process-services/people/components/people/people.component.ts","ng://@alfresco/adf-process-services/people/components/people-list/people-list.component.ts","ng://@alfresco/adf-process-services/people/components/people-search/people-search.component.ts","ng://@alfresco/adf-process-services/people/helpers/getDisplayUser.ts","ng://@alfresco/adf-process-services/people/components/people-search-field/people-search-field.component.ts","ng://@alfresco/adf-process-services/people/components/people-selector/people-selector.component.ts","ng://@alfresco/adf-process-services/people/directives/people-search-action-label.directive.ts","ng://@alfresco/adf-process-services/people/directives/people-search-title.directive.ts","ng://@alfresco/adf-process-services/people/people.module.ts","ng://@alfresco/adf-process-services/content-widget/attach-file-widget-dialog.component.ts","ng://@alfresco/adf-process-services/content-widget/attach-file-widget-dialog.service.ts","ng://@alfresco/adf-process-services/content-widget/attach-file-widget.component.ts","ng://@alfresco/adf-process-services/content-widget/attach-folder-widget.component.ts","ng://@alfresco/adf-process-services/content-widget/content-widget.module.ts","ng://@alfresco/adf-process-services/form/form.component.ts","ng://@alfresco/adf-process-services/form/start-form.component.ts","ng://@alfresco/adf-process-services/form/form.module.ts","ng://@alfresco/adf-process-services/task-list/task-list.module.ts","ng://@alfresco/adf-process-services/process-list/components/process-instance-tasks.component.ts","ng://@alfresco/adf-process-services/process-list/models/process-preset.model.ts","ng://@alfresco/adf-process-services/process-list/components/process-list.component.ts","ng://@alfresco/adf-process-services/process-list/components/start-process.component.ts","ng://@alfresco/adf-process-services/process-list/models/process-instance-filter.model.ts","ng://@alfresco/adf-process-services/process-list/process-list.module.ts","ng://@alfresco/adf-process-services/app-list/apps-list.component.ts","ng://@alfresco/adf-process-services/app-list/select-apps-dialog-component.ts","ng://@alfresco/adf-process-services/app-list/apps-list.module.ts","ng://@alfresco/adf-process-services/attachment/task-attachment-list.component.ts","ng://@alfresco/adf-process-services/attachment/process-attachment-list.component.ts","ng://@alfresco/adf-process-services/attachment/create-process-attachment.component.ts","ng://@alfresco/adf-process-services/attachment/create-task-attachment.component.ts","ng://@alfresco/adf-process-services/attachment/attachment.module.ts","ng://@alfresco/adf-process-services/process.module.ts"],"names":["FilterProcessRepresentationModel","obj","this","id","appId","name","recent","icon","filter","index","prototype","hasFilter","ProcessFilterParamRepresentationModel","processDefinitionId","appDefinitionId","processInstanceId","state","sort","page","size","ProcessFilterService","alfrescoApiService","getProcessFilters","_this","from","callApiProcessFilters","pipe","map","response","filters","data","forEach","filterModel","push","catchError","err","handleProcessError","getProcessFilterById","filterId","find","getProcessFilterByName","filterName","createDefaultFilters","runningFilter","getRunningFilterInstance","runningObservable","addProcessFilter","completedFilter","getCompletedFilterInstance","completedObservable","allFilter","getAllFilterInstance","allObservable","Observable","observer","forkJoin","subscribe","res","next","complete","getInstance","activiti","userFiltersApi","createUserProcessInstanceFilter","getUserProcessInstanceFilters","error","throwError","Injectable","args","providedIn","AlfrescoApiService","IconModel","initIconsMDL","mapGlyphiconToMaterialDesignIcons","iconsMDL","get","DEFAULT_TASKS_APP_MATERIAL_ICON","Map","set","ProcessFiltersComponent","processFilterService","appsProcessService","filterClick","EventEmitter","success","showIcon","filterSelected","ngOnInit","ngOnChanges","changes","appName","currentValue","getFiltersByAppId","getFiltersByAppName","previousValue","selectProcessFilter","length","isFilterListEmpty","resDefault","resetFilter","filterParam","emit","errDefault","getDeployedApplicationsByName","application","selectFilter","currentFilter","processFilter","toLowerCase","isCurrentFilterEmpty","selectDefaultTaskFilter","selectRunningFilter","getCurrentFilter","undefined","getFilterIcon","Component","selector","template","AppsProcessService","Input","Output","ProcessDefinitionRepresentation","description","key","category","version","deploymentId","tenantId","metaDataValues","hasStartForm","ProcessInstanceVariable","scope","value","valueUrl","ProcessInstance","businessKey","ended","graphicalNotationDefined","processDefinitionCategory","processDefinitionDeploymentId","processDefinitionDescription","processDefinitionKey","processDefinitionName","processDefinitionVersion","startFormDefined","started","startedBy","variables","ProcessListModel","total","start","ProcessService","getProcessInstances","requestNode","processApi","filtered","process","getProcesses","of","fetchProcessAuditPdfById","processId","getProcessAuditPdf","fetchProcessAuditJsonById","getProcessAuditJson","getProcess","getProcessInstance","getProcessTasks","taskOpts","taskApi","listTasks","extractData","tasks","task","created","moment","format","getProcessDefinitions","opts","latest","processDefs","pd","startProcess","outcome","startFormValues","startRequest","values","startNewProcessInstance","cancelProcess","deleteProcessInstance","getProcessInstanceVariables","processInstanceVariablesApi","processVars","currentProcessVar","createOrUpdateProcessInstanceVariables","deleteProcessInstanceVariable","variableName","ProcessInstanceDetailsComponent","activitiProcess","logService","showTitle","showRefreshButton","processCancelled","taskClick","showProcessDiagram","load","reset","processInstanceDetails","isRunning","onTaskClicked","event","getProcessNameOrDescription","dateFormat","getFormatDate","datePipe","DatePipe","transform","onShowProcessDiagram","LogService","ViewChild","ProcessAuditDirective","contentService","processListService","fileName","download","clicked","isValidType","setDefaultFormatType","isJsonFormat","isPdfFormat","fetchAuditInfo","blob","audit","downloadBlob","onClickAudit","Directive","host","role","(click)","ContentService","ProcessInstanceHeaderComponent","translationService","appConfig","refreshData","processInstance","defaultProperties","initDefaultProperties","filteredProperties_1","properties","cardItem","isValidSelection","CardViewTextItemModel","label","getProcessStatus","CardViewDateItemModel","default","instant","getStartedByFullName","filteredProperties","indexOf","fullName","firstName","lastName","TranslationService","AppConfigService","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","create","__values","o","m","Symbol","iterator","i","call","done","__read","n","r","e","ar","__spread","arguments","concat","AppDefinitionRepresentationModel","defaultAppId","theme","modelId","FilterParamsModel","FilterRepresentationModel","UserTaskFilterRepresentation","TaskQueryRequestRepresentationModel","tslib_1.__extends","TaskQueryRepresentation","taskPresetsDefaultModel","type","title","sortable","cssClass","Form","TaskDetailsModel","priority","assignee","UserProcessModel","adhocTaskCanBeReassigned","dueDate","duration","endDate","executionId","formKey","initiatorCanCompleteTask","managerOfCandidateGroup","memberOfCandidateGroup","memberOfCandidateUsers","involvedGroups","involvedPeople","parentTaskId","parentTaskName","processInstanceName","processInstanceStartUserId","taskDefinitionKey","getFullName","trim","isCompleted","TaskListModel","input","assign","item","TaskListService","apiService","getFilterForTaskById","taskId","filterList","flatMap","isTaskRelatedToFilter","generateTaskRequestNodeFromFilter","assignment","requestNodeForFilter","callApiTasksFiltered","element","handleError","getTasks","findTasksByState","findAllTaskByState","getTotalTasks","switchMap","findAllTasksWithoutState","activeTasks","completedTasks","getTaskDetails","callApiTaskDetails","details","getTaskChecklist","callApiTaskChecklist","checklists","checklist","getFormList","modelsApi","getModels","modelType","forms","form","attachFormToATask","formId","attachForm","addTask","callApiAddTask","deleteTask","callApiDeleteTask","deleteForm","callApiDeleteForm","completeTask","createNewTask","callApiCreateTask","assignTask","callApiAssignTask","assignTaskByUserId","userId","claimTask","unclaimTask","updateTask","updated","result","fetchTaskAuditPdfById","getTaskAuditPdf","fetchTaskAuditJsonById","getTaskAuditJson","getTask","addSubtask","removeForm","getChecklist","TaskListComponent","taskListService","appConfigService","userPreferences","_super","PRESET_KEY","selectionMode","multiselect","selectFirstRow","rowClick","rowsSelected","PaginationComponent","DEFAULT_PAGINATION","maxItems","rows","isLoading","sorting","hasCustomDataSource","select","UserPreferenceValues","PaginationSize","pageSize","pagination","BehaviorSubject","skipCount","totalItems","ngAfterContentInit","createDatatableSchema","getColumns","setColumns","columns","reload","setCustomDataSource","isPropertyChanged","isSortChanged","split","actualSort","changed","landingTaskId","isEqualToCurrentId","createRequestNode","loadTasksByState","optimizeTaskDetails","selectTask","count","taskIdSelected","isListEmpty","currentInstanceId","dataRow","currentRow","isSelected","getCurrentId","onRowClick","getValue","onRowSelect","selectedInstances","detail","selection","onRowUnselect","onRowKeyUp","keyboardEvent","preventDefault","row","instances","dueAfter","toDate","dueBefore","text","includeProcessInstance","updatePagination","params","needsReload","currentPage","Math","floor","UserPreferencesService","ContentChild","CustomEmptyContentTemplateDirective","CustomLoadingContentTemplateDirective","DataTableSchema","ChecklistComponent","activitiTaskList","dialog","readOnly","checklistTaskCreated","checklistTaskDeleted","taskDetailsModel","showDialog","open","addNewDialog","width","add","newTask","taskName","cancel","delete","check","closeAll","MatDialog","TaskDescriptionValidator","message","isValid","isWhitespace","TaskHeaderComponent","activitiTaskService","bpmUserService","formName","claim","unclaim","inEdit","loadCurrentBpmUserId","parentInfoMap","taskDetails","clickable","getTaskStatus","editable","CardViewMapItemModel","getTaskDuration","multiline","validators","getParentInfo","getCurrentUserInfo","currentUserId","hasAssignee","isAssignedTo","isAssignedToCurrentUser","isCandidateMember","isTaskClaimable","isTaskClaimedByCandidateMember","info","BpmUserService","TaskDetailsComponent","authService","peopleProcessService","cardViewUpdateService","debugMode","showNextTask","showHeader","showHeaderContent","showInvolvePeople","showComments","showChecklist","showFormTitle","showFormCompleteButton","showFormSaveButton","readOnlyForm","showFormRefreshButton","fieldValidators","formSaved","formCompleted","formContentClicked","formLoaded","taskCreated","taskDeleted","executeOutcome","claimedTask","unClaimedTask","taskFormName","taskPeople","showAssignee","showAttachForm","internalReadOnlyForm","peopleSearch","peopleSearchObserver","share","getBpmLoggedUser","user","currentLoggedUser","loadDetails","itemUpdated$","updateTaskDetails","bind","itemClicked$","clickTaskDetails","isStandaloneTask","isStandaloneTaskWithForm","hasFormKey","isStandaloneTaskWithoutForm","isFormComponentVisible","isShowAttachForm","isTaskStandaloneComponentVisible","isTaskActive","updateNotification","clickNotification","target","isNaN","getTime","isAssigned","hasEmailAddress","email","isAssignedToMe","isEmailEqual","isExternalIdEqual","externalId","assigneeMail","currentLoggedEmail","toLocaleLowerCase","assigneeExternalId","currentUserExternalId","isCompleteButtonEnabled","canInitiatorComplete","isCompleteButtonVisible","isSaveButtonVisible","hasSaveButton","loadNextTask","onComplete","onFormCompleted","onShowAttachForm","onCancelAttachForm","onCompleteAttachForm","onFormContentClick","content","onFormSaved","onFormLoaded","onChecklistTaskCreated","onChecklistTaskDeleted","onFormError","errorDialogRef","errorDialog","onFormExecuteOutcome","closeErrorDialog","onClaimAction","onUnclaimAction","isCompletedTask","searchUser","searchedWord","getWorkflowUsers","users","onCloseSearch","assignTaskToUser","selectedUser","getTaskHeaderViewClass","isReadOnlyComment","AuthenticationService","PeopleProcessService","CardViewUpdateService","NoTaskDetailsTemplateDirective","activitiTaskDetails","noTaskDetailsTemplateComponent","TemplateRef","TaskFilterService","involvedTasksFilter","getInvolvedTasksFilterInstance","involvedObservable","addFilter","myTasksFilter","getMyTasksFilterInstance","myTaskObservable","queuedTasksFilter","getQueuedTasksFilterInstance","queuedObservable","completedTasksFilter","getCompletedTasksFilterInstance","completeObservable","getTaskListFilters","callApiTaskFilters","getTaskFilterById","getTaskFilterByName","createUserTaskFilter","getUserTaskFilters","TaskFiltersComponent","taskFilterService","getFilters","createFiltersByAppId","newFilter","selectFilterAndEmit","selectFilterWithTask","filteredFilterList","TaskAuditDirective","MOMENT_DATE_FORMATS","StartTaskComponent","taskService","dateAdapter","userPreferencesService","formBuilder","FORMAT_DATE","MAX_LENGTH","dateError","maxTaskNameLength","loading","validateMaxTaskNameLength","field","FormFieldModel","FormModel","assigneeId","placeholder","Locale","locale","setLocale","loadFormsTask","buildForm","taskForm","group","FormControl","Validators","required","maxLength","whitespaceValidator","valueChanges","taskFormValues","setTaskDetails","control","whitespace","toString","isFormValid","valid","saveTask","createRes","defaultIfEmpty","attachRes","getAssigneeId","parseInt","onCancel","forms$","isUserNameEmpty","isEmpty","getDisplayUser","delimiter","onDateChanged","newDateValue","momentDate","log","defineProperty","providers","provide","DateAdapter","useClass","MomentDateAdapter","MAT_DATE_FORMATS","useValue","ɵ0","encapsulation","ViewEncapsulation","None","FormBuilder","TaskStandaloneComponent","hasCompletePermission","hideCancelButton","onCancelButtonClick","onCompleteButtonClick","hasCompleteButton","hasCancelButton","hasAttachFormButton","AttachFormComponent","formService","cancelAttachForm","disableSubmit","attachFormControl","onFormAttached","selectedFormId","onRemoveButtonClick","onAttachFormButtonClick","getTaskForm","getFormDefinitionByName","formDef","FormService","ProcessUploadService","getUploadPromise","file","options","parentId","promise","contentApi","createRelatedContentOnProcessInstance","isRelatedContent","catch","UploadService","TaskUploadService","createRelatedContentOnTask","StartTaskModel","TaskDetailsEvent","_defaultPrevented","_value","UserEventModel","UserGroupModel","groups","status","modules","MatAutocompleteModule","MatButtonModule","MatCardModule","MatDialogModule","MatCheckboxModule","MatDatepickerModule","MatGridListModule","MatIconModule","MatInputModule","MatListModule","MatOptionModule","MatRadioModule","MatSelectModule","MatSlideToggleModule","MatTableModule","MatTabsModule","MatProgressSpinnerModule","MatNativeDateModule","MatRippleModule","MatTooltipModule","MatChipsModule","MatMenuModule","float","MaterialModule","NgModule","MAT_LABEL_GLOBAL_OPTIONS","ɵ0$1","imports","exports","ProcessCommentsComponent","commentProcessService","comments","beingAdded","comment$","commentObserver","comment","getProcessInstanceComments","resetComments","comment1","comment2","date1","Date","date2","addProcessInstanceComment","unshift","clear","isReadOnly","onError","CommentProcessService","ProcessCommentsModule","FormsModule","ReactiveFormsModule","CommonModule","CoreModule","forChild","declarations","PeopleComponent","people","showAssignment","peopleSearch$","ngAfterViewInit","involveUserAndCloseSearch","involveUserAndClose","involveUserWithoutCloseSearch","involveUser","involveUserWithTask","removeInvolvedUser","involvedUser","getInitialUserName","onAddAssignment","onClickAction","hasPeople","isEditMode","PeopleListComponent","actions","clickRow","clickAction","peopleDataTable","columnList","selectUser","hasActions","onShowRowActionsMenu","onExecuteRowAction","action","DataColumnListComponent","PeopleSearchComponent","searchPeople","closeSearch","filteredResults$","results","performSearch","performSearchCallback","closeSearchList","class","PeopleSearchFieldComponent","defaultPlaceholder","users$","debounceTime","searchWord","PeopleSelectorComponent","peopleIdChange","onSearchUserError","userSelected","updateUserSelection","userDeselected","searchFieldComponent","PeopleSearchActionLabelDirective","PeopleSearchTitleDirective","PeopleModule","AttachFileWidgetDialogComponent","externalApiService","init","ecmHost","context","buttonActionName","actionName","toUpperCase","isLoggedIn","performLogin","loginPanel","submitForm","close","selected","onSelect","nodeList","isFile","chosenNode","onClick","DocumentListService","SitesService","ContentNodeSelectorService","SearchService","ExternalAlfrescoApiService","Inject","MAT_DIALOG_DATA","AttachFileWidgetDialogService","openLogin","titleString","Subject","isSelectionValid","isNodeFile","openLoginDialog","currentPanelClass","chosenWidth","panelClass","entry","AttachFileWidgetComponent","logger","thumbnails","processContentService","activitiContentService","contentDialog","attachDialogService","repositoryList","tempFilesList","hasFile","getMultipleFileParam","getAlfrescoRepositories","repoList","taskSaved","isFileSourceConfigured","fileSource","isMultipleSourceUpload","isOnlyLocalSourceSelected","isAllFileSourceSelected","serviceId","isSimpleUploadButton","isUploadButtonVisible","multipleOption","isDefinedSourceFolder","selectedFolder","isTemporaryFile","findIndex","elem","openSelectDialogFromFileSource","openFileBrowseDialogByFolderId","pathId","selections","_a","apply","uploadFileFromCS","accountId","siteId","onAttachFileChanged","files","onFileChanged","onRemoveAttachFile","splice","contentBlob","removeFile","onAttachFileClicked","isExternal","fileClicked","downloadContent","getFileRawContent","openSelectDialog","repository","accountIdentifier","currentECMHost","getDomainHost","AppConfigValues","ECMHOST","repositoryUrl","formattedRepositoryHost","replace","node","openFileBrowseDialogBySite","fileNodeList","filesSaved","mergeMap","zip","mimeType","applyAlfrescoNode","_b","json","urlToCheck","match","(blur)","(change)","(focus)","(focusin)","(focusout)","(input)","(invalid)","(select)","ThumbnailService","ProcessContentService","ActivitiContentService","ContentNodeDialogService","UploadWidgetComponent","AttachFolderWidgetComponent","nodeService","hasFolder","selectedFolderName","getNode","folderSource","openFolderBrowseDialogByFolderId","openFolderBrowseDialogBySite","removeFolder","NodesApiService","WidgetComponent","ContentWidgetModule","ContentNodeSelectorModule","entryComponents","FormComponent","visibilityService","ecmModelService","formRenderingService","saveMetadata","formDataRefreshed","subscriptions","setComponentTypeResolver","validateForm","validateFormEvent","errorsField","formError","ngOnDestroy","subscription","unsubscribe","getFormByTaskId","getFormDefinitionByFormId","getFormDefinitionByFormName","nodeId","loadFormForEcmNode","refreshFormData","onRefreshClicked","loadForm","findProcessVariablesByTaskId","isAProcessTask","getTaskProcessVariable","taskRepresentation","Promise","resolve","reject","processVariables","parsedForm","parseForm","refreshVisibility","getFormDefinitionById","saveTaskForm","onTaskSaved","storeFormAsMetadata","onTaskSavedError","completeTaskForm","onTaskCompleted","onTaskCompletedError","fields","outcomes","getFormDefinitionOutcomes","FormOutcomeModel","SAVE_ACTION","isSystem","checkVisibility","onFormDataRefreshed","getNodeMetadata","metadata","loadFormFromActiviti","nodeType","searchFrom","loadFormFromFormId","createFormFromANode","formMetadata","createEcmTypeForActivitiForm","createNodeMetadata","prefixedName","EcmModelService","MODEL_NAMESPACE","path","nameNode","FormEvent","taskSavedError","FormErrorEvent","taskCompleted","taskCompletedError","onExecuteOutcome","FormOutcomeEvent","defaultPrevented","WidgetVisibilityService","NodeService","FormRenderingService","FormBaseComponent","StartFormComponent","showOutcomeButtons","outcomeClick","outcomesContainer","cleanProcessVariable","getStartFormDefinition","loadStartForm","instance","getStartFormInstance","isOutcomeButtonVisible","isFormReadOnly","COMPLETE_ACTION","START_PROCESS_ACTION","FormModule","TaskListModule","FlexLayoutModule","ProcessInstanceTasksComponent","task$","taskObserver","completedTask$","completedTaskObserver","loadActive","loadCompleted","hasStartFormDefined","getUserFullName","clickTask","$event","clickStartTask","showStartDialog","startDialog","height","closeStartDialog","processPresetsDefaultModel","ProcessInstanceListComponent","processService","paginationSize","optimizeProcessDetails","selectFirst","StartProcessInstanceComponent","showSelectProcessDropdown","processFilterSelector","processDefinitions","selectedProcessDef","errorMessageId","maxProcessNameLength","processNameInput","processDefinitionInput","loadStartProcess","filteredProcesses","_filter","moveNodeFromCStoPS","filterValue_1","filteredProcess","option","includes","getSelectedProcess","selectedProcess","processSelected","resetSelectedProcessDefinition","resetErrorMessage","processDefinitionRepresentations","isProcessDefinitionsEmpty","currentProcessDefinition","setValue","getAlfrescoRepositoryName","alfrescoRepositoryName","ALFRESCO_REPOSITORY_NAME","this_1","formValues","startForm","cancelStartProcess","isProcessDefinitionEmpty","isStartFormMissingOrValid","hasErrorMessage","onOutcomeClick","hasProcessName","displayFn","processName","displayDropdown","stopPropagation","inputAutocomplete","panelOpen","closePanel","openPanel","MatAutocompleteTrigger","ProcessFilterRequestRepresentation","ProcessListModule","AppsListComponent","layoutType","LAYOUT_GRID","appClick","appList","hasEmptyCustomContentTemplate","apps$","appsObserver","setDefaultLayoutType","app","emptyCustomContent","getDeployedApplications","filterApps","isDefaultApp","DEFAULT_TASKS_APP_THEME","DEFAULT_TASKS_APP_ICON","DEFAULT_TASKS_APP","getAppName","DEFAULT_TASKS_APP_NAME","selectApp","currentApp","apps","filteredApps","filtersAppId","LAYOUT_LIST","isList","isGrid","getTheme","getBackgroundIcon","SelectAppsDialogComponent","dialogRef","processApps","onStart","MatDialogRef","AppsListModule","TaskAttachmentListComponent","thumbnailService","ngZone","disabled","attachmentClick","hasCustomTemplate","attachments","loadAttachmentsByTaskId","emptyTemplate","hasCustomEmptyTemplate","run","createdBy","getMimeTypeIcon","getTaskRelatedContent","attachList","deleteAttachmentById","contentId","deleteRelatedContent","emitDocumentContent","openContent","isDisabled","NgZone","EmptyListComponent","ProcessAttachmentListComponent","loadAttachmentsByProcessInstanceId","getProcessRelatedContent","CreateProcessAttachmentComponent","onFileUpload","filesList","filesList_1","tslib_1.__values","filesList_1_1","createProcessRelatedContent","AttachmentComponent","createTaskRelatedContent","AttachmentModule","source","ProcessModule","forRoot","ngModule","TRANSLATION_PROVIDER","multi","ProcessModuleLazy","ɵ0$2"],"mappings":"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","sourcesContent":["/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    ProcessFilterRequestRepresentation,\n    ProcessInstanceFilterRepresentation,\n    UserProcessInstanceFilterRepresentation\n} from '@alfresco/js-api';\n\nexport class FilterProcessRepresentationModel implements UserProcessInstanceFilterRepresentation {\n    appId: number;\n    filter: ProcessInstanceFilterRepresentation;\n    icon: string;\n    id: number;\n    index: number;\n    name: string;\n    recent: boolean;\n\n    constructor(obj: any) {\n        if (obj) {\n            this.id = obj.id || null;\n            this.appId = obj.appId || null;\n            this.name = obj.name || null;\n            this.recent = !!obj.recent;\n            this.icon = obj.icon || null;\n            this.filter = obj.filter || null;\n            this.index = obj.index;\n        }\n    }\n\n    hasFilter() {\n        return !!this.filter;\n    }\n}\n\n/**\n * This object represent the parameters of a process filter.\n */\nexport class ProcessFilterParamRepresentationModel implements ProcessFilterRequestRepresentation {\n\n    processDefinitionId?: string;\n    processInstanceId?: string;\n    appDefinitionId?: number;\n    state?: any;\n    sort?: any;\n    page?: number;\n    size?: number;\n\n    constructor(obj?: any) {\n        this.processDefinitionId = obj.processDefinitionId || null;\n        this.appDefinitionId = obj.appDefinitionId || null;\n        this.processInstanceId = obj.processInstanceId || null;\n        this.state = obj.state || null;\n        this.sort = obj.sort || null;\n        this.page = obj.page || null;\n        this.size = obj.size || null;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { Observable, from, forkJoin, throwError } from 'rxjs';\nimport { FilterProcessRepresentationModel } from '../models/filter-process.model';\nimport { map, catchError } from 'rxjs/operators';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProcessFilterService {\n\n    constructor(private alfrescoApiService: AlfrescoApiService) {\n    }\n\n    /**\n     * Gets all filters defined for a Process App.\n     * @param appId ID of the target app\n     * @returns Array of filter details\n     */\n    getProcessFilters(appId: number): Observable<FilterProcessRepresentationModel[]> {\n        return from(this.callApiProcessFilters(appId))\n            .pipe(\n                map((response: any) => {\n                    const filters: FilterProcessRepresentationModel[] = [];\n                    response.data.forEach((filter: FilterProcessRepresentationModel) => {\n                        const filterModel = new FilterProcessRepresentationModel(filter);\n                        filters.push(filterModel);\n                    });\n                    return filters;\n                }),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Retrieves the process filter by ID.\n     * @param filterId ID of the filter\n     * @param appId ID of the target app\n     * @returns Details of the filter\n     */\n    getProcessFilterById(filterId: number, appId?: number): Observable<FilterProcessRepresentationModel> {\n        return from(this.callApiProcessFilters(appId))\n            .pipe(\n                map((response: any) => {\n                    return response.data.find((filter) => filter.id === filterId);\n                }),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Retrieves the process filter by name.\n     * @param filterName Name of the filter\n     * @param appId ID of the target app\n     * @returns Details of the filter\n     */\n    getProcessFilterByName(filterName: string, appId?: number): Observable<FilterProcessRepresentationModel> {\n        return from(this.callApiProcessFilters(appId))\n            .pipe(\n                map((response: any) => {\n                    return response.data.find((filter) => filter.name === filterName);\n                }),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Creates and returns the default filters for an app.\n     * @param appId ID of the target app\n     * @returns Default filters just created\n     */\n    public createDefaultFilters(appId: number): Observable<FilterProcessRepresentationModel[]> {\n        const runningFilter = this.getRunningFilterInstance(appId);\n        const runningObservable = this.addProcessFilter(runningFilter);\n\n        const completedFilter = this.getCompletedFilterInstance(appId);\n        const completedObservable = this.addProcessFilter(completedFilter);\n\n        const allFilter = this.getAllFilterInstance(appId);\n        const allObservable = this.addProcessFilter(allFilter);\n\n        return new Observable((observer) => {\n            forkJoin(\n                runningObservable,\n                completedObservable,\n                allObservable\n            ).subscribe(\n                (res) => {\n                    const filters: FilterProcessRepresentationModel[] = [];\n                    res.forEach((filter) => {\n                        if (filter.name === runningFilter.name) {\n                            runningFilter.id = filter.id;\n                            filters.push(runningFilter);\n                        } else if (filter.name === completedFilter.name) {\n                            completedFilter.id = filter.id;\n                            filters.push(completedFilter);\n                        } else if (filter.name === allFilter.name) {\n                            allFilter.id = filter.id;\n                            filters.push(allFilter);\n                        }\n                    });\n                    observer.next(filters);\n                    observer.complete();\n                },\n                (err: any) => {\n                    this.handleProcessError(err);\n                });\n        });\n    }\n\n    /**\n     * Creates and returns a filter that matches \"running\" process instances.\n     * @param appId ID of the target app\n     * @returns Filter just created\n     */\n    public getRunningFilterInstance(appId: number): FilterProcessRepresentationModel {\n        return new FilterProcessRepresentationModel({\n            'name': 'Running',\n            'appId': appId,\n            'recent': true,\n            'icon': 'glyphicon-random',\n            'filter': { 'sort': 'created-desc', 'name': '', 'state': 'running' }\n        });\n    }\n\n    /**\n     * Returns a static Completed filter instance.\n     * @param appId ID of the target app\n     * @returns Details of the filter\n     */\n    private getCompletedFilterInstance(appId: number): FilterProcessRepresentationModel {\n        return new FilterProcessRepresentationModel({\n            'name': 'Completed',\n            'appId': appId,\n            'recent': false,\n            'icon': 'glyphicon-ok-sign',\n            'filter': { 'sort': 'created-desc', 'name': '', 'state': 'completed' }\n        });\n    }\n\n    /**\n     * Returns a static All filter instance.\n     * @param appId ID of the target app\n     * @returns Details of the filter\n     */\n    private getAllFilterInstance(appId: number): FilterProcessRepresentationModel {\n        return new FilterProcessRepresentationModel({\n            'name': 'All',\n            'appId': appId,\n            'recent': true,\n            'icon': 'glyphicon-th',\n            'filter': { 'sort': 'created-desc', 'name': '', 'state': 'all' }\n        });\n    }\n\n    /**\n     * Adds a filter.\n     * @param filter The filter to add\n     * @returns The filter just added\n     */\n    addProcessFilter(filter: FilterProcessRepresentationModel): Observable<FilterProcessRepresentationModel> {\n        return from(this.alfrescoApiService.getInstance().activiti.userFiltersApi.createUserProcessInstanceFilter(filter))\n            .pipe(\n                map((response: FilterProcessRepresentationModel) => {\n                    return response;\n                }),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Calls `getUserProcessInstanceFilters` from the Alfresco JS API.\n     * @param appId ID of the target app\n     * @returns List of filter details\n     */\n    callApiProcessFilters(appId?: number) {\n        if (appId) {\n            return this.alfrescoApiService.getInstance().activiti.userFiltersApi.getUserProcessInstanceFilters({ appId: appId });\n        } else {\n            return this.alfrescoApiService.getInstance().activiti.userFiltersApi.getUserProcessInstanceFilters();\n        }\n    }\n\n    private handleProcessError(error: any) {\n        return throwError(error || 'Server error');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* spellchecker: disable */\nexport class IconModel {\n    public static DEFAULT_TASKS_APP_MATERIAL_ICON: string = 'favorite_border';\n\n    private iconsMDL: Map<string, string>;\n\n    constructor() {\n        this.initIconsMDL();\n    }\n\n    mapGlyphiconToMaterialDesignIcons(icon: string) {\n        return this.iconsMDL.get(icon) ? this.iconsMDL.get(icon) : IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON;\n    }\n\n    /**\n     * Map all the bootstrap glyphicon icons with Material design material icon\n     */\n    initIconsMDL() {\n        this.iconsMDL = new Map<string, string>();\n\n        this.iconsMDL.set('glyphicon-asterisk', 'ac_unit');\n        this.iconsMDL.set('glyphicon-plus', 'add');\n        this.iconsMDL.set('glyphicon-euro', 'euro_symbol');\n        this.iconsMDL.set('glyphicon-cloud', 'cloud');\n        this.iconsMDL.set('glyphicon-envelope', 'mail');\n        this.iconsMDL.set('glyphicon-pencil', 'create');\n        this.iconsMDL.set('glyphicon-glass', 'local_bar');\n        this.iconsMDL.set('glyphicon-music', 'music_note');\n        this.iconsMDL.set('glyphicon-search', 'search');\n        this.iconsMDL.set('glyphicon-heart', 'favorite');\n        this.iconsMDL.set('glyphicon-heart-empty', 'favorite_border');\n        this.iconsMDL.set('glyphicon-star', 'star');\n        this.iconsMDL.set('glyphicon-star-empty', 'star_border');\n        this.iconsMDL.set('glyphicon-user', 'person');\n        this.iconsMDL.set('glyphicon-film', 'movie_creation');\n        this.iconsMDL.set('glyphicon-th-large', 'view_comfy');\n        this.iconsMDL.set('glyphicon-th', 'dashboard');\n        this.iconsMDL.set('glyphicon-th-list', 'list');\n        this.iconsMDL.set('glyphicon-ok', 'done');\n        this.iconsMDL.set('glyphicon-remove', 'cancel');\n        this.iconsMDL.set('glyphicon-zoom-in', 'zoom_in');\n        this.iconsMDL.set('glyphicon-zoom-out', 'zoom_out');\n        this.iconsMDL.set('glyphicon-off', 'highlight_off');\n        this.iconsMDL.set('glyphicon-signal', 'signal_cellular_4_bar');\n        this.iconsMDL.set('glyphicon-cog', 'settings');\n        this.iconsMDL.set('glyphicon-trash', 'delete');\n        this.iconsMDL.set('glyphicon-home', 'home');\n        this.iconsMDL.set('glyphicon-file', 'insert_drive_file');\n        this.iconsMDL.set('glyphicon-time', 'access_time');\n        this.iconsMDL.set('glyphicon-road', 'map');\n        this.iconsMDL.set('glyphicon-download-alt', 'file_download');\n        this.iconsMDL.set('glyphicon-download', 'file_download');\n        this.iconsMDL.set('glyphicon-upload', 'file_upload');\n        this.iconsMDL.set('glyphicon-inbox', 'inbox');\n        this.iconsMDL.set('glyphicon-play-circle', 'play_circle_outline');\n        this.iconsMDL.set('glyphicon-repeat', 'refresh');\n        this.iconsMDL.set('glyphicon-refresh', 'sync');\n        this.iconsMDL.set('glyphicon-list-alt', 'event_note');\n        this.iconsMDL.set('glyphicon-lock', 'lock_outline');\n        this.iconsMDL.set('glyphicon-flag', 'assistant_photo');\n        this.iconsMDL.set('glyphicon-headphones', 'headset');\n        this.iconsMDL.set('glyphicon-volume-up', 'volume_up');\n        this.iconsMDL.set('glyphicon-tag', 'local_offer');\n        this.iconsMDL.set('glyphicon-tags', 'local_offer');\n        this.iconsMDL.set('glyphicon-book', 'library_books');\n        this.iconsMDL.set('glyphicon-bookmark', 'collections_bookmark');\n        this.iconsMDL.set('glyphicon-print', 'local_printshop');\n        this.iconsMDL.set('glyphicon-camera', 'local_see');\n        this.iconsMDL.set('glyphicon-list', 'view_list');\n        this.iconsMDL.set('glyphicon-facetime-video', 'video_call');\n        this.iconsMDL.set('glyphicon-picture', 'photo');\n        this.iconsMDL.set('glyphicon-map-marker', 'add_location');\n        this.iconsMDL.set('glyphicon-adjust', 'brightness_4');\n        this.iconsMDL.set('glyphicon-tint', 'invert_colors');\n        this.iconsMDL.set('glyphicon-edit', 'edit');\n        this.iconsMDL.set('glyphicon-share', 'share');\n        this.iconsMDL.set('glyphicon-check', 'assignment_turned_in');\n        this.iconsMDL.set('glyphicon-move', 'open_with');\n        this.iconsMDL.set('glyphicon-play', 'play_arrow');\n        this.iconsMDL.set('glyphicon-eject', 'eject');\n        this.iconsMDL.set('glyphicon-plus-sign', 'add_circle');\n        this.iconsMDL.set('glyphicon-minus-sign', 'remove_circle');\n        this.iconsMDL.set('glyphicon-remove-sign', 'cancel');\n        this.iconsMDL.set('glyphicon-ok-sign', 'check_circle');\n        this.iconsMDL.set('glyphicon-question-sign', 'help');\n        this.iconsMDL.set('glyphicon-info-sign', 'info');\n        this.iconsMDL.set('glyphicon-screenshot', 'flare');\n        this.iconsMDL.set('glyphicon-remove-circle', 'cancel');\n        this.iconsMDL.set('glyphicon-ok-circle', 'add_circle');\n        this.iconsMDL.set('glyphicon-ban-circle', 'block');\n        this.iconsMDL.set('glyphicon-share-alt', 'redo');\n        this.iconsMDL.set('glyphicon-exclamation-sign', 'error');\n        this.iconsMDL.set('glyphicon-gift', 'giftcard');\n        this.iconsMDL.set('glyphicon-leaf', 'spa');\n        this.iconsMDL.set('glyphicon-fire', 'whatshot');\n        this.iconsMDL.set('glyphicon-eye-open', 'remove_red_eye');\n        this.iconsMDL.set('glyphicon-eye-close', 'remove_red_eye');\n        this.iconsMDL.set('glyphicon-warning-sign', 'warning');\n        this.iconsMDL.set('glyphicon-plane', 'airplanemode_active');\n        this.iconsMDL.set('glyphicon-calendar', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-random', 'shuffle');\n        this.iconsMDL.set('glyphicon-comment', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-magnet', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-retweet', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-shopping-cart', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-folder-close', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-folder-open', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-hdd', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-bullhorn', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-bell', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-certificate', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-thumbs-up', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-thumbs-down', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-hand-left', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-globe', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-wrench', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-tasks', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-filter', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-briefcase', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-dashboard', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-paperclip', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-link', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-phone', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-pushpin', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-usd', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-gbp', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-sort', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-flash', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-record', 'radio_button_checked');\n        this.iconsMDL.set('glyphicon-save', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-open', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-saved', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-send', 'send');\n        this.iconsMDL.set('glyphicon-floppy-disk', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-credit-card', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-cutlery', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-earphone', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-phone-alt', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-tower', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-stats', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-cloud-download', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-cloud-upload', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-tree-conifer', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-tree-deciduous', IconModel.DEFAULT_TASKS_APP_MATERIAL_ICON);\n        this.iconsMDL.set('glyphicon-align-left', 'format_align_left');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppsProcessService } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { ProcessInstanceFilterRepresentation, UserProcessInstanceFilterRepresentation } from '@alfresco/js-api';\nimport { Observable } from 'rxjs';\nimport { FilterProcessRepresentationModel } from '../models/filter-process.model';\nimport { ProcessFilterService } from './../services/process-filter.service';\nimport { IconModel } from '../../app-list/icon.model';\n\n@Component({\n    selector: 'adf-process-instance-filters',\n    templateUrl: './process-filters.component.html',\n    styleUrls: ['process-filters.component.scss']\n})\nexport class ProcessFiltersComponent implements OnInit, OnChanges {\n\n    /** The parameters to filter the task filter. If there is no match then the default one\n     * (ie, the first filter in the list) is selected.\n     */\n    @Input()\n    filterParam: FilterProcessRepresentationModel;\n\n    /** Emitted when the user selects a filter from the list. */\n    @Output()\n    filterClick: EventEmitter<UserProcessInstanceFilterRepresentation> = new EventEmitter<UserProcessInstanceFilterRepresentation>();\n\n    /** Emitted when the list of filters has been successfully loaded from the server. */\n    @Output()\n    success: EventEmitter<ProcessInstanceFilterRepresentation[]> = new EventEmitter<ProcessInstanceFilterRepresentation[]>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Display filters available to the current user for the application with the specified ID. */\n    @Input()\n    appId: number;\n\n    /** Display filters available to the current user for the application with the specified name. */\n    @Input()\n    appName: string;\n\n    /** Toggle to show or hide the filter's icon. */\n    @Input()\n    showIcon: boolean = true;\n\n    /** Emitted when a process filter is selected. */\n    @Output()\n    filterSelected: EventEmitter<ProcessInstanceFilterRepresentation> = new EventEmitter<ProcessInstanceFilterRepresentation>();\n\n    filter$: Observable<ProcessInstanceFilterRepresentation>;\n\n    currentFilter: ProcessInstanceFilterRepresentation;\n\n    filters: UserProcessInstanceFilterRepresentation [] = [];\n\n    private iconsMDL: IconModel;\n\n    constructor(private processFilterService: ProcessFilterService,\n                private appsProcessService: AppsProcessService) {\n    }\n\n    ngOnInit() {\n        this.iconsMDL = new IconModel();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const appId = changes['appId'];\n        const appName = changes['appName'];\n        const filter = changes['filterParam'];\n\n        if (appId && (appId.currentValue || appId.currentValue === null)) {\n            this.getFiltersByAppId(appId.currentValue);\n        } else if (appName && appName.currentValue) {\n            this.getFiltersByAppName(appName.currentValue);\n        } else if (filter && filter.currentValue !== filter.previousValue) {\n            this.selectProcessFilter(filter.currentValue);\n        }\n    }\n\n    /**\n     * Return the filter list filtered by appId\n     * @param appId - optional\n     */\n    getFiltersByAppId(appId?: number) {\n        this.processFilterService.getProcessFilters(appId).subscribe(\n            (res: ProcessInstanceFilterRepresentation[]) => {\n                if (res.length === 0 && this.isFilterListEmpty()) {\n                    this.processFilterService.createDefaultFilters(appId).subscribe(\n                        (resDefault: ProcessInstanceFilterRepresentation[]) => {\n                            this.resetFilter();\n                            this.filters = resDefault;\n                            this.selectProcessFilter(this.filterParam);\n                            this.success.emit(resDefault);\n                        },\n                        (errDefault: any) => {\n                            this.error.emit(errDefault);\n                        }\n                    );\n                } else {\n                    this.resetFilter();\n                    this.filters = res;\n                    this.selectProcessFilter(this.filterParam);\n                    this.success.emit(res);\n                }\n            },\n            (err: any) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    /**\n     * Return the filter list filtered by appName\n     * @param appName\n     */\n    getFiltersByAppName(appName: string) {\n        this.appsProcessService.getDeployedApplicationsByName(appName).subscribe(\n            (application) => {\n                this.getFiltersByAppId(application.id);\n                this.selectProcessFilter(this.filterParam);\n            },\n            (err) => {\n                this.error.emit(err);\n            });\n    }\n\n    /**\n     * Pass the selected filter as next\n     * @param filter\n     */\n    public selectFilter(filter: ProcessInstanceFilterRepresentation) {\n        this.currentFilter = filter;\n        this.filterClick.emit(filter);\n    }\n\n    /**\n     * Select the first filter of a list if present\n     */\n    public selectProcessFilter(filterParam: FilterProcessRepresentationModel) {\n        if (filterParam) {\n            this.filters.filter((processFilter: UserProcessInstanceFilterRepresentation, index) => {\n                if (filterParam.name && filterParam.name.toLowerCase() === processFilter.name.toLowerCase() ||\n                    filterParam.id === processFilter.id ||\n                    filterParam.index === index) {\n                    this.currentFilter = processFilter;\n                    this.filterSelected.emit(processFilter);\n                }\n            });\n        }\n        if (this.isCurrentFilterEmpty()) {\n            this.selectDefaultTaskFilter();\n        }\n    }\n\n    /**\n     * Select the Running filter\n     */\n    public selectRunningFilter() {\n        this.selectProcessFilter(this.processFilterService.getRunningFilterInstance(null));\n    }\n\n    /**\n     * Select as default task filter the first in the list\n     */\n    public selectDefaultTaskFilter() {\n        if (!this.isFilterListEmpty()) {\n            this.currentFilter = this.filters[0];\n            this.filterSelected.emit(this.filters[0]);\n        }\n    }\n\n    /**\n     * Return the current task\n     */\n    getCurrentFilter(): ProcessInstanceFilterRepresentation {\n        return this.currentFilter;\n    }\n\n    /**\n     * Check if the filter list is empty\n     */\n    isFilterListEmpty(): boolean {\n        return this.filters === undefined || (this.filters && this.filters.length === 0);\n    }\n\n    /**\n     * Reset the filters properties\n     */\n    private resetFilter() {\n        this.filters = [];\n        this.currentFilter = undefined;\n    }\n\n    private isCurrentFilterEmpty(): boolean {\n        return this.currentFilter === undefined || null;\n    }\n\n    /**\n     * Return current filter icon\n     */\n    getFilterIcon(icon): string {\n        return this.iconsMDL.mapGlyphiconToMaterialDesignIcons(icon);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class ProcessDefinitionRepresentation {\n    id: string;\n    name: string;\n    description: string;\n    key: string;\n    category: string;\n    version: number;\n    deploymentId: string;\n    tenantId: string;\n    metaDataValues: any[];\n    hasStartForm: boolean;\n\n    constructor(obj?: any) {\n        this.id = obj && obj.id || null;\n        this.name = obj && obj.name || null;\n        this.description = obj && obj.description || null;\n        this.key = obj && obj.key || null;\n        this.category = obj && obj.category || null;\n        this.version = obj && obj.version || 0;\n        this.deploymentId = obj && obj.deploymentId || null;\n        this.tenantId = obj && obj.tenantId || null;\n        this.metaDataValues = obj && obj.metaDataValues || [];\n        this.hasStartForm = obj && obj.hasStartForm === true ? true : false;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RestVariable } from '@alfresco/js-api';\n\nexport class ProcessInstanceVariable implements RestVariable {\n\n    name?: string;\n    scope?: string;\n    type?: string;\n    value?: string;\n    valueUrl?: string;\n\n    constructor(obj?: any) {\n        this.name = obj && obj.name !== undefined ? obj.name : null;\n        this.scope = obj && obj.scope !== undefined ? obj.scope : null;\n        this.value = obj && obj.value !== undefined ? obj.value : null;\n        this.valueUrl = obj && obj.valueUrl !== undefined ? obj.valueUrl : null;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LightUserRepresentation, ProcessInstanceRepresentation, RestVariable } from '@alfresco/js-api';\n\nexport class ProcessInstance implements ProcessInstanceRepresentation {\n\n    businessKey?: string;\n    ended?: Date;\n    graphicalNotationDefined?: boolean;\n    id?: string;\n    name?: string;\n    processDefinitionCategory?: string;\n    processDefinitionDeploymentId?: string;\n    processDefinitionDescription?: string;\n    processDefinitionId?: string;\n    processDefinitionKey?: string;\n    processDefinitionName?: string;\n    processDefinitionVersion?: number;\n    startFormDefined?: boolean;\n    started?: Date;\n    startedBy?: LightUserRepresentation;\n    tenantId?: string;\n    variables?: RestVariable[];\n\n    constructor(data?: any) {\n        this.businessKey = data && data.businessKey !== undefined ? data.businessKey : null;\n        this.ended = data && data.ended !== undefined ? data.ended : null;\n        this.graphicalNotationDefined = data && data.graphicalNotationDefined !== undefined ? data.graphicalNotationDefined : null;\n        this.id = data && data.id !== undefined ? data.id : null;\n        this.name = data && data.name !== undefined ? data.name : null;\n        this.processDefinitionCategory = data && data.processDefinitionCategory !== undefined ? data.processDefinitionCategory : null;\n        this.processDefinitionDeploymentId = data && data.processDefinitionDeploymentId !== undefined ? data.processDefinitionDeploymentId : null;\n        this.processDefinitionDescription = data && data.processDefinitionDescription !== undefined ? data.processDefinitionDescription : null;\n        this.processDefinitionId = data && data.processDefinitionId !== undefined ? data.processDefinitionId : null;\n        this.processDefinitionKey = data && data.processDefinitionKey !== undefined ? data.processDefinitionKey : null;\n        this.processDefinitionName = data && data.processDefinitionName !== undefined ? data.processDefinitionName : null;\n        this.processDefinitionVersion = data && data.processDefinitionVersion !== undefined ? data.processDefinitionVersion : null;\n        this.startFormDefined = data && data.startFormDefined !== undefined ? data.startFormDefined : null;\n        this.started = data && data.started !== undefined ? data.started : null;\n        this.startedBy = data && data.startedBy !== undefined ? data.startedBy : null;\n        this.tenantId = data && data.tenantId !== undefined ? data.tenantId : null;\n        this.variables = data && data.variables !== undefined ? data.variables : null;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ProcessInstance } from './process-instance.model';\n\nexport class ProcessListModel {\n    size: number;\n    total: number;\n    start: number;\n    length: number;\n    data: ProcessInstance [];\n\n    constructor(obj?: any) {\n        if (obj) {\n            this.size = obj.size || null;\n            this.total = obj.total || null;\n            this.start = obj.start || null;\n            this.length = obj.length || null;\n            this.data = obj.data || [];\n        }\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService, FormValues } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { RestVariable } from '@alfresco/js-api';\nimport { Observable, from, throwError, of } from 'rxjs';\nimport { TaskDetailsModel } from '../../task-list';\nimport { ProcessFilterParamRepresentationModel } from '../models/filter-process.model';\nimport { ProcessDefinitionRepresentation } from '../models/process-definition.model';\nimport { ProcessInstanceVariable } from '../models/process-instance-variable.model';\nimport { ProcessInstance } from '../models/process-instance.model';\nimport { ProcessListModel } from '../models/process-list.model';\nimport { map, catchError } from 'rxjs/operators';\n\ndeclare let moment: any;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProcessService {\n\n    constructor(private alfrescoApiService: AlfrescoApiService) {\n    }\n\n    /**\n     * Gets process instances for a filter and optionally a process definition.\n     * @param requestNode Filter for instances\n     * @param processDefinitionKey Limits returned instances to a process definition\n     * @returns List of process instances\n     */\n    getProcessInstances(requestNode: ProcessFilterParamRepresentationModel, processDefinitionKey?: string): Observable<ProcessListModel> {\n        return from(this.alfrescoApiService.getInstance().activiti.processApi.getProcessInstances(requestNode))\n            .pipe(\n                map((res: any) => {\n                    if (processDefinitionKey) {\n                        const filtered = res.data.filter((process) => process.processDefinitionKey === processDefinitionKey);\n                        res.data = filtered;\n                        return res;\n                    } else {\n                        return res;\n                    }\n                }),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Gets processes for a filter and optionally a process definition.\n     * @param requestNode Filter for instances\n     * @param processDefinitionKey Limits returned instances to a process definition\n     * @returns List of processes\n     */\n    getProcesses(requestNode: ProcessFilterParamRepresentationModel, processDefinitionKey?: string): Observable<ProcessListModel> {\n        return this.getProcessInstances(requestNode, processDefinitionKey)\n            .pipe(catchError(() => {\n                return of(new ProcessListModel({}));\n            }));\n    }\n\n    /**\n     * Fetches the Process Audit information as a PDF.\n     * @param processId ID of the target process\n     * @returns Binary PDF data\n     */\n    fetchProcessAuditPdfById(processId: string): Observable<Blob> {\n        return from(this.alfrescoApiService.getInstance().activiti.processApi.getProcessAuditPdf(processId))\n            .pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Fetches the Process Audit information in a JSON format.\n     * @param processId ID of the target process\n     * @returns JSON data\n     */\n    fetchProcessAuditJsonById(processId: string): Observable<any> {\n        return from(this.alfrescoApiService.getInstance().activiti.processApi.getProcessAuditJson(processId))\n            .pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Gets Process Instance metadata.\n     * @param processInstanceId ID of the target process\n     * @returns Metadata for the instance\n     */\n    getProcess(processInstanceId: string): Observable<ProcessInstance> {\n        return from(this.alfrescoApiService.getInstance().activiti.processApi.getProcessInstance(processInstanceId))\n            .pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Gets task instances for a process instance.\n     * @param processInstanceId ID of the process instance\n     * @param state Task state filter (can be \"active\" or \"completed\")\n     * @returns Array of task instance details\n     */\n    getProcessTasks(processInstanceId: string, state?: string): Observable<TaskDetailsModel[]> {\n        const taskOpts = state ? {\n            processInstanceId: processInstanceId,\n            state: state\n        } : {\n                processInstanceId: processInstanceId\n            };\n        return from(this.alfrescoApiService.getInstance().activiti.taskApi.listTasks(taskOpts))\n            .pipe(\n                map(this.extractData),\n                map((tasks) => tasks.map((task: any) => {\n                    task.created = moment(task.created, 'YYYY-MM-DD').format();\n                    return task;\n                })),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Gets process definitions associated with an app.\n     * @param appId ID of a target app\n     * @returns Array of process definitions\n     */\n    getProcessDefinitions(appId?: number): Observable<ProcessDefinitionRepresentation[]> {\n        const opts = appId ? {\n            latest: true,\n            appDefinitionId: appId\n        } : {\n                latest: true\n            };\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processApi.getProcessDefinitions(opts)\n        )\n            .pipe(\n                map(this.extractData),\n                map((processDefs) => processDefs.map((pd) => new ProcessDefinitionRepresentation(pd))),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Starts a process based on a process definition, name, form values or variables.\n     * @param processDefinitionId Process definition ID\n     * @param name Process name\n     * @param outcome Process outcome\n     * @param startFormValues Values for the start form\n     * @param variables Array of process instance variables\n     * @returns Details of the process instance just started\n     */\n    startProcess(processDefinitionId: string, name: string, outcome?: string, startFormValues?: FormValues, variables?: ProcessInstanceVariable[]): Observable<ProcessInstance> {\n        const startRequest: any = {\n            name: name,\n            processDefinitionId: processDefinitionId\n        };\n        if (outcome) {\n            startRequest.outcome = outcome;\n        }\n        if (startFormValues) {\n            startRequest.values = startFormValues;\n        }\n        if (variables) {\n            startRequest.variables = variables;\n        }\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processApi.startNewProcessInstance(startRequest)\n        )\n            .pipe(\n                map((pd) => new ProcessInstance(pd)),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Cancels a process instance.\n     * @param processInstanceId ID of process to cancel\n     * @returns Null response notifying when the operation is complete\n     */\n    cancelProcess(processInstanceId: string): Observable<void> {\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processApi.deleteProcessInstance(processInstanceId)\n        )\n            .pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Gets the variables for a process instance.\n     * @param processInstanceId ID of the target process\n     * @returns Array of instance variable info\n     */\n    getProcessInstanceVariables(processInstanceId: string): Observable<ProcessInstanceVariable[]> {\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processInstanceVariablesApi.getProcessInstanceVariables(processInstanceId)\n        )\n            .pipe(\n                map((processVars: any[]) => processVars.map((currentProcessVar) => new ProcessInstanceVariable(currentProcessVar))),\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Creates or updates variables for a process instance.\n     * @param processInstanceId ID of the target process\n     * @param variables Variables to update\n     * @returns Array of instance variable info\n     */\n    createOrUpdateProcessInstanceVariables(processInstanceId: string, variables: RestVariable[]): Observable<ProcessInstanceVariable[]> {\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processInstanceVariablesApi.createOrUpdateProcessInstanceVariables(processInstanceId, variables)\n        ).pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    /**\n     * Deletes a variable for a process instance.\n     * @param processInstanceId ID of the target process\n     * @param variableName Name of the variable to delete\n     * @returns Null response notifying when the operation is complete\n     */\n    deleteProcessInstanceVariable(processInstanceId: string, variableName: string): Observable<void> {\n        return from(\n            this.alfrescoApiService.getInstance().activiti.processInstanceVariablesApi.deleteProcessInstanceVariable(processInstanceId, variableName)\n        )\n            .pipe(\n                catchError((err) => this.handleProcessError(err))\n            );\n    }\n\n    private extractData(res: any) {\n        return res.data || {};\n    }\n\n    private handleProcessError(error: any) {\n        return throwError(error || 'Server error');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogService } from '@alfresco/adf-core';\nimport { DatePipe } from '@angular/common';\nimport { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { TaskDetailsEvent } from '../../task-list';\n\nimport { ProcessInstance } from '../models/process-instance.model';\nimport { ProcessService } from './../services/process.service';\nimport { ProcessInstanceHeaderComponent } from './process-instance-header.component';\nimport { ProcessInstanceTasksComponent } from './process-instance-tasks.component';\n\n@Component({\n    selector: 'adf-process-instance-details',\n    templateUrl: './process-instance-details.component.html',\n    styleUrls: ['./process-instance-details.component.css']\n})\nexport class ProcessInstanceDetailsComponent implements OnChanges {\n\n    /** (required) The numeric ID of the process instance to display. */\n    @Input()\n    processInstanceId: string;\n\n    @ViewChild('processInstanceHeader')\n    processInstanceHeader: ProcessInstanceHeaderComponent;\n\n    @ViewChild('processInstanceTasks')\n    tasksList: ProcessInstanceTasksComponent;\n\n    /** Toggles whether to show or hide the title. */\n    @Input()\n    showTitle: boolean = true;\n\n    /** Toggles whether to show or hide the refresh button. */\n    @Input()\n    showRefreshButton: boolean = true;\n\n    /** Emitted when the current process is cancelled by the user from within the component. */\n    @Output()\n    processCancelled: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when a task is clicked. */\n    @Output()\n    taskClick: EventEmitter<TaskDetailsEvent> = new EventEmitter<TaskDetailsEvent>();\n\n    processInstanceDetails: ProcessInstance;\n\n    /** Emitted when the \"show diagram\" button is clicked. */\n    @Output()\n    showProcessDiagram: EventEmitter<any> = new EventEmitter<any>();\n\n    /**\n     * Constructor\n     * @param translate Translation service\n     * @param activitiProcess   Process service\n     */\n    constructor(private activitiProcess: ProcessService,\n                private logService: LogService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const processInstanceId = changes['processInstanceId'];\n        if (processInstanceId && !processInstanceId.currentValue) {\n            this.reset();\n            return;\n        }\n        if (processInstanceId && processInstanceId.currentValue) {\n            this.load(processInstanceId.currentValue);\n            return;\n        }\n    }\n\n    /**\n     * Reset the task detail\n     */\n    reset() {\n        this.processInstanceDetails = null;\n    }\n\n    load(processId: string) {\n        if (processId) {\n            this.activitiProcess.getProcess(processId).subscribe(\n                (res: ProcessInstance) => {\n                    this.processInstanceDetails = res;\n                }\n            );\n        }\n    }\n\n    isRunning(): boolean {\n        return this.processInstanceDetails && !this.processInstanceDetails.ended;\n    }\n\n    cancelProcess() {\n        this.activitiProcess.cancelProcess(this.processInstanceId).subscribe(\n            (data) => {\n                this.processCancelled.emit(data);\n            }, (err) => {\n                this.error.emit(err);\n            });\n    }\n\n    // bubbles (taskClick) event\n    onTaskClicked(event: TaskDetailsEvent) {\n        this.taskClick.emit(event);\n    }\n\n    getProcessNameOrDescription(dateFormat): string {\n        let name = '';\n        if (this.processInstanceDetails) {\n            name = this.processInstanceDetails.name ||\n                this.processInstanceDetails.processDefinitionName + ' - ' + this.getFormatDate(this.processInstanceDetails.started, dateFormat);\n        }\n        return name;\n    }\n\n    getFormatDate(value, format: string) {\n        const datePipe = new DatePipe('en-US');\n        try {\n            return datePipe.transform(value, format);\n        } catch (err) {\n            this.logService.error(`ProcessListInstanceHeader: error parsing date ${value} to format ${format}`);\n        }\n    }\n\n    onShowProcessDiagram(processInstanceId: any) {\n        this.showProcessDiagram.emit({value: this.processInstanceId});\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable:no-input-rename  */\n\nimport { ContentService } from '@alfresco/adf-core';\nimport { Directive, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { ProcessService } from './../services/process.service';\n\nconst JSON_FORMAT: string = 'json';\nconst PDF_FORMAT: string = 'pdf';\n\n@Directive({\n    selector: 'button[adf-process-audit]',\n    host: {\n        'role': 'button',\n        '(click)': 'onClickAudit()'\n    }\n})\nexport class ProcessAuditDirective implements OnChanges {\n\n    /** ID of the process. */\n    @Input('process-id')\n    processId: string;\n\n    /** Name of the file to download (for PDF downloads). */\n    @Input()\n    fileName: string = 'Audit';\n\n    /** Format for the audit information (can be \"pdf\" or \"json\"). */\n    @Input()\n    format: string = 'pdf';\n\n    /** Enables downloading of the audit file on clicking. */\n    @Input()\n    download: boolean = true;\n\n    /** Emitted when the decorated element is clicked. */\n    @Output()\n    clicked: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    public audit: any;\n\n    /**\n     *\n     * @param translateService\n     * @param processListService\n     */\n    constructor(private contentService: ContentService,\n                private processListService: ProcessService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!this.isValidType()) {\n            this.setDefaultFormatType();\n        }\n    }\n\n    isValidType() {\n        if (this.format && (this.isJsonFormat() || this.isPdfFormat())) {\n            return true;\n        }\n        return false;\n    }\n\n    setDefaultFormatType(): void {\n        this.format = PDF_FORMAT;\n    }\n\n    /**\n     * fetch the audit information in the requested format\n     */\n    fetchAuditInfo(): void {\n        if (this.isPdfFormat()) {\n            this.processListService.fetchProcessAuditPdfById(this.processId).subscribe(\n                (blob: Blob) => {\n                    this.audit = blob;\n                    if (this.download) {\n                        this.contentService.downloadBlob(this.audit, this.fileName + '.pdf');\n                    }\n                    this.clicked.emit({ format: this.format, value: this.audit, fileName: this.fileName });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        } else {\n            this.processListService.fetchProcessAuditJsonById(this.processId).subscribe(\n                (res) => {\n                    this.audit = res;\n                    this.clicked.emit({ format: this.format, value: this.audit, fileName: this.fileName });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        }\n    }\n\n    onClickAudit() {\n        this.fetchAuditInfo();\n    }\n\n    isJsonFormat() {\n        return this.format === JSON_FORMAT;\n    }\n\n    isPdfFormat() {\n        return this.format === PDF_FORMAT;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppConfigService, CardViewDateItemModel, CardViewItem, CardViewBaseItemModel, CardViewTextItemModel, TranslationService } from '@alfresco/adf-core';\nimport { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { ProcessInstance } from '../models/process-instance.model';\n\n@Component({\n    selector: 'adf-process-instance-header',\n    templateUrl: './process-instance-header.component.html',\n    styleUrls: ['./process-instance-header.component.css']\n})\nexport class ProcessInstanceHeaderComponent implements OnChanges {\n\n    /** (**required**) Full details of the process instance to display information about. */\n    @Input()\n    processInstance: ProcessInstance;\n\n    properties: CardViewItem [];\n\n    constructor(private translationService: TranslationService,\n                private appConfig: AppConfigService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.refreshData();\n    }\n\n    refreshData(): void {\n        if (this.processInstance) {\n            const defaultProperties = this.initDefaultProperties();\n            const filteredProperties: string[] = this.appConfig.get('adf-process-instance-header.presets.properties');\n            this.properties = defaultProperties.filter((cardItem) => this.isValidSelection(filteredProperties, cardItem));\n        }\n    }\n\n    private initDefaultProperties(): any[] {\n        return [\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.STATUS',\n                    value: this.getProcessStatus(),\n                    key: 'status'\n                }),\n            new CardViewDateItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.END_DATE',\n                    value: this.processInstance.ended,\n                    format: 'MMM DD YYYY',\n                    key: 'ended',\n                    default: this.translationService.instant('ADF_PROCESS_LIST.PROPERTIES.END_DATE_DEFAULT')\n                }),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.CATEGORY',\n                    value: this.processInstance.processDefinitionCategory,\n                    key: 'category',\n                    default: this.translationService.instant('ADF_PROCESS_LIST.PROPERTIES.CATEGORY_DEFAULT')\n                }),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.BUSINESS_KEY',\n                    value: this.processInstance.businessKey,\n                    key: 'businessKey',\n                    default: this.translationService.instant('ADF_PROCESS_LIST.PROPERTIES.BUSINESS_KEY_DEFAULT')\n                }),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.CREATED_BY',\n                    value: this.getStartedByFullName(),\n                    key: 'assignee',\n                    default: this.translationService.instant('ADF_PROCESS_LIST.PROPERTIES.CREATED_BY_DEFAULT')\n                }),\n            new CardViewDateItemModel(\n                {\n                    label: 'ADF_PROCESS_LIST.PROPERTIES.CREATED',\n                    value: this.processInstance.started,\n                    format: 'MMM DD YYYY',\n                    key: 'created'\n                }),\n            new CardViewTextItemModel(\n                {label: 'ADF_PROCESS_LIST.PROPERTIES.ID',\n                value: this.processInstance.id,\n                key: 'id'\n            }),\n            new CardViewTextItemModel(\n                {label: 'ADF_PROCESS_LIST.PROPERTIES.DESCRIPTION',\n                value: this.processInstance.processDefinitionDescription,\n                key: 'description',\n                default: this.translationService.instant('ADF_PROCESS_LIST.PROPERTIES.DESCRIPTION_DEFAULT')\n            })\n        ];\n    }\n\n    private isValidSelection(filteredProperties: string[], cardItem: CardViewBaseItemModel): boolean {\n        return filteredProperties ? filteredProperties.indexOf(cardItem.key) >= 0 : true;\n    }\n\n    getProcessStatus(): string {\n        if (this.processInstance) {\n            return this.isRunning() ? 'Running' : 'Completed';\n        }\n    }\n\n    getStartedByFullName(): string {\n        let fullName = '';\n        if (this.processInstance && this.processInstance.startedBy) {\n            fullName += this.processInstance.startedBy.firstName || '';\n            fullName += fullName ? ' ' : '';\n            fullName += this.processInstance.startedBy.lastName || '';\n        }\n        return fullName;\n    }\n\n    isRunning(): boolean {\n        return this.processInstance && !this.processInstance.ended;\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TaskFilterRepresentation, UserTaskFilterRepresentation, TaskQueryRepresentation } from '@alfresco/js-api';\n\nexport class AppDefinitionRepresentationModel {\n    defaultAppId: string;\n    deploymentId: string;\n    name: string;\n    description: string;\n    theme: string;\n    icon: string;\n    id: number;\n    modelId: number;\n    tenantId: number;\n\n    constructor(obj?: any) {\n        if (obj) {\n            this.defaultAppId = obj.defaultAppId ? obj.defaultAppId : null;\n            this.deploymentId = obj.deploymentId ? obj.deploymentId : null;\n            this.name = obj.name ? obj.name : null;\n            this.description = obj.description ? obj.description : null;\n            this.theme = obj.theme ? obj.theme : null;\n            this.icon = obj.icon ? obj.icon : null;\n            this.id = obj.id ? obj.id : null;\n            this.modelId = obj.modelId ? obj.modelId : null;\n            this.tenantId = obj.tenantId ? obj.tenantId : null;\n        }\n    }\n}\n\nexport class FilterParamsModel {\n    id: number;\n    name: string;\n    index: number;\n\n    constructor(obj?: any) {\n        if (obj) {\n            this.id = obj.id || null;\n            this.name = obj.name || null;\n            this.index = obj.index;\n        }\n    }\n}\n\nexport class FilterRepresentationModel implements UserTaskFilterRepresentation {\n    id: number;\n    appId: number;\n    name: string;\n    recent: boolean;\n    icon: string;\n    filter: TaskFilterRepresentation;\n    index: number;\n\n    constructor(obj?: any) {\n        if (obj) {\n            this.id = obj.id || null;\n            this.appId = obj.appId || null;\n            this.name = obj.name || null;\n            this.recent = !!obj.recent;\n            this.icon = obj.icon || null;\n            this.filter = new UserTaskFilterRepresentation(obj.filter);\n            this.index = obj.index;\n        }\n    }\n\n    hasFilter() {\n        return this.filter ? true : false;\n    }\n}\n\nexport class TaskQueryRequestRepresentationModel extends TaskQueryRepresentation {\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport let taskPresetsDefaultModel = {\n    'default': [\n        {\n            'key': 'name',\n            'type': 'text',\n            'title': 'ADF_TASK_LIST.PROPERTIES.NAME',\n            'sortable': true\n        },\n        {\n            'key': 'created',\n            'type': 'text',\n            'title': 'ADF_TASK_LIST.PROPERTIES.CREATED',\n            'cssClass': 'hidden',\n            'sortable': true\n        },\n        {\n            'key': 'assignee',\n            'type': 'text',\n            'title': 'ADF_TASK_LIST.PROPERTIES.ASSIGNEE',\n            'cssClass': 'hidden',\n            'sortable': true\n        }\n    ]\n};\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This object represent of the Form.\n */\nexport class Form {\n\n    id: number;\n    name: string;\n\n    constructor(id: number, name: string) {\n        this.name = name;\n        this.id = id;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This object represent the details of a task.\n */\nimport { UserProcessModel } from '@alfresco/adf-core';\nimport { TaskRepresentation } from '@alfresco/js-api';\nimport { UserGroupModel } from './user-group.model';\n\nexport class TaskDetailsModel implements TaskRepresentation {\n    id?: string;\n    name?: string;\n    assignee?: UserProcessModel;\n    priority?: number;\n    adhocTaskCanBeReassigned?: boolean;\n    category?: string;\n    created?: Date;\n    description?: string;\n    parentName?: string;\n    dueDate?: Date;\n    duration?: number;\n    endDate?: Date;\n    executionId?: string;\n    formKey?: string;\n    initiatorCanCompleteTask?: boolean;\n    managerOfCandidateGroup?: boolean;\n    memberOfCandidateGroup?: boolean;\n    memberOfCandidateUsers?: boolean;\n    involvedGroups?: UserGroupModel [];\n    involvedPeople?: UserProcessModel [];\n    parentTaskId?: string;\n    parentTaskName?: string;\n    processDefinitionCategory?: string;\n    processDefinitionDeploymentId?: string;\n    processDefinitionDescription?: string;\n    processDefinitionId?: string;\n    processDefinitionKey?: string;\n    processDefinitionName?: string;\n    processDefinitionVersion?: number = 0;\n    processInstanceId?: string;\n    processInstanceName?: string;\n    processInstanceStartUserId?: string;\n    taskDefinitionKey?: string;\n\n    constructor(obj?: any) {\n        if (obj) {\n            this.id = obj.id || null;\n            this.name = obj.name || null;\n            this.priority = obj.priority;\n            this.assignee = obj.assignee ? new UserProcessModel(obj.assignee) : null;\n            this.adhocTaskCanBeReassigned = obj.adhocTaskCanBeReassigned;\n            this.category = obj.category || null;\n            this.created = obj.created || null;\n            this.description = obj.description || null;\n            this.dueDate = obj.dueDate || null;\n            this.duration = obj.duration || null;\n            this.endDate = obj.endDate || null;\n            this.executionId = obj.executionId || null;\n            this.formKey = obj.formKey || null;\n            this.initiatorCanCompleteTask = !!obj.initiatorCanCompleteTask;\n            this.managerOfCandidateGroup = !!obj.managerOfCandidateGroup;\n            this.memberOfCandidateGroup = !!obj.memberOfCandidateGroup;\n            this.memberOfCandidateUsers = !!obj.memberOfCandidateUsers;\n            this.involvedGroups = obj.involvedGroups;\n            this.involvedPeople = obj.involvedPeople;\n            this.parentTaskId = obj.parentTaskId || null;\n            this.parentTaskName = obj.parentTaskName || null;\n            this.processDefinitionCategory = obj.processDefinitionCategory || null;\n            this.processDefinitionDeploymentId = obj.processDefinitionDeploymentId || null;\n            this.processDefinitionDescription = obj.processDefinitionDescription || null;\n            this.processDefinitionId = obj.processDefinitionId || null;\n            this.processDefinitionKey = obj.processDefinitionKey || null;\n            this.processDefinitionName = obj.processDefinitionName || null;\n            this.processDefinitionVersion = obj.processDefinitionVersion || 0;\n            this.processInstanceId = obj.processInstanceId || null;\n            this.processInstanceName = obj.processInstanceName || null;\n            this.processInstanceStartUserId = obj.processInstanceStartUserId || null;\n            this.taskDefinitionKey = obj.taskDefinitionKey || null;\n        }\n    }\n\n    getFullName(): string {\n        let fullName: string = '';\n\n        if (this.assignee) {\n            const firstName: string = this.assignee.firstName ? this.assignee.firstName : '';\n            const lastName: string = this.assignee.lastName ? this.assignee.lastName : '';\n            fullName = `${firstName} ${lastName}`;\n        }\n\n        return fullName.trim();\n    }\n\n    isCompleted(): boolean {\n        return !!this.endDate;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TaskDetailsModel } from './task-details.model';\n\nexport class TaskListModel  {\n    size?: number;\n    total?: number;\n    start?: number;\n    length?: number;\n    data?: TaskDetailsModel[] = [];\n\n    constructor(input?: any) {\n        if (input) {\n            Object.assign(this, input);\n            if (input.data) {\n                this.data = input.data.map((item: any) => {\n                    return new TaskDetailsModel(item);\n                });\n            }\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService, LogService } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { Observable, from, forkJoin, throwError, of } from 'rxjs';\nimport { map, catchError, switchMap, flatMap, filter } from 'rxjs/operators';\nimport { FilterRepresentationModel, TaskQueryRequestRepresentationModel } from '../models/filter.model';\nimport { Form } from '../models/form.model';\nimport { TaskDetailsModel } from '../models/task-details.model';\nimport { TaskListModel } from '../models/task-list.model';\nimport {\n    TaskQueryRepresentation,\n    AssigneeIdentifierRepresentation\n} from '@alfresco/js-api';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TaskListService {\n\n    constructor(private apiService: AlfrescoApiService,\n                private logService: LogService) {\n    }\n\n    /**\n     * Gets all the filters in the list that belong to a task.\n     * @param taskId ID of the target task\n     * @param filterList List of filters to search through\n     * @returns Filters belonging to the task\n     */\n    getFilterForTaskById(taskId: string, filterList: FilterRepresentationModel[]): Observable<FilterRepresentationModel> {\n        return from(filterList)\n            .pipe(\n                flatMap((data: FilterRepresentationModel) => this.isTaskRelatedToFilter(taskId, data)),\n                filter((data: FilterRepresentationModel) => data != null)\n            );\n    }\n\n    /**\n     * Gets the search query for a task based on the supplied filter.\n     * @param filter The filter to use\n     * @returns The search query\n     */\n    private generateTaskRequestNodeFromFilter(filterModel: FilterRepresentationModel): TaskQueryRequestRepresentationModel {\n        const requestNode = {\n            appDefinitionId: filterModel.appId,\n            assignment: filterModel.filter.assignment,\n            state: filterModel.filter.state,\n            sort: filterModel.filter.sort\n        };\n        return new TaskQueryRequestRepresentationModel(requestNode);\n    }\n\n    /**\n     * Checks if a taskId is filtered with the given filter.\n     * @param taskId ID of the target task\n     * @param filterModel The filter you want to check\n     * @returns The filter if it is related or null otherwise\n     */\n    isTaskRelatedToFilter(taskId: string, filterModel: FilterRepresentationModel): Observable<FilterRepresentationModel> {\n        const requestNodeForFilter = this.generateTaskRequestNodeFromFilter(filterModel);\n        return from(this.callApiTasksFiltered(requestNodeForFilter))\n            .pipe(\n                map((res: any) => {\n                    return res.data.find((element) => element.id === taskId) ? filterModel : null;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets all the tasks matching the supplied query.\n     * @param requestNode Query to search for tasks\n     * @returns List of tasks\n     */\n    getTasks(requestNode: TaskQueryRequestRepresentationModel): Observable<TaskListModel> {\n        return from(this.callApiTasksFiltered(requestNode))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets tasks matching a query and state value.\n     * @param requestNode Query to search for tasks\n     * @param state Task state. Can be \"open\" or \"completed\".\n     * @returns List of tasks\n     */\n    findTasksByState(requestNode: TaskQueryRequestRepresentationModel, state?: string): Observable<TaskListModel> {\n        if (state) {\n            requestNode.state = state;\n        }\n        return this.getTasks(requestNode)\n            .pipe(catchError(() => of(new TaskListModel())));\n    }\n\n    /**\n     * Gets all tasks matching a query and state value.\n     * @param requestNode Query to search for tasks.\n     * @param state Task state. Can be \"open\" or \"completed\".\n     * @returns List of tasks\n     */\n    findAllTaskByState(requestNode: TaskQueryRequestRepresentationModel, state?: string): Observable<TaskListModel> {\n        if (state) {\n            requestNode.state = state;\n        }\n        return this.getTotalTasks(requestNode)\n            .pipe(\n                switchMap((res: any) => {\n                    requestNode.size = res.total;\n                    return this.getTasks(requestNode);\n                })\n            );\n    }\n\n    /**\n     * Gets all tasks matching the supplied query but ignoring the task state.\n     * @param requestNode Query to search for tasks\n     * @returns List of tasks\n     */\n    findAllTasksWithoutState(requestNode: TaskQueryRequestRepresentationModel): Observable<TaskListModel> {\n        return forkJoin(\n            this.findTasksByState(requestNode, 'open'),\n            this.findAllTaskByState(requestNode, 'completed'),\n            (activeTasks: TaskListModel, completedTasks: TaskListModel) => {\n                const tasks = Object.assign({}, activeTasks);\n                tasks.total += completedTasks.total;\n                tasks.data = tasks.data.concat(completedTasks.data);\n                return tasks;\n            }\n        );\n    }\n\n    /**\n     * Gets details for a task.\n     * @param taskId ID of the target task.\n     * @returns Task details\n     */\n    getTaskDetails(taskId: string): Observable<TaskDetailsModel> {\n        return from(this.callApiTaskDetails(taskId))\n            .pipe(\n                map((details: any) => {\n                    return new TaskDetailsModel(details);\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets the checklist for a task.\n     * @param id ID of the target task\n     * @returns Array of checklist task details\n     */\n    getTaskChecklist(id: string): Observable<TaskDetailsModel[]> {\n        return from(this.callApiTaskChecklist(id))\n            .pipe(\n                map((response: any) => {\n                    const checklists: TaskDetailsModel[] = [];\n                    response.data.forEach((checklist) => {\n                        checklists.push(new TaskDetailsModel(checklist));\n                    });\n                    return checklists;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets all available reusable forms.\n     * @returns Array of form details\n     */\n    getFormList(): Observable<Form[]> {\n        const opts = {\n            'filter': 'myReusableForms', // String | filter\n            'sort': 'modifiedDesc', // String | sort\n            'modelType': 2 // Integer | modelType\n        };\n\n        return from(this.apiService.getInstance().activiti.modelsApi.getModels(opts))\n            .pipe(\n                map((response: any) => {\n                    const forms: Form[] = [];\n                    response.data.forEach((form) => {\n                        forms.push(new Form(form.id, form.name));\n                    });\n                    return forms;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Attaches a form to a task.\n     * @param taskId ID of the target task\n     * @param formId ID of the form to add\n     * @returns Null response notifying when the operation is complete\n     */\n    attachFormToATask(taskId: string, formId: number): Observable<any> {\n        return from(this.apiService.taskApi.attachForm(taskId, { 'formId': formId }))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Adds a subtask (ie, a checklist task) to a parent task.\n     * @param task The task to add\n     * @returns The subtask that was added\n     */\n    addTask(task: TaskDetailsModel): Observable<TaskDetailsModel> {\n        return from(this.callApiAddTask(task))\n            .pipe(\n                map((response: TaskDetailsModel) => {\n                    return new TaskDetailsModel(response);\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Deletes a subtask (ie, a checklist task) from a parent task.\n     * @param taskId The task to delete\n     * @returns Null response notifying when the operation is complete\n     */\n    deleteTask(taskId: string): Observable<TaskDetailsModel> {\n        return from(this.callApiDeleteTask(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Deletes a form from a task.\n     * @param taskId Task id related to form\n     * @returns Null response notifying when the operation is complete\n     */\n    deleteForm(taskId: string): Observable<TaskDetailsModel> {\n        return from(this.callApiDeleteForm(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gives completed status to a task.\n     * @param taskId ID of the target task\n     * @returns Null response notifying when the operation is complete\n     */\n    completeTask(taskId: string) {\n        return from(this.apiService.taskApi.completeTask(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets the total number of the tasks found by a query.\n     * @param requestNode Query to search for tasks\n     * @returns Number of tasks\n     */\n    public getTotalTasks(requestNode: TaskQueryRequestRepresentationModel): Observable<any> {\n        requestNode.size = 0;\n        return from(this.callApiTasksFiltered(requestNode))\n            .pipe(\n                map((res: any) => {\n                    return res;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Creates a new standalone task.\n     * @param task Details of the new task\n     * @returns Details of the newly created task\n     */\n    createNewTask(task: TaskDetailsModel): Observable<TaskDetailsModel> {\n        return from(this.callApiCreateTask(task))\n            .pipe(\n                map((response: TaskDetailsModel) => {\n                    return new TaskDetailsModel(response);\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Assigns a task to a user or group.\n     * @param taskId The task to assign\n     * @param requestNode User or group to assign the task to\n     * @returns Details of the assigned task\n     */\n    assignTask(taskId: string, requestNode: any): Observable<TaskDetailsModel> {\n        const assignee = { assignee: requestNode.id };\n        return from(this.callApiAssignTask(taskId, assignee))\n            .pipe(\n                map((response: TaskDetailsModel) => {\n                    return new TaskDetailsModel(response);\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Assigns a task to a user.\n     * @param taskId ID of the task to assign\n     * @param userId ID of the user to assign the task to\n     * @returns Details of the assigned task\n     */\n    assignTaskByUserId(taskId: string, userId: string): Observable<TaskDetailsModel> {\n        const assignee = <AssigneeIdentifierRepresentation> { assignee: userId };\n        return from(this.callApiAssignTask(taskId, assignee))\n            .pipe(\n                map((response: TaskDetailsModel) => {\n                    return new TaskDetailsModel(response);\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Claims a task for the current user.\n     * @param taskId ID of the task to claim\n     * @returns Details of the claimed task\n     */\n    claimTask(taskId: string): Observable<TaskDetailsModel> {\n        return from(this.apiService.taskApi.claimTask(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Un-claims a task for the current user.\n     * @param taskId ID of the task to unclaim\n     * @returns Null response notifying when the operation is complete\n     */\n    unclaimTask(taskId: string): Observable<TaskDetailsModel> {\n        return from(this.apiService.taskApi.unclaimTask(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Updates the details (name, description, due date) for a task.\n     * @param taskId ID of the task to update\n     * @param updated Data to update the task (as a `TaskUpdateRepresentation` instance).\n     * @returns Updated task details\n     */\n    updateTask(taskId: any, updated): Observable<TaskDetailsModel> {\n        return from(this.apiService.taskApi.updateTask(taskId, updated))\n            .pipe(\n                map((result) => <TaskDetailsModel> result),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Fetches the Task Audit information in PDF format.\n     * @param taskId ID of the target task\n     * @returns Binary PDF data\n     */\n    fetchTaskAuditPdfById(taskId: string): Observable<Blob> {\n        return from(this.apiService.taskApi.getTaskAuditPdf(taskId))\n            .pipe(\n                map((data) => <Blob> data),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Fetch the Task Audit information in JSON format\n     * @param taskId ID of the target task\n     * @returns JSON data\n     */\n    fetchTaskAuditJsonById(taskId: string): Observable<any> {\n        return from(this.apiService.taskApi.getTaskAuditJson(taskId))\n            .pipe(\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    private callApiTasksFiltered(requestNode: TaskQueryRepresentation): Promise<TaskListModel> {\n        return this.apiService.taskApi.listTasks(requestNode);\n    }\n\n    private callApiTaskDetails(taskId: string): Promise<TaskDetailsModel> {\n        return this.apiService.taskApi.getTask(taskId);\n    }\n\n    private callApiAddTask(task: TaskDetailsModel): Promise<TaskDetailsModel> {\n        return this.apiService.taskApi.addSubtask(task.parentTaskId, task);\n    }\n\n    private callApiDeleteTask(taskId: string): Promise<any> {\n        return this.apiService.taskApi.deleteTask(taskId);\n    }\n\n    private callApiDeleteForm(taskId: string): Promise<any> {\n        return this.apiService.taskApi.removeForm(taskId);\n    }\n\n    private callApiTaskChecklist(taskId: string): Promise<TaskListModel> {\n        return this.apiService.taskApi.getChecklist(taskId);\n    }\n\n    private callApiCreateTask(task: TaskDetailsModel): Promise<TaskDetailsModel> {\n        return this.apiService.taskApi.createNewTask(task);\n    }\n\n    private callApiAssignTask(taskId: string, requestNode: AssigneeIdentifierRepresentation): Promise<TaskDetailsModel> {\n        return this.apiService.taskApi.assignTask(taskId, requestNode);\n    }\n\n    private handleError(error: any) {\n        this.logService.error(error);\n        return throwError(error || 'Server error');\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataRowEvent, DataTableAdapter, DataTableSchema, CustomEmptyContentTemplateDirective, CustomLoadingContentTemplateDirective } from '@alfresco/adf-core';\nimport {\n    AppConfigService, PaginationComponent, PaginatedComponent,\n    UserPreferencesService, UserPreferenceValues, PaginationModel } from '@alfresco/adf-core';\nimport {\n    AfterContentInit, Component, ContentChild, EventEmitter,\n    Input, OnChanges, Output, SimpleChanges } from '@angular/core';\n\nimport { Observable, BehaviorSubject } from 'rxjs';\nimport { TaskQueryRequestRepresentationModel } from '../models/filter.model';\nimport { TaskListModel } from '../models/task-list.model';\nimport { taskPresetsDefaultModel } from '../models/task-preset.model';\nimport { TaskListService } from './../services/tasklist.service';\nimport moment from 'moment-es6';\n\n@Component({\n    selector: 'adf-tasklist',\n    templateUrl: './task-list.component.html',\n    styleUrls: ['./task-list.component.css']\n})\nexport class TaskListComponent extends DataTableSchema implements OnChanges, AfterContentInit, PaginatedComponent {\n\n    static PRESET_KEY = 'adf-task-list.presets';\n\n    @ContentChild(CustomEmptyContentTemplateDirective)\n    customEmptyContent: CustomEmptyContentTemplateDirective;\n\n    @ContentChild(CustomLoadingContentTemplateDirective)\n    customLoadingContent: CustomLoadingContentTemplateDirective;\n\n    requestNode: TaskQueryRequestRepresentationModel;\n\n    /** The id of the app. */\n    @Input()\n    appId: number;\n\n    /** The Instance Id of the process. */\n    @Input()\n    processInstanceId: string;\n\n    /** The Definition Id of the process. */\n    @Input()\n    processDefinitionId: string;\n\n    /** Current state of the process. Possible values are: `completed`, `active`. */\n    @Input()\n    state: string;\n\n    /** The assignment of the process. Possible values are: \"assignee\" (the current user\n     * is the assignee), \"candidate\" (the current user is a task candidate, \"group_x\" (the task\n     * is assigned to a group where the current user is a member,\n     * no value (the current user is involved).\n     */\n    @Input()\n    assignment: string;\n\n    /** Define the sort order of the tasks. Possible values are : `created-desc`,\n     * `created-asc`, `due-desc`, `due-asc`\n     */\n    @Input()\n    sort: string;\n\n    /** Name of the tasklist. */\n    @Input()\n    name: string;\n\n    /** Define which task id should be selected after reloading. If the task id doesn't\n     * exist or nothing is passed then the first task will be selected.\n     */\n    @Input()\n    landingTaskId: string;\n\n    /**\n     * Data source object that represents the number and the type of the columns that\n     * you want to show.\n     */\n    @Input()\n    data: DataTableAdapter;\n\n    /** Row selection mode. Can be none, `single` or `multiple`. For `multiple` mode,\n     * you can use Cmd (macOS) or Ctrl (Win) modifier key to toggle selection for\n     * multiple rows.\n     */\n    @Input()\n    selectionMode: string = 'single'; // none|single|multiple\n\n    /** Toggles multiple row selection, renders checkboxes at the beginning of each row */\n    @Input()\n    multiselect: boolean = false;\n\n    /** Toggles default selection of the first row */\n    @Input()\n    selectFirstRow: boolean = true;\n\n    /** The id of a task */\n    @Input()\n    taskId: string;\n\n    /** Toggles inclusion of Process Instances */\n    @Input()\n    includeProcessInstance: boolean;\n\n    /** Starting point of the list within the full set of tasks. */\n    @Input()\n    start: number;\n\n    /** Emitted when a task in the list is clicked */\n    @Output()\n    rowClick: EventEmitter<string> = new EventEmitter<string>();\n\n    /** Emitted when rows are selected/unselected */\n    @Output()\n    rowsSelected: EventEmitter<any[]> = new EventEmitter<any[]>();\n\n    /** Emitted when the task list is loaded */\n    @Output()\n    success: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    currentInstanceId: string;\n    selectedInstances: any[];\n    pagination: BehaviorSubject<PaginationModel>;\n\n    /** The page number of the tasks to fetch. */\n    @Input()\n    page: number = 0;\n\n    /** The number of tasks to fetch. Default value: 25. */\n    @Input()\n    size: number = PaginationComponent.DEFAULT_PAGINATION.maxItems;\n\n    /** Filter the tasks. Display only tasks with `created_date` after `dueAfter`. */\n    @Input()\n    dueAfter: string;\n\n    /** Filter the tasks. Display only tasks with `created_date` before `dueBefore`. */\n    @Input()\n    dueBefore: string;\n\n    rows: any[] = [];\n    isLoading: boolean = true;\n    sorting: any[] = ['created', 'desc'];\n\n    /**\n     * Toggles custom data source mode.\n     * When enabled the component reloads data from it's current source instead of the server side.\n     * This allows generating and displaying custom data sets (i.e. filtered out content).\n     *\n     * @memberOf TaskListComponent\n     */\n    hasCustomDataSource: boolean = false;\n\n    constructor(private taskListService: TaskListService,\n                appConfigService: AppConfigService,\n                private userPreferences: UserPreferencesService) {\n        super(appConfigService, TaskListComponent.PRESET_KEY, taskPresetsDefaultModel);\n        this.userPreferences.select(UserPreferenceValues.PaginationSize).subscribe((pageSize) => {\n            this.size = pageSize;\n        });\n\n        this.pagination = new BehaviorSubject<PaginationModel>(<PaginationModel> {\n            maxItems: this.size,\n            skipCount: 0,\n            totalItems: 0\n        });\n    }\n\n    ngAfterContentInit() {\n        this.createDatatableSchema();\n        if (this.data && this.data.getColumns().length === 0) {\n            this.data.setColumns(this.columns);\n        }\n\n        if (this.appId) {\n            this.reload();\n        }\n    }\n\n    setCustomDataSource(rows: any[]): void {\n        if (rows) {\n            this.rows = rows;\n            this.hasCustomDataSource = true;\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.isPropertyChanged(changes)) {\n            if (this.isSortChanged(changes)) {\n                this.sorting = this.sort ? this.sort.split('-') : this.sorting;\n            }\n            this.reload();\n        }\n    }\n\n    private isSortChanged(changes: SimpleChanges): boolean {\n        const actualSort = changes['sort'];\n        return actualSort && actualSort.currentValue && actualSort.currentValue !== actualSort.previousValue;\n    }\n\n    private isPropertyChanged(changes: SimpleChanges): boolean {\n        let changed: boolean = true;\n\n        const landingTaskId = changes['landingTaskId'];\n        const page = changes['page'];\n        const size = changes['size'];\n        if (landingTaskId && landingTaskId.currentValue && this.isEqualToCurrentId(landingTaskId.currentValue)) {\n            changed = false;\n        } else if (page && page.currentValue !== page.previousValue) {\n            changed = true;\n        } else if (size && size.currentValue !== size.previousValue) {\n            changed = true;\n        }\n\n        return changed;\n    }\n\n    reload(): void {\n        if (!this.hasCustomDataSource) {\n            this.requestNode = this.createRequestNode();\n            this.load(this.requestNode);\n        } else {\n            this.isLoading = false;\n        }\n    }\n\n    private load(requestNode: TaskQueryRequestRepresentationModel) {\n        this.isLoading = true;\n        this.loadTasksByState().subscribe(\n            (tasks) => {\n                this.rows = this.optimizeTaskDetails(tasks.data);\n                this.selectTask(this.landingTaskId);\n                this.success.emit(tasks);\n                this.isLoading = false;\n                this.pagination.next({\n                    count: tasks.data.length,\n                    maxItems: this.size,\n                    skipCount: this.page * this.size,\n                    totalItems: tasks.total\n                });\n            }, (error) => {\n                this.error.emit(error);\n                this.isLoading = false;\n            });\n    }\n\n    private loadTasksByState(): Observable<TaskListModel> {\n        return this.requestNode.state === 'all'\n            ? this.taskListService.findAllTasksWithoutState(this.requestNode)\n            : this.taskListService.findTasksByState(this.requestNode);\n    }\n\n    /**\n     * Select the task given in input if present\n     */\n    selectTask(taskIdSelected: string): void {\n        if (!this.isListEmpty()) {\n            let dataRow = null;\n            if (taskIdSelected) {\n                dataRow = this.rows.find((currentRow: any) => {\n                    return currentRow['id'] === taskIdSelected;\n                });\n            }\n            if (!dataRow && this.selectFirstRow) {\n                dataRow = this.rows[0];\n            }\n            if (dataRow) {\n                dataRow.isSelected = true;\n                this.currentInstanceId = dataRow['id'];\n            }\n        } else {\n            this.currentInstanceId = null;\n        }\n    }\n\n    /**\n     * Return the current id\n     */\n    getCurrentId(): string {\n        return this.currentInstanceId;\n    }\n\n    /**\n     * Check if the taskId is the same of the selected task\n     * @param taskId\n     */\n    isEqualToCurrentId(taskId: string): boolean {\n        return this.currentInstanceId === taskId;\n    }\n\n    /**\n     * Check if the list is empty\n     */\n    isListEmpty(): boolean {\n        return !this.rows || this.rows.length === 0;\n    }\n\n    onRowClick(item: DataRowEvent) {\n        this.currentInstanceId = item.value.getValue('id');\n        this.rowClick.emit(this.currentInstanceId);\n    }\n\n    onRowSelect(event: CustomEvent) {\n        this.selectedInstances = [...event.detail.selection];\n        this.rowsSelected.emit(this.selectedInstances);\n    }\n\n    onRowUnselect(event: CustomEvent) {\n        this.selectedInstances = [...event.detail.selection];\n        this.rowsSelected.emit(this.selectedInstances);\n    }\n\n    onRowKeyUp(event: CustomEvent) {\n        if (event.detail.keyboardEvent.key === 'Enter') {\n            event.preventDefault();\n            this.currentInstanceId = event.detail.row.getValue('id');\n            this.rowClick.emit(this.currentInstanceId);\n        }\n    }\n\n    /**\n     * Optimize name field\n     * @param instances\n     */\n    private optimizeTaskDetails(instances: any[]): any[] {\n        instances = instances.map((task) => {\n            if (!task.name) {\n                task.name = 'No name';\n            }\n            return task;\n        });\n        return instances;\n    }\n\n    private createRequestNode() {\n\n        const requestNode = {\n            appDefinitionId: this.appId,\n            dueAfter: this.dueAfter ? moment(this.dueAfter).toDate() : null,\n            dueBefore: this.dueBefore ? moment(this.dueBefore).toDate() : null,\n            processInstanceId: this.processInstanceId,\n            processDefinitionId: this.processDefinitionId,\n            text: this.name,\n            assignment: this.assignment,\n            state: this.state,\n            sort: this.sort,\n            page: this.page,\n            size: this.size,\n            start: this.start,\n            taskId: this.taskId,\n            includeProcessInstance: this.includeProcessInstance\n        };\n        return new TaskQueryRequestRepresentationModel(requestNode);\n    }\n\n    updatePagination(params: PaginationModel) {\n        const needsReload = params.maxItems || params.skipCount;\n        this.size = params.maxItems;\n        this.page = this.currentPage(params.skipCount, params.maxItems);\n        if (needsReload) {\n            this.reload();\n        }\n    }\n\n    currentPage(skipCount: number, maxItems: number): number {\n        return (skipCount && maxItems) ? Math.floor(skipCount / maxItems) : 0;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material';\nimport { TaskDetailsModel } from '../models/task-details.model';\nimport { TaskListService } from './../services/tasklist.service';\n\n@Component({\n    selector: 'adf-checklist',\n    templateUrl: './checklist.component.html',\n    styleUrls: ['./checklist.component.scss']\n})\nexport class ChecklistComponent implements OnChanges {\n\n    /** (required) The id of the parent task to which subtasks are\n     * attached.\n     */\n    @Input()\n    taskId: string;\n\n    /** Toggle readonly state of the form. All form widgets\n     * will render as readonly if enabled.\n     */\n    @Input()\n    readOnly: boolean = false;\n\n    /** (required) The assignee id that the subtasks are assigned to. */\n    @Input()\n    assignee: string;\n\n    /** Emitted when a new checklist task is created. */\n    @Output()\n    checklistTaskCreated: EventEmitter<TaskDetailsModel> = new EventEmitter<TaskDetailsModel>();\n\n    /** Emitted when a checklist task is deleted. */\n    @Output()\n    checklistTaskDeleted: EventEmitter<string> = new EventEmitter<string>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    @ViewChild('dialog')\n    addNewDialog: any;\n\n    taskName: string;\n\n    checklist: TaskDetailsModel [] = [];\n\n    /**\n     * Constructor\n     * @param auth\n     * @param translate\n     */\n    constructor(private activitiTaskList: TaskListService,\n                private dialog: MatDialog) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const taskId = changes['taskId'];\n        if (taskId && taskId.currentValue) {\n            this.getTaskChecklist(taskId.currentValue);\n            return;\n        }\n    }\n\n    public getTaskChecklist(taskId: string) {\n        this.checklist = [];\n        if (this.taskId) {\n            this.activitiTaskList.getTaskChecklist(this.taskId).subscribe(\n                (taskDetailsModel: TaskDetailsModel[]) => {\n                    taskDetailsModel.forEach((task) => {\n                        this.checklist.push(task);\n                    });\n                },\n                (error) => {\n                    this.error.emit(error);\n                }\n            );\n        } else {\n            this.checklist = [];\n        }\n    }\n\n    showDialog() {\n        this.dialog.open(this.addNewDialog, { width: '350px' });\n    }\n\n    public add() {\n        const newTask = new TaskDetailsModel({\n            name: this.taskName,\n            parentTaskId: this.taskId,\n            assignee: { id: this.assignee }\n        });\n        this.activitiTaskList.addTask(newTask).subscribe(\n            (taskDetailsModel: TaskDetailsModel) => {\n                this.checklist.push(taskDetailsModel);\n                this.checklistTaskCreated.emit(taskDetailsModel);\n                this.taskName = '';\n            },\n            (error) => {\n                this.error.emit(error);\n            }\n        );\n        this.cancel();\n    }\n\n    public delete(taskId: string) {\n        this.activitiTaskList.deleteTask(taskId).subscribe(\n            () => {\n                this.checklist = this.checklist.filter((check) => check.id !== taskId);\n                this.checklistTaskDeleted.emit(taskId);\n            },\n            (error) => {\n                this.error.emit(error);\n            });\n    }\n\n    public cancel() {\n        this.dialog.closeAll();\n        this.taskName = '';\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CardViewItemValidator } from '@alfresco/adf-core';\n\nexport class TaskDescriptionValidator implements CardViewItemValidator {\n\n    message: string = 'ADF_CLOUD_TASK_HEADER.FORM_VALIDATION.INVALID_FIELD';\n\n    isValid(value: any): boolean {\n        const isWhitespace = (value || '').trim().length === 0;\n        return value.length === 0 || !isWhitespace;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport {\n    BpmUserService,\n    CardViewDateItemModel,\n    CardViewItem,\n    CardViewMapItemModel,\n    CardViewTextItemModel,\n    CardViewBaseItemModel,\n    LogService,\n    TranslationService,\n    AppConfigService\n} from '@alfresco/adf-core';\nimport { TaskDetailsModel } from '../models/task-details.model';\nimport { TaskListService } from './../services/tasklist.service';\nimport { TaskDescriptionValidator } from '../validators/task-description.validator';\n\n@Component({\n    selector: 'adf-task-header',\n    templateUrl: './task-header.component.html',\n    styleUrls: ['./task-header.component.scss']\n})\nexport class TaskHeaderComponent implements OnChanges, OnInit {\n\n    /** The name of the form. */\n    @Input()\n    formName: string = null;\n\n    /** (required) Details related to the task. */\n    @Input()\n    taskDetails: TaskDetailsModel;\n\n    /** Emitted when the task is claimed. */\n    @Output()\n    claim: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when the task is unclaimed (ie, requeued). */\n    @Output()\n    unclaim: EventEmitter<any> = new EventEmitter<any>();\n\n    private currentUserId: number;\n\n    properties: CardViewItem [];\n    inEdit: boolean = false;\n\n    constructor(private activitiTaskService: TaskListService,\n                private bpmUserService: BpmUserService,\n                private translationService: TranslationService,\n                private logService: LogService,\n                private appConfig: AppConfigService) {\n    }\n\n    ngOnInit() {\n        this.loadCurrentBpmUserId();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        this.refreshData();\n    }\n\n    private initDefaultProperties(parentInfoMap) {\n        return [\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.ASSIGNEE',\n                    value: this.taskDetails.getFullName(),\n                    key: 'assignee',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.ASSIGNEE_DEFAULT'),\n                    clickable: !this.isCompleted(),\n                    icon: 'create'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.STATUS',\n                    value: this.getTaskStatus(),\n                    key: 'status'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.PRIORITY',\n                    value: this.taskDetails.priority,\n                    key: 'priority',\n                    editable: true\n                }\n            ),\n            new CardViewDateItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.DUE_DATE',\n                    value: this.taskDetails.dueDate,\n                    key: 'dueDate',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.DUE_DATE_DEFAULT'),\n                    editable: true\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.CATEGORY',\n                    value: this.taskDetails.category,\n                    key: 'category',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.CATEGORY_DEFAULT')\n                }\n            ),\n            new CardViewMapItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.PARENT_NAME',\n                    value: parentInfoMap,\n                    key: 'parentName',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.PARENT_NAME_DEFAULT'),\n                    clickable: true\n                }\n            ),\n            new CardViewDateItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.CREATED',\n                    value: this.taskDetails.created,\n                    key: 'created'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.DURATION',\n                    value: this.getTaskDuration(),\n                    key: 'duration'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.PARENT_TASK_ID',\n                    value: this.taskDetails.parentTaskId,\n                    key: 'parentTaskId'\n                }\n            ),\n            new CardViewDateItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.END_DATE',\n                    value: this.taskDetails.endDate,\n                    key: 'endDate'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.ID',\n                    value: this.taskDetails.id,\n                    key: 'id'\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.DESCRIPTION',\n                    value: this.taskDetails.description,\n                    key: 'description',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.DESCRIPTION_DEFAULT'),\n                    multiline: true,\n                    editable: true,\n                    validators: [new TaskDescriptionValidator()]\n                }\n            ),\n            new CardViewTextItemModel(\n                {\n                    label: 'ADF_TASK_LIST.PROPERTIES.FORM_NAME',\n                    value: this.formName,\n                    key: 'formName',\n                    default: this.translationService.instant('ADF_TASK_LIST.PROPERTIES.FORM_NAME_DEFAULT'),\n                    clickable: !!this.formName,\n                    icon: 'create'\n                }\n            )\n        ];\n    }\n\n    /**\n     * Refresh the card data\n     */\n    refreshData() {\n        if (this.taskDetails) {\n            const parentInfoMap = this.getParentInfo();\n            const defaultProperties = this.initDefaultProperties(parentInfoMap);\n            const filteredProperties: string[] = this.appConfig.get('adf-task-header.presets.properties');\n            this.properties = defaultProperties.filter((cardItem) => this.isValidSelection(filteredProperties, cardItem));\n        }\n    }\n\n    private isValidSelection(filteredProperties: string[], cardItem: CardViewBaseItemModel): boolean {\n        return filteredProperties ? filteredProperties.indexOf(cardItem.key) >= 0 : true;\n    }\n\n    /**\n     * Loads current bpm userId\n     */\n    private loadCurrentBpmUserId(): void {\n        this.bpmUserService.getCurrentUserInfo().subscribe((res) => {\n            this.currentUserId = res ? +res.id : null;\n        });\n    }\n\n    /**\n     * Return the process parent information\n     */\n    getParentInfo() {\n        if (this.taskDetails.processInstanceId && this.taskDetails.processDefinitionName) {\n            return new Map([[this.taskDetails.processInstanceId, this.taskDetails.processDefinitionName]]);\n        }\n    }\n\n    /**\n     * Does the task have an assignee\n     */\n    public hasAssignee(): boolean {\n        return !!this.taskDetails.assignee ? true : false;\n    }\n\n    /**\n     * Returns true if the task is assigned to logged in user\n     */\n    public isAssignedTo(userId): boolean {\n        return this.hasAssignee() ? this.taskDetails.assignee.id === userId : false;\n    }\n\n    /**\n     * Return true if the task assigned\n     */\n    public isAssignedToCurrentUser(): boolean {\n        return this.hasAssignee() && this.isAssignedTo(this.currentUserId);\n    }\n\n    /**\n     * Return true if the user is a candidate member\n     */\n    isCandidateMember() {\n        return this.taskDetails.managerOfCandidateGroup || this.taskDetails.memberOfCandidateGroup || this.taskDetails.memberOfCandidateUsers;\n    }\n\n    /**\n     * Return true if the task claimable\n     */\n    public isTaskClaimable(): boolean {\n        return !this.hasAssignee() && this.isCandidateMember();\n    }\n\n    /**\n     * Return true if the task claimed by candidate member.\n     */\n    public isTaskClaimedByCandidateMember(): boolean {\n        return this.isCandidateMember() && this.isAssignedToCurrentUser() && !this.isCompleted();\n    }\n\n    /**\n     * Returns task's status\n     */\n    getTaskStatus(): string {\n        return (this.taskDetails && this.taskDetails.isCompleted()) ? 'Completed' : 'Running';\n    }\n\n    /**\n     * Claim task\n     *\n     * @param taskId\n     */\n    claimTask(taskId: string) {\n        this.activitiTaskService.claimTask(taskId).subscribe(\n            (res: any) => {\n                this.logService.info('Task claimed');\n                this.claim.emit(taskId);\n            });\n    }\n\n    /**\n     * Unclaim task\n     *\n     * @param taskId\n     */\n    unclaimTask(taskId: string) {\n        this.activitiTaskService.unclaimTask(taskId).subscribe(\n            (res: any) => {\n                this.logService.info('Task unclaimed');\n                this.unclaim.emit(taskId);\n            });\n    }\n\n    /**\n     * Returns true if the task is completed\n     */\n    isCompleted(): boolean {\n        return this.taskDetails && !!this.taskDetails.endDate;\n    }\n\n    getTaskDuration(): string {\n        return this.taskDetails.duration ? `${this.taskDetails.duration} ms` : '';\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PeopleProcessService, UserProcessModel } from '@alfresco/adf-core';\nimport {\n    AuthenticationService,\n    CardViewUpdateService,\n    ClickNotification,\n    LogService,\n    UpdateNotification,\n    CommentsComponent\n} from '@alfresco/adf-core';\nimport {\n    Component,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnInit,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    ViewChild\n} from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material';\nimport { Observable, Observer } from 'rxjs';\nimport { ContentLinkModel, FormFieldValidator, FormModel, FormOutcomeEvent } from '@alfresco/adf-core';\nimport { TaskQueryRequestRepresentationModel } from '../models/filter.model';\nimport { TaskDetailsModel } from '../models/task-details.model';\nimport { TaskListService } from './../services/tasklist.service';\nimport { UserRepresentation } from '@alfresco/js-api';\nimport { share } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-task-details',\n    templateUrl: './task-details.component.html',\n    styleUrls: ['./task-details.component.scss']\n})\nexport class TaskDetailsComponent implements OnInit, OnChanges {\n\n    @ViewChild('activitiComments')\n    activitiComments: CommentsComponent;\n\n    @ViewChild('activitiChecklist')\n    activitiChecklist: any;\n\n    @ViewChild('errorDialog')\n    errorDialog: TemplateRef<any>;\n\n    /** Toggles debug mode. */\n    @Input()\n    debugMode: boolean = false;\n\n    /** (**required**) The id of the task whose details we are asking for. */\n    @Input()\n    taskId: string;\n\n    /** Automatically renders the next task when the current one is completed. */\n    @Input()\n    showNextTask: boolean = true;\n\n    /** Toggles task details Header component. */\n    @Input()\n    showHeader: boolean = true;\n\n    /** Toggles collapsed/expanded state of the Header component. */\n    @Input()\n    showHeaderContent: boolean = true;\n\n    /** Toggles `Involve People` feature for the Header component. */\n    @Input()\n    showInvolvePeople: boolean = true;\n\n    /** Toggles `Comments` feature for the Header component. */\n    @Input()\n    showComments: boolean = true;\n\n    /** Toggles `Checklist` feature for the Header component. */\n    @Input()\n    showChecklist: boolean = true;\n\n    /** Toggles rendering of the form title. */\n    @Input()\n    showFormTitle: boolean = false;\n\n    /** Toggles rendering of the `Complete` outcome button. */\n    @Input()\n    showFormCompleteButton: boolean = true;\n\n    /** Toggles rendering of the `Save` outcome button. */\n    @Input()\n    showFormSaveButton: boolean = true;\n\n    /** Toggles read-only state of the form. All form widgets render as read-only\n     * if enabled.\n     */\n    @Input()\n    readOnlyForm: boolean = false;\n\n    /** Toggles rendering of the `Refresh` button. */\n    @Input()\n    showFormRefreshButton: boolean = true;\n\n    /** Field validators for use with the form. */\n    @Input()\n    fieldValidators: FormFieldValidator[] = [];\n\n    /** Emitted when the form is submitted with the `Save` or custom outcomes. */\n    @Output()\n    formSaved: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when the form is submitted with the `Complete` outcome. */\n    @Output()\n    formCompleted: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when the form field content is clicked. */\n    @Output()\n    formContentClicked: EventEmitter<ContentLinkModel> = new EventEmitter<ContentLinkModel>();\n\n    /** Emitted when the form is loaded or reloaded. */\n    @Output()\n    formLoaded: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when a checklist task is created. */\n    @Output()\n    taskCreated: EventEmitter<TaskDetailsModel> = new EventEmitter<TaskDetailsModel>();\n\n    /** Emitted when a checklist task is deleted. */\n    @Output()\n    taskDeleted: EventEmitter<string> = new EventEmitter<string>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when any outcome is executed. Default behaviour can be prevented\n     * via `event.preventDefault()`.\n     */\n    @Output()\n    executeOutcome: EventEmitter<FormOutcomeEvent> = new EventEmitter<FormOutcomeEvent>();\n\n    /** Emitted when a task is assigned. */\n    @Output()\n    assignTask: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when a task is claimed. */\n    @Output()\n    claimedTask: EventEmitter<string> = new EventEmitter<string>();\n\n    /** Emitted when a task is unclaimed. */\n    @Output()\n    unClaimedTask: EventEmitter<string> = new EventEmitter<string>();\n\n    taskDetails: TaskDetailsModel;\n    taskFormName: string = null;\n\n    taskPeople: UserProcessModel[] = [];\n\n    noTaskDetailsTemplateComponent: TemplateRef<any>;\n\n    showAssignee: boolean = false;\n    showAttachForm: boolean = false;\n    internalReadOnlyForm: boolean = false;\n\n    private peopleSearchObserver: Observer<UserProcessModel[]>;\n    public errorDialogRef: MatDialogRef<TemplateRef<any>>;\n\n    peopleSearch: Observable<UserProcessModel[]>;\n\n    currentLoggedUser: UserRepresentation;\n    data: any;\n\n    constructor(private taskListService: TaskListService,\n                private authService: AuthenticationService,\n                private peopleProcessService: PeopleProcessService,\n                private logService: LogService,\n                private cardViewUpdateService: CardViewUpdateService,\n                private dialog: MatDialog) {\n\n        this.peopleSearch = new Observable<UserProcessModel[]>((observer) => this.peopleSearchObserver = observer)\n            .pipe(share());\n        this.authService.getBpmLoggedUser().subscribe((user: UserRepresentation) => {\n            this.currentLoggedUser = user;\n        });\n    }\n\n    ngOnInit() {\n        if (this.taskId) {\n            this.loadDetails(this.taskId);\n        }\n\n        this.cardViewUpdateService.itemUpdated$.subscribe(this.updateTaskDetails.bind(this));\n        this.cardViewUpdateService.itemClicked$.subscribe(this.clickTaskDetails.bind(this));\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const taskId = changes.taskId;\n        this.showAssignee = false;\n\n        if (taskId && !taskId.currentValue) {\n            this.reset();\n        } else if (taskId && taskId.currentValue) {\n            this.loadDetails(taskId.currentValue);\n        }\n    }\n\n    isStandaloneTask(): boolean {\n        return !(this.taskDetails && (!!this.taskDetails.processDefinitionId));\n    }\n\n    isStandaloneTaskWithForm(): boolean {\n        return this.isStandaloneTask() && this.hasFormKey();\n    }\n\n    isStandaloneTaskWithoutForm(): boolean {\n        return this.isStandaloneTask() && !this.hasFormKey();\n    }\n\n    isFormComponentVisible(): boolean {\n        return this.hasFormKey() && !this.isShowAttachForm();\n    }\n\n    isTaskStandaloneComponentVisible(): boolean {\n        return this.isStandaloneTaskWithoutForm() && !this.isShowAttachForm();\n    }\n\n    isShowAttachForm(): boolean {\n        return this.showAttachForm;\n    }\n\n    /**\n     * Reset the task details\n     */\n    private reset() {\n        this.taskDetails = null;\n    }\n\n    /**\n     * Check if the task has a form\n     */\n    hasFormKey(): boolean {\n        return (this.taskDetails && (!!this.taskDetails.formKey));\n    }\n\n    isTaskActive() {\n        return this.taskDetails && this.taskDetails.duration === null;\n    }\n\n    /**\n     * Save a task detail and update it after a successful response\n     *\n     * @param updateNotification\n     */\n    private updateTaskDetails(updateNotification: UpdateNotification) {\n        this.taskListService.updateTask(this.taskId, updateNotification.changed)\n            .subscribe(\n                () => {\n                    this.loadDetails(this.taskId);\n                }\n            );\n    }\n\n    private clickTaskDetails(clickNotification: ClickNotification) {\n        if (clickNotification.target.key === 'assignee') {\n            this.showAssignee = true;\n        }\n        if (clickNotification.target.key === 'formName') {\n            this.showAttachForm = true;\n        }\n    }\n\n    /**\n     * Load the activiti task details\n     * @param taskId\n     */\n    private loadDetails(taskId: string) {\n        this.taskPeople = [];\n        this.taskFormName = null;\n\n        if (taskId) {\n            this.taskListService.getTaskDetails(taskId).subscribe(\n                (res: TaskDetailsModel) => {\n                    this.showAttachForm = false;\n                    this.taskDetails = res;\n\n                    if (this.taskDetails.name === 'null') {\n                        this.taskDetails.name = 'No name';\n                    }\n\n                    const endDate: any = res.endDate;\n                    if (endDate && !isNaN(endDate.getTime())) {\n                        this.internalReadOnlyForm = true;\n                    } else {\n                        this.internalReadOnlyForm = this.readOnlyForm;\n                    }\n\n                    if (this.taskDetails && this.taskDetails.involvedPeople) {\n                        this.taskDetails.involvedPeople.forEach((user) => {\n                            this.taskPeople.push(new UserProcessModel(user));\n                        });\n                    }\n                });\n        }\n    }\n\n    isAssigned(): boolean {\n        return !!this.taskDetails.assignee;\n    }\n\n    private hasEmailAddress(): boolean {\n        return this.taskDetails.assignee.email ? true : false;\n    }\n\n    isAssignedToMe(): boolean {\n        return this.isAssigned() && this.hasEmailAddress() ?\n            this.isEmailEqual(this.taskDetails.assignee.email, this.currentLoggedUser.email) :\n            this.isExternalIdEqual(this.taskDetails.assignee.externalId, this.currentLoggedUser.externalId);\n    }\n\n    private isEmailEqual(assigneeMail, currentLoggedEmail): boolean {\n        return assigneeMail.toLocaleLowerCase() === currentLoggedEmail.toLocaleLowerCase();\n    }\n\n    private isExternalIdEqual(assigneeExternalId, currentUserExternalId): boolean {\n        return assigneeExternalId.toLocaleLowerCase() === currentUserExternalId.toLocaleLowerCase();\n    }\n\n    isCompleteButtonEnabled(): boolean {\n        return this.isAssignedToMe() || this.canInitiatorComplete();\n    }\n\n    isCompleteButtonVisible(): boolean {\n        return !this.hasFormKey() && this.isTaskActive() && this.isCompleteButtonEnabled();\n    }\n\n    canInitiatorComplete(): boolean {\n        return this.taskDetails.initiatorCanCompleteTask;\n    }\n\n    isSaveButtonVisible(): boolean {\n        return this.hasSaveButton() && (!this.canInitiatorComplete() || this.isAssignedToMe());\n    }\n\n    hasSaveButton(): boolean {\n        return this.showFormSaveButton;\n    }\n\n    /**\n     * Retrieve the next open task\n     * @param processInstanceId\n     * @param processDefinitionId\n     */\n    private loadNextTask(processInstanceId: string, processDefinitionId: string): void {\n        const requestNode = new TaskQueryRequestRepresentationModel(\n            {\n                processInstanceId: processInstanceId,\n                processDefinitionId: processDefinitionId\n            }\n        );\n        this.taskListService.getTasks(requestNode).subscribe(\n            (response) => {\n                if (response && response.length > 0) {\n                    this.taskDetails = new TaskDetailsModel(response[0]);\n                } else {\n                    this.reset();\n                }\n            }, (error) => {\n                this.error.emit(error);\n            });\n    }\n\n    /**\n     * Complete button clicked\n     */\n    onComplete(): void {\n        this.taskListService.completeTask(this.taskId).subscribe(\n            (res) => this.onFormCompleted(null)\n        );\n    }\n\n    onShowAttachForm() {\n        this.showAttachForm = true;\n    }\n\n    onCancelAttachForm() {\n        this.showAttachForm = false;\n    }\n\n    onCompleteAttachForm() {\n        this.showAttachForm = false;\n        this.loadDetails(this.taskId);\n    }\n\n    onFormContentClick(content: ContentLinkModel): void {\n        this.formContentClicked.emit(content);\n    }\n\n    onFormSaved(form: FormModel): void {\n        this.formSaved.emit(form);\n    }\n\n    onFormCompleted(form: FormModel): void {\n        this.formCompleted.emit(form);\n        if (this.showNextTask && (this.taskDetails.processInstanceId || this.taskDetails.processDefinitionId)) {\n            this.loadNextTask(this.taskDetails.processInstanceId, this.taskDetails.processDefinitionId);\n        }\n    }\n\n    onFormLoaded(form: FormModel): void {\n        this.taskFormName = (form && form.name ? form.name : null);\n        this.formLoaded.emit(form);\n    }\n\n    onChecklistTaskCreated(task: TaskDetailsModel): void {\n        this.taskCreated.emit(task);\n    }\n\n    onChecklistTaskDeleted(taskId: string): void {\n        this.taskDeleted.emit(taskId);\n    }\n\n    onFormError(error: any): void {\n        this.errorDialogRef = this.dialog.open(this.errorDialog, { width: '500px' });\n        this.error.emit(error);\n    }\n\n    onFormExecuteOutcome(event: FormOutcomeEvent): void {\n        this.executeOutcome.emit(event);\n    }\n\n    closeErrorDialog(): void {\n        this.dialog.closeAll();\n    }\n\n    onClaimAction(taskId: string): void {\n        this.claimedTask.emit(taskId);\n        this.loadDetails(taskId);\n    }\n\n    onUnclaimAction(taskId: string): void {\n        this.unClaimedTask.emit(taskId);\n        this.loadDetails(taskId);\n    }\n\n    isCompletedTask(): boolean {\n        return this.taskDetails && this.taskDetails.endDate ? true : undefined;\n    }\n\n    searchUser(searchedWord: string) {\n        this.peopleProcessService.getWorkflowUsers(null, searchedWord)\n            .subscribe((users) => {\n                users = users.filter((user) => user.id !== this.taskDetails.assignee.id);\n                this.peopleSearchObserver.next(users);\n            }, (error) => this.logService.error('Could not load users'));\n    }\n\n    onCloseSearch() {\n        this.showAssignee = false;\n    }\n\n    assignTaskToUser(selectedUser: UserProcessModel) {\n        this.taskListService.assignTask(this.taskDetails.id, selectedUser).subscribe(\n            (res: any) => {\n                this.logService.info('Task Assigned to ' + selectedUser.email);\n                this.assignTask.emit();\n            });\n        this.showAssignee = false;\n    }\n\n    getTaskHeaderViewClass(): string {\n        if (this.showAssignee) {\n            return 'assign-edit-view';\n        } else {\n            return 'default-view';\n        }\n    }\n\n    isReadOnlyComment(): boolean {\n        return (this.taskDetails && this.taskDetails.isCompleted()) && (this.taskPeople && this.taskPeople.length === 0);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    AfterContentInit,\n    ContentChild,\n    Directive,\n    TemplateRef\n} from '@angular/core';\nimport { TaskDetailsComponent } from './task-details.component';\n\n/**\n * Directive selectors without adf- prefix will be deprecated on 3.0.0\n */\n@Directive({\n    selector: 'adf-no-task-details-template, no-task-details-template'\n})\nexport class NoTaskDetailsTemplateDirective implements AfterContentInit {\n\n    @ContentChild(TemplateRef)\n    template: any;\n\n    constructor(\n        private activitiTaskDetails: TaskDetailsComponent) {\n    }\n\n    ngAfterContentInit() {\n        this.activitiTaskDetails.noTaskDetailsTemplateComponent = this.template;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService, LogService } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { Observable, forkJoin, from, throwError } from 'rxjs';\nimport { FilterRepresentationModel } from '../models/filter.model';\nimport { map, catchError } from 'rxjs/operators';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TaskFilterService {\n\n    constructor(private apiService: AlfrescoApiService,\n                private logService: LogService) {\n    }\n\n    /**\n     * Creates and returns the default filters for a process app.\n     * @param appId ID of the target app\n     * @returns Array of default filters just created\n     */\n    public createDefaultFilters(appId: number): Observable<FilterRepresentationModel[]> {\n        const involvedTasksFilter = this.getInvolvedTasksFilterInstance(appId);\n        const involvedObservable = this.addFilter(involvedTasksFilter);\n\n        const myTasksFilter = this.getMyTasksFilterInstance(appId);\n        const myTaskObservable = this.addFilter(myTasksFilter);\n\n        const queuedTasksFilter = this.getQueuedTasksFilterInstance(appId);\n        const queuedObservable = this.addFilter(queuedTasksFilter);\n\n        const completedTasksFilter = this.getCompletedTasksFilterInstance(appId);\n        const completeObservable = this.addFilter(completedTasksFilter);\n\n        return new Observable((observer) => {\n            forkJoin(\n                involvedObservable,\n                myTaskObservable,\n                queuedObservable,\n                completeObservable\n            ).subscribe(\n                (res) => {\n                    const filters: FilterRepresentationModel[] = [];\n                    res.forEach((filter) => {\n                        if (filter.name === involvedTasksFilter.name) {\n                            involvedTasksFilter.id = filter.id;\n                            filters.push(involvedTasksFilter);\n                        } else if (filter.name === myTasksFilter.name) {\n                            myTasksFilter.id = filter.id;\n                            filters.push(myTasksFilter);\n                        } else if (filter.name === queuedTasksFilter.name) {\n                            queuedTasksFilter.id = filter.id;\n                            filters.push(queuedTasksFilter);\n                        } else if (filter.name === completedTasksFilter.name) {\n                            completedTasksFilter.id = filter.id;\n                            filters.push(completedTasksFilter);\n                        }\n                    });\n                    observer.next(filters);\n                    observer.complete();\n                },\n                (err: any) => {\n                    this.logService.error(err);\n                });\n        });\n    }\n\n    /**\n     * Gets all task filters for a process app.\n     * @param appId Optional ID for a specific app\n     * @returns Array of task filter details\n     */\n    getTaskListFilters(appId?: number): Observable<FilterRepresentationModel[]> {\n        return from(this.callApiTaskFilters(appId))\n            .pipe(\n                map((response: any) => {\n                    const filters: FilterRepresentationModel[] = [];\n                    response.data.forEach((filter: FilterRepresentationModel) => {\n                        const filterModel = new FilterRepresentationModel(filter);\n                        filters.push(filterModel);\n                    });\n                    return filters;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Gets a task filter by ID.\n     * @param filterId ID of the filter\n     * @param appId ID of the app for the filter\n     * @returns Details of task filter\n     */\n    getTaskFilterById(filterId: number, appId?: number): Observable<FilterRepresentationModel> {\n        return from(this.callApiTaskFilters(appId)).pipe(\n            map((response) => response.data.find((filter) => filter.id === filterId)),\n            catchError((err) => this.handleError(err))\n        );\n    }\n\n    /**\n     * Gets a task filter by name.\n     * @param taskName Name of the filter\n     * @param appId ID of the app for the filter\n     * @returns Details of task filter\n     */\n    getTaskFilterByName(taskName: string, appId?: number): Observable<FilterRepresentationModel> {\n        return from(this.callApiTaskFilters(appId)).pipe(\n            map((response) => response.data.find((filter) => filter.name === taskName)),\n            catchError((err) => this.handleError(err))\n        );\n    }\n\n    /**\n     * Adds a new task filter\n     * @param filter The new filter to add\n     * @returns Details of task filter just added\n     */\n    addFilter(filter: FilterRepresentationModel): Observable<FilterRepresentationModel> {\n        return from(this.apiService.getInstance().activiti.userFiltersApi.createUserTaskFilter(filter))\n            .pipe(\n                map((response: FilterRepresentationModel) => {\n                    return response;\n                }),\n                catchError((err) => this.handleError(err))\n            );\n    }\n\n    /**\n     * Calls `getUserTaskFilters` from the Alfresco JS API.\n     * @param appId ID of the target app\n     * @returns List of task filters\n     */\n    callApiTaskFilters(appId?: number): Promise<any> {\n        if (appId) {\n            return this.apiService.getInstance().activiti.userFiltersApi.getUserTaskFilters({appId: appId});\n        } else {\n            return this.apiService.getInstance().activiti.userFiltersApi.getUserTaskFilters();\n        }\n    }\n\n    /**\n     * Creates and returns a filter for \"Involved\" task instances.\n     * @param appId ID of the target app\n     * @returns The newly created filter\n     */\n    getInvolvedTasksFilterInstance(appId: number): FilterRepresentationModel {\n        return new FilterRepresentationModel({\n            'name': 'Involved Tasks',\n            'appId': appId,\n            'recent': false,\n            'icon': 'glyphicon-align-left',\n            'filter': {'sort': 'created-desc', 'name': '', 'state': 'open', 'assignment': 'involved'}\n        });\n    }\n\n    /**\n     * Creates and returns a filter for \"My Tasks\" task instances.\n     * @param appId ID of the target app\n     * @returns The newly created filter\n     */\n    getMyTasksFilterInstance(appId: number): FilterRepresentationModel {\n        return new FilterRepresentationModel({\n            'name': 'My Tasks',\n            'appId': appId,\n            'recent': false,\n            'icon': 'glyphicon-inbox',\n            'filter': {'sort': 'created-desc', 'name': '', 'state': 'open', 'assignment': 'assignee'}\n        });\n    }\n\n    /**\n     * Creates and returns a filter for \"Queued Tasks\" task instances.\n     * @param appId ID of the target app\n     * @returns The newly created filter\n     */\n    getQueuedTasksFilterInstance(appId: number): FilterRepresentationModel {\n        return new FilterRepresentationModel({\n            'name': 'Queued Tasks',\n            'appId': appId,\n            'recent': false,\n            'icon': 'glyphicon-record',\n            'filter': {'sort': 'created-desc', 'name': '', 'state': 'open', 'assignment': 'candidate'}\n        });\n    }\n\n    /**\n     * Creates and returns a filter for \"Completed\" task instances.\n     * @param appId ID of the target app\n     * @returns The newly created filter\n     */\n    getCompletedTasksFilterInstance(appId: number): FilterRepresentationModel {\n        return new FilterRepresentationModel({\n            'name': 'Completed Tasks',\n            'appId': appId,\n            'recent': true,\n            'icon': 'glyphicon-ok-sign',\n            'filter': {'sort': 'created-desc', 'name': '', 'state': 'completed', 'assignment': 'involved'}\n        });\n    }\n\n    private handleError(error: any) {\n        this.logService.error(error);\n        return throwError(error || 'Server error');\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppsProcessService } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { FilterParamsModel, FilterRepresentationModel } from '../models/filter.model';\nimport { TaskFilterService } from './../services/task-filter.service';\nimport { TaskListService } from './../services/tasklist.service';\nimport { IconModel } from '../../app-list/icon.model';\n\n@Component({\n    selector: 'adf-task-filters',\n    templateUrl: './task-filters.component.html',\n    styleUrls: ['task-filters.component.scss']\n})\nexport class TaskFiltersComponent implements OnInit, OnChanges {\n\n    /** Parameters to use for the task filter. If there is no match then\n     * the default filter (the first one the list) is selected.\n     */\n    @Input()\n    filterParam: FilterParamsModel;\n\n    /** Emitted when a filter in the list is clicked. */\n    @Output()\n    filterClick: EventEmitter<FilterRepresentationModel> = new EventEmitter<FilterRepresentationModel>();\n\n    /** Emitted when the list is loaded. */\n    @Output()\n    success: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an error occurs during loading. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Display filters available to the current user for the application with the specified ID. */\n    @Input()\n    appId: number;\n\n    /** Display filters available to the current user for the application with the specified name. */\n    @Input()\n    appName: string;\n\n    /** Toggles display of the filter's icon. */\n    @Input()\n    showIcon: boolean;\n\n    filter$: Observable<FilterRepresentationModel>;\n\n    currentFilter: FilterRepresentationModel;\n\n    filters: FilterRepresentationModel [] = [];\n\n    private iconsMDL: IconModel;\n\n    constructor(private taskFilterService: TaskFilterService,\n                private taskListService: TaskListService,\n                private appsProcessService: AppsProcessService) {\n    }\n\n    ngOnInit() {\n        this.iconsMDL = new IconModel();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const appName = changes['appName'];\n        const appId = changes['appId'];\n        const filter = changes['filterParam'];\n        if (appName && appName.currentValue) {\n            this.getFiltersByAppName(appName.currentValue);\n        } else if (appId && appId.currentValue !== appId.previousValue) {\n            this.getFiltersByAppId(appId.currentValue);\n        } else if (filter && filter.currentValue !== filter.previousValue) {\n            this.selectFilter(filter.currentValue);\n        }\n    }\n\n    /**\n     * Return the task list filtered by appId or by appName\n     * @param appId\n     * @param appName\n     */\n    getFilters(appId?: number, appName?: string) {\n        appName ? this.getFiltersByAppName(appName) : this.getFiltersByAppId(appId);\n    }\n\n    /**\n     * Return the filter list filtered by appId\n     * @param appId - optional\n     */\n    getFiltersByAppId(appId?: number) {\n        this.taskFilterService.getTaskListFilters(appId).subscribe(\n            (res: FilterRepresentationModel[]) => {\n                if (res.length === 0 && this.isFilterListEmpty()) {\n                    this.createFiltersByAppId(appId);\n                } else {\n                    this.resetFilter();\n                    this.filters = res;\n                    this.selectFilter(this.filterParam);\n                    this.success.emit(res);\n                }\n            },\n            (err: any) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    /**\n     * Return the filter list filtered by appName\n     * @param appName\n     */\n    getFiltersByAppName(appName: string) {\n        this.appsProcessService.getDeployedApplicationsByName(appName).subscribe(\n            (application) => {\n                this.getFiltersByAppId(application.id);\n            },\n            (err) => {\n                this.error.emit(err);\n            });\n    }\n\n    /**\n     * Create default filters by appId\n     * @param appId\n     */\n    createFiltersByAppId(appId?: number) {\n        this.taskFilterService.createDefaultFilters(appId).subscribe(\n            (resDefault: FilterRepresentationModel[]) => {\n                this.resetFilter();\n                this.filters = resDefault;\n                this.selectFilter(this.filterParam);\n                this.success.emit(resDefault);\n            },\n            (errDefault: any) => {\n                this.error.emit(errDefault);\n            }\n        );\n    }\n\n    /**\n     * Pass the selected filter as next\n     * @param filter\n     */\n    public selectFilter(newFilter: FilterParamsModel) {\n        if (newFilter) {\n            this.currentFilter = this.filters.find( (filter, index) =>\n                newFilter.index === index ||\n                newFilter.id === filter.id ||\n                (newFilter.name &&\n                    (newFilter.name.toLocaleLowerCase() === filter.name.toLocaleLowerCase())\n                ));\n        }\n        if (!this.currentFilter) {\n            this.selectDefaultTaskFilter();\n        }\n    }\n\n    public selectFilterAndEmit(newFilter: FilterParamsModel) {\n        this.selectFilter(newFilter);\n        this.filterClick.emit(this.currentFilter);\n    }\n\n    /**\n     * Select filter with task\n     * @param taskId\n     */\n    public selectFilterWithTask(taskId: string) {\n        const filteredFilterList: FilterRepresentationModel[] = [];\n        this.taskListService.getFilterForTaskById(taskId, this.filters).subscribe(\n            (filter: FilterRepresentationModel) => {\n                filteredFilterList.push(filter);\n            },\n            (err) => {\n                this.error.emit(err);\n            },\n            () => {\n                if (filteredFilterList.length > 0) {\n                    this.selectFilter(filteredFilterList[0]);\n                    this.filterClick.emit(this.currentFilter);\n                }\n            });\n    }\n\n    /**\n     * Select as default task filter the first in the list\n     * @param filteredFilterList\n     */\n    public selectDefaultTaskFilter() {\n        if (!this.isFilterListEmpty()) {\n            this.currentFilter = this.filters[0];\n        }\n    }\n\n    /**\n     * Return the current task\n     */\n    getCurrentFilter(): FilterRepresentationModel {\n        return this.currentFilter;\n    }\n\n    /**\n     * Check if the filter list is empty\n     */\n    isFilterListEmpty(): boolean {\n        return this.filters === undefined || (this.filters && this.filters.length === 0);\n    }\n\n    /**\n     * Reset the filters properties\n     */\n    private resetFilter() {\n        this.filters = [];\n        this.currentFilter = undefined;\n    }\n\n    /**\n     * Return current filter icon\n     */\n    getFilterIcon(icon): string {\n        return this.iconsMDL.mapGlyphiconToMaterialDesignIcons(icon);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable:no-input-rename  */\n\nimport { ContentService } from '@alfresco/adf-core';\nimport { Directive, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { TaskListService } from './../services/tasklist.service';\n\nconst JSON_FORMAT: string = 'json';\nconst PDF_FORMAT: string = 'pdf';\n\n@Directive({\n    selector: 'button[adf-task-audit]',\n    host: {\n        'role': 'button',\n        '(click)': 'onClickAudit()'\n    }\n})\nexport class TaskAuditDirective implements OnChanges {\n\n    /** (**required**) The id of the task. */\n    @Input('task-id')\n    taskId: string;\n\n    /** Name of the downloaded file (for PDF downloads). */\n    @Input()\n    fileName: string = 'Audit';\n\n    /** Format of the audit information. Can be \"pdf\" or \"json\". */\n    @Input()\n    format: string = 'pdf';\n\n    /** Enables downloading of the audit when the decorated element is clicked. */\n    @Input()\n    download: boolean = true;\n\n    /** Emitted when the decorated element is clicked. */\n    @Output()\n    clicked: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    public audit: any;\n\n    /**\n     *\n     * @param translateService\n     * @param taskListService\n     */\n    constructor(private contentService: ContentService,\n                private taskListService: TaskListService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (!this.isValidType()) {\n            this.setDefaultFormatType();\n        }\n    }\n\n    isValidType() {\n        if (this.format && (this.isJsonFormat() || this.isPdfFormat())) {\n            return true;\n        }\n        return false;\n    }\n\n    setDefaultFormatType(): void {\n        this.format = PDF_FORMAT;\n    }\n\n    /**\n     * fetch the audit information in the requested format\n     */\n    fetchAuditInfo(): void {\n        if (this.isPdfFormat()) {\n            this.taskListService.fetchTaskAuditPdfById(this.taskId).subscribe(\n                (blob: Blob) => {\n                    this.audit = blob;\n                    if (this.download) {\n                        this.contentService.downloadBlob(this.audit, this.fileName + '.pdf');\n                    }\n                    this.clicked.emit({ format: this.format, value: this.audit, fileName: this.fileName });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        } else {\n            this.taskListService.fetchTaskAuditJsonById(this.taskId).subscribe(\n                (res) => {\n                    this.audit = res;\n                    this.clicked.emit({ format: this.format, value: this.audit, fileName: this.fileName });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        }\n    }\n\n    onClickAudit() {\n        this.fetchAuditInfo();\n    }\n\n    isJsonFormat() {\n        return this.format === JSON_FORMAT;\n    }\n\n    isPdfFormat() {\n        return this.format === PDF_FORMAT;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogService, UserPreferencesService, UserPreferenceValues, UserProcessModel, FormFieldModel, FormModel } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, OnInit, Output, ViewEncapsulation } from '@angular/core';\nimport { DateAdapter, MAT_DATE_FORMATS } from '@angular/material/core';\nimport { MOMENT_DATE_FORMATS, MomentDateAdapter } from '@alfresco/adf-core';\nimport moment from 'moment-es6';\nimport { Moment } from 'moment';\nimport { Observable, of } from 'rxjs';\nimport { Form } from '../models/form.model';\nimport { TaskDetailsModel } from '../models/task-details.model';\nimport { TaskListService } from './../services/tasklist.service';\nimport { switchMap, defaultIfEmpty } from 'rxjs/operators';\nimport { FormBuilder, AbstractControl, Validators, FormGroup, FormControl } from '@angular/forms';\n\n@Component({\n    selector: 'adf-start-task',\n    templateUrl: './start-task.component.html',\n    styleUrls: ['./start-task.component.scss'],\n    providers: [\n        { provide: DateAdapter, useClass: MomentDateAdapter },\n        { provide: MAT_DATE_FORMATS, useValue: MOMENT_DATE_FORMATS }],\n    encapsulation: ViewEncapsulation.None\n})\nexport class StartTaskComponent implements OnInit {\n\n    public FORMAT_DATE: string = 'DD/MM/YYYY';\n    MAX_LENGTH: number = 255;\n\n    /** (required) The id of the app. */\n    @Input()\n    appId: number;\n\n    /** Default Task Name. */\n    @Input()\n    name: string = '';\n\n    /** Emitted when the task is successfully created. */\n    @Output()\n    success: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when the cancel button is clicked by the user. */\n    @Output()\n    cancel: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    taskDetailsModel: TaskDetailsModel = new TaskDetailsModel();\n    forms$: Observable<Form[]>;\n    assigneeId: number;\n    field: FormFieldModel;\n    taskForm: FormGroup;\n    dateError: boolean = false;\n    maxTaskNameLength: number = this.MAX_LENGTH;\n    loading = false;\n\n    /**\n     * Constructor\n     * @param auth\n     * @param translate\n     * @param taskService\n     */\n    constructor(private taskService: TaskListService,\n                private dateAdapter: DateAdapter<Moment>,\n                private userPreferencesService: UserPreferencesService,\n                private formBuilder: FormBuilder,\n                private logService: LogService) {\n    }\n\n    ngOnInit() {\n        if (this.name) {\n            this.taskDetailsModel.name = this.name;\n        }\n\n        this.validateMaxTaskNameLength();\n\n        this.field = new FormFieldModel(new FormModel(), { id: this.assigneeId, value: this.assigneeId, placeholder: 'Assignee' });\n        this.userPreferencesService.select(UserPreferenceValues.Locale).subscribe((locale) => {\n            this.dateAdapter.setLocale(locale);\n        });\n\n        this.loadFormsTask();\n        this.buildForm();\n    }\n\n    buildForm() {\n        this.taskForm = this.formBuilder.group({\n            name: new FormControl(this.taskDetailsModel.name, [Validators.required, Validators.maxLength(this.maxTaskNameLength), this.whitespaceValidator]),\n            description: new FormControl('', [this.whitespaceValidator]),\n            formKey: new FormControl('')\n        });\n\n        this.taskForm.valueChanges.subscribe((taskFormValues) => this.setTaskDetails(taskFormValues));\n    }\n\n    public whitespaceValidator(control: FormControl) {\n        if (control.value) {\n            const isWhitespace = (control.value || '').trim().length === 0;\n            const isValid =  control.value.length === 0 || !isWhitespace;\n            return isValid ? null : { 'whitespace': true };\n        }\n    }\n\n    setTaskDetails(form) {\n        this.taskDetailsModel.name = form.name;\n        this.taskDetailsModel.description = form.description;\n        this.taskDetailsModel.formKey = form.formKey ? form.formKey.toString() : null;\n    }\n\n    isFormValid() {\n        return this.taskForm.valid && !this.dateError && !this.loading;\n    }\n\n    public saveTask(): void {\n        this.loading = true;\n        if (this.appId) {\n            this.taskDetailsModel.category = this.appId.toString();\n        }\n        this.taskService.createNewTask(this.taskDetailsModel)\n            .pipe(\n                switchMap((createRes: any) =>\n                    this.attachForm(createRes.id, this.taskDetailsModel.formKey).pipe(\n                        defaultIfEmpty(createRes),\n                        switchMap((attachRes: any) =>\n                            this.assignTaskByUserId(createRes.id, this.assigneeId).pipe(\n                                defaultIfEmpty(attachRes ? attachRes : createRes)\n                            )\n                        )\n                    )\n                )\n            )\n            .subscribe(\n                (res: any) => {\n                    this.loading = false;\n                    this.success.emit(res);\n                },\n                (err) => {\n                    this.loading = false;\n                    this.error.emit(err);\n                    this.logService.error('An error occurred while creating new task');\n                });\n    }\n\n    getAssigneeId(userId) {\n        this.assigneeId = userId;\n    }\n\n    private attachForm(taskId: string, formKey: string): Observable<any> {\n        let response = of();\n        if (taskId && formKey) {\n            response = this.taskService.attachFormToATask(taskId, parseInt(formKey, 10));\n        }\n        return response;\n    }\n\n    private assignTaskByUserId(taskId: string, userId: any): Observable<any> {\n        let response = of();\n        if (taskId && userId) {\n            response = this.taskService.assignTaskByUserId(taskId, userId);\n        }\n        return response;\n    }\n\n    public onCancel(): void {\n        this.cancel.emit();\n    }\n\n    private loadFormsTask(): void {\n        this.forms$ = this.taskService.getFormList();\n    }\n\n    public isUserNameEmpty(user: UserProcessModel): boolean {\n        return !user || (this.isEmpty(user.firstName) && this.isEmpty(user.lastName));\n    }\n\n    private isEmpty(data: string): boolean {\n        return data === undefined || data === null || data.trim().length === 0;\n    }\n\n    public getDisplayUser(firstName: string, lastName: string, delimiter: string = '-'): string {\n        firstName = (firstName !== null ? firstName : '');\n        lastName = (lastName !== null ? lastName : '');\n        return firstName + delimiter + lastName;\n    }\n\n    onDateChanged(newDateValue: any) {\n        this.dateError = false;\n\n        if (newDateValue) {\n            let momentDate;\n\n            if (typeof newDateValue === 'string') {\n                momentDate = moment(newDateValue, this.FORMAT_DATE, true);\n            } else {\n                momentDate = newDateValue;\n            }\n\n            if (momentDate.isValid()) {\n                this.taskDetailsModel.dueDate = momentDate.toDate();\n            } else {\n                this.dateError = true;\n                this.taskDetailsModel.dueDate = null;\n            }\n        } else {\n            this.taskDetailsModel.dueDate = null;\n        }\n    }\n\n    private validateMaxTaskNameLength() {\n        if (this.maxTaskNameLength > this.MAX_LENGTH) {\n            this.maxTaskNameLength = this.MAX_LENGTH;\n            this.logService.log(`the task name length cannot be greater than ${this.MAX_LENGTH}`);\n        }\n    }\n\n    get nameController(): AbstractControl {\n        return this.taskForm.get('name');\n    }\n\n    get descriptionController(): AbstractControl {\n        return this.taskForm.get('description');\n    }\n\n    get formKeyController(): AbstractControl {\n        return this.taskForm.get('formKey');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';\n\n@Component({\n    selector: 'adf-task-standalone',\n    templateUrl: './task-standalone.component.html',\n    styleUrls: ['./task-standalone.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\n\nexport class TaskStandaloneComponent {\n\n    /** Name of the task. */\n    @Input()\n    taskName;\n\n    /** Id of the task. */\n    @Input()\n    taskId;\n\n    /** If true then Task completed message is shown and `Complete` and `Cancel` buttons are hidden. */\n    @Input()\n    isCompleted: boolean = false;\n\n    /** Toggles rendering of the `Complete` button. */\n    @Input()\n    hasCompletePermission: boolean = true;\n\n    // TODO: rename all with show prefix\n    /** Toggles rendering of the `Cancel` button. */\n    @Input()\n    hideCancelButton: boolean = true;\n\n    /** Emitted when the \"Cancel\" button is clicked. */\n    @Output()\n    cancel: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when the form associated with the task is completed. */\n    @Output()\n    complete: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when the form associated with the form task is attached. */\n    @Output()\n    showAttachForm: EventEmitter<void> = new EventEmitter<void>();\n\n    constructor() { }\n\n    onCancelButtonClick(): void {\n        this.cancel.emit();\n    }\n\n    onCompleteButtonClick(): void {\n        this.complete.emit();\n    }\n\n    hasCompleteButton(): boolean {\n        return this.hasCompletePermission && !this.isCompleted;\n    }\n\n    hasCancelButton(): boolean {\n        return !this.hideCancelButton && !this.isCompleted;\n    }\n\n    hasAttachFormButton(): boolean {\n        return !this.isCompleted;\n    }\n\n    onShowAttachForm() {\n        this.showAttachForm.emit();\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormService, LogService } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output } from '@angular/core';\nimport { Form } from '../models/form.model';\nimport { TaskListService } from './../services/tasklist.service';\nimport { FormControl, Validators } from '@angular/forms';\n\n@Component({\n    selector: 'adf-attach-form',\n    templateUrl: './attach-form.component.html',\n    styleUrls: ['./attach-form.component.scss']\n})\n\nexport class AttachFormComponent implements OnInit, OnChanges {\n    constructor(private taskService: TaskListService,\n                private logService: LogService,\n                private formService: FormService) { }\n\n    /** Id of the task. */\n    @Input()\n    taskId;\n\n    /** Identifier of the form to attach. */\n    @Input()\n    formKey;\n\n    /** Emitted when the \"Cancel\" button is clicked. */\n    @Output()\n    cancelAttachForm: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when the form is attached successfully. */\n    @Output()\n    success: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    forms: Form[];\n\n    formId: number;\n    disableSubmit: boolean = true;\n    selectedFormId: number;\n\n    attachFormControl: FormControl;\n\n    ngOnInit() {\n        this.attachFormControl = new FormControl('', Validators.required);\n        this.attachFormControl.valueChanges.subscribe( (currentValue) => {\n            if (this.attachFormControl.valid) {\n                if ( this.formId !== currentValue) {\n                    this.disableSubmit = false;\n                } else {\n                    this.disableSubmit = true;\n                }\n            }\n        });\n    }\n\n    ngOnChanges() {\n        this.formId = undefined;\n        this.disableSubmit = true;\n        this.loadFormsTask();\n        if (this.formKey) {\n            this.onFormAttached();\n        }\n    }\n\n    onCancelButtonClick(): void {\n        this.selectedFormId = this.formId;\n        this.cancelAttachForm.emit();\n    }\n\n    onRemoveButtonClick(): void {\n        this.taskService.deleteForm(this.taskId).subscribe(\n            () => {\n                this.formId = this.selectedFormId = null;\n                this.success.emit();\n            },\n            (err) => {\n                this.error.emit(err);\n                this.logService.error('An error occurred while trying to delete the form');\n            });\n    }\n\n    onAttachFormButtonClick(): void {\n        this.attachForm(this.taskId, this.selectedFormId);\n    }\n\n    private loadFormsTask(): void {\n        this.taskService.getFormList().subscribe((form: Form[]) => {\n                this.forms = form;\n            },\n            (err) => {\n                this.error.emit(err);\n                this.logService.error('An error occurred while trying to get the forms');\n            });\n    }\n\n    private onFormAttached() {\n        this.formService.getTaskForm(this.taskId)\n            .subscribe((res) => {\n                this.formService.getFormDefinitionByName(res.name).subscribe((formDef) => {\n                    this.formId = this.selectedFormId = formDef;\n                });\n            }, (err) => {\n                this.error.emit(err);\n                this.logService.error('Could not load forms');\n            });\n    }\n\n    private attachForm(taskId: string, formId: number) {\n        if (taskId && formId) {\n            this.taskService.attachFormToATask(taskId, formId)\n                .subscribe(() => {\n                    this.success.emit();\n                }, (err) => {\n                    this.error.emit(err);\n                    this.logService.error('Could not attach form');\n                });\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService, AppConfigService, UploadService } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { throwError } from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProcessUploadService extends UploadService {\n\n    constructor(apiService: AlfrescoApiService, appConfigService: AppConfigService) {\n        super(apiService, appConfigService);\n    }\n\n    getUploadPromise(file: any): any {\n        const opts = {\n            isRelatedContent: true\n        };\n        const processInstanceId = file.options.parentId;\n        const promise = this.apiService.getInstance().activiti.contentApi.createRelatedContentOnProcessInstance(processInstanceId, file.file, opts);\n\n        promise.catch((err) => this.handleError(err));\n\n        return promise;\n    }\n\n    private handleError(error: any) {\n        return throwError(error || 'Server error');\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AlfrescoApiService, AppConfigService, UploadService } from '@alfresco/adf-core';\nimport { Injectable } from '@angular/core';\nimport { throwError } from 'rxjs';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TaskUploadService extends UploadService {\n\n    constructor(apiService: AlfrescoApiService, appConfigService: AppConfigService) {\n        super(apiService, appConfigService);\n    }\n\n    getUploadPromise(file: any): any {\n        const opts = {\n            isRelatedContent: true\n        };\n        const taskId = file.options.parentId;\n        const promise = this.apiService.getInstance().activiti.contentApi.createRelatedContentOnTask(taskId, file.file, opts);\n\n        promise.catch((err) => this.handleError(err));\n\n        return promise;\n    }\n\n    private handleError(error: any) {\n        return throwError(error || 'Server error');\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This object represent of the StartTaskModel.\n */\nimport { UserProcessModel } from '@alfresco/adf-core';\n\nexport class StartTaskModel {\n\n    name: string;\n    description: string;\n    assignee: UserProcessModel;\n    dueDate: any;\n    formKey: any;\n    category: string;\n\n    constructor(obj?: any) {\n        this.name = obj && obj.name || null;\n        this.description = obj && obj.description || null;\n        this.assignee = obj && obj.assignee ? new UserProcessModel(obj.assignee) : null;\n        this.dueDate = obj && obj.dueDate || null;\n        this.formKey = obj && obj.formKey || null;\n        this.category = obj && obj.category || null;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { TaskDetailsModel } from './task-details.model';\n\nexport class TaskDetailsEvent {\n\n    private _value: TaskDetailsModel;\n    private _defaultPrevented: boolean = false;\n\n    get value(): TaskDetailsModel {\n        return this._value;\n    }\n\n    get defaultPrevented() {\n        return this._defaultPrevented;\n    }\n\n    constructor(value: TaskDetailsModel) {\n        this._value = value;\n    }\n\n    preventDefault() {\n        this._defaultPrevented = true;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This object represent the User Event.\n */\nexport class UserEventModel {\n    type: string = '';\n    value: any = {};\n\n    constructor(obj?: any) {\n        this.type = obj && obj.type;\n        this.value = obj && obj.value || {};\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This object represent the process service user group.*\n */\n\nexport class UserGroupModel {\n    id?: number;\n    name?: string;\n    externalId?: string;\n    status?: string;\n    groups?: any = {};\n\n    constructor(obj?: any) {\n        this.id = obj && obj.id;\n        this.name = obj && obj.name;\n        this.externalId = obj && obj.externalId;\n        this.status = obj && obj.status;\n        this.groups = obj && obj.groups;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from '@angular/core';\nimport {\n    MAT_LABEL_GLOBAL_OPTIONS, MatAutocompleteModule, MatButtonModule, MatCardModule, MatCheckboxModule,\n    MatChipsModule, MatDatepickerModule, MatDialogModule, MatGridListModule, MatIconModule,\n    MatInputModule, MatListModule, MatNativeDateModule, MatOptionModule, MatProgressSpinnerModule, MatRadioModule,\n    MatRippleModule, MatSelectModule, MatSlideToggleModule, MatTableModule, MatTabsModule,\n    MatTooltipModule, MatMenuModule\n} from '@angular/material';\n\nexport function modules() {\n    return [\n        MatAutocompleteModule, MatButtonModule, MatCardModule, MatDialogModule,\n        MatCheckboxModule, MatDatepickerModule, MatGridListModule, MatIconModule, MatInputModule,\n        MatListModule, MatOptionModule, MatRadioModule, MatSelectModule, MatSlideToggleModule, MatTableModule,\n        MatTabsModule, MatProgressSpinnerModule, MatNativeDateModule, MatRippleModule, MatTooltipModule,\n        MatChipsModule, MatMenuModule\n    ];\n}\n\n@NgModule({\n    providers: [\n        {provide: MAT_LABEL_GLOBAL_OPTIONS, useValue: { float: 'never' }}\n    ],\n    imports: modules(),\n    exports: modules()\n})\nexport class MaterialModule {}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommentModel, CommentProcessService } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { Observable, Observer } from 'rxjs';\nimport { share } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-process-instance-comments',\n    templateUrl: './process-comments.component.html',\n    styleUrls: ['./process-comments.component.scss']\n})\nexport class ProcessCommentsComponent implements OnChanges {\n\n    /** (**required**) The numeric ID of the process instance to display comments for. */\n    @Input()\n    processInstanceId: string;\n\n    /** Should the comments be read-only? */\n    @Input()\n    readOnly: boolean = true;\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    comments: CommentModel [] = [];\n\n    private commentObserver: Observer<CommentModel>;\n    comment$: Observable<CommentModel>;\n\n    message: string;\n\n    beingAdded: boolean = false;\n\n    constructor(private commentProcessService: CommentProcessService) {\n        this.comment$ = new Observable<CommentModel>((observer) =>  this.commentObserver = observer)\n            .pipe(share());\n        this.comment$.subscribe((comment: CommentModel) => {\n            this.comments.push(comment);\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const processInstanceId = changes['processInstanceId'];\n        if (processInstanceId) {\n            if (processInstanceId.currentValue) {\n                this.getProcessInstanceComments(processInstanceId.currentValue);\n            } else {\n                this.resetComments();\n            }\n        }\n    }\n\n    private getProcessInstanceComments(processInstanceId: string): void {\n        this.resetComments();\n        if (processInstanceId) {\n            this.commentProcessService.getProcessInstanceComments(processInstanceId).subscribe(\n                (res: CommentModel[]) => {\n                    res = res.sort((comment1: CommentModel, comment2: CommentModel) => {\n                        const date1 = new Date(comment1.created);\n                        const date2 = new Date(comment2.created);\n                        return date1 > date2 ? -1 : date1 < date2 ? 1 : 0;\n                    });\n                    res.forEach((comment) => {\n                        this.commentObserver.next(comment);\n                    });\n                },\n                (err) => {\n                    this.error.emit(err);\n                }\n            );\n        }\n    }\n\n    private resetComments(): void {\n        this.comments = [];\n    }\n\n    add(): void {\n        if (this.message && this.message.trim() && !this.beingAdded) {\n            this.beingAdded = true;\n            this.commentProcessService.addProcessInstanceComment(this.processInstanceId, this.message)\n                .subscribe(\n                    (res: CommentModel) => {\n                        this.comments.unshift(res);\n                        this.message = '';\n                        this.beingAdded = false;\n\n                    },\n                    (err) => {\n                        this.error.emit(err);\n                        this.beingAdded = false;\n                    }\n                );\n        }\n    }\n\n    clear(): void {\n        this.message = '';\n    }\n\n    isReadOnly(): boolean {\n        return this.readOnly;\n    }\n\n    onError(error: any) {\n        this.error.emit(error);\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CoreModule } from '@alfresco/adf-core';\n\nimport { ProcessCommentsComponent } from './process-comments.component';\n\n@NgModule({\n    imports: [\n        FormsModule,\n        ReactiveFormsModule,\n        MaterialModule,\n        CommonModule,\n        CoreModule.forChild()\n    ],\n    declarations: [\n        ProcessCommentsComponent\n    ],\n    exports: [\n        ProcessCommentsComponent\n    ]\n})\nexport class ProcessCommentsModule {\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogService, UserProcessModel } from '@alfresco/adf-core';\nimport { PeopleProcessService } from '@alfresco/adf-core';\nimport { AfterViewInit, Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { Observable, Observer } from 'rxjs';\nimport { UserEventModel } from '../../../task-list/models/user-event.model';\nimport { PeopleSearchComponent } from '../people-search/people-search.component';\nimport { share } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-people',\n    templateUrl: './people.component.html',\n    styleUrls: ['./people.component.scss']\n})\nexport class PeopleComponent implements OnInit, AfterViewInit {\n\n    /** The array of User objects to display. */\n    @Input()\n    people: UserProcessModel[] = [];\n\n    /** The numeric ID of the task. */\n    @Input()\n    taskId: string = '';\n\n    /** Should the data be read-only? */\n    @Input()\n    readOnly: boolean = false;\n\n    @ViewChild('peopleSearch')\n    peopleSearch: PeopleSearchComponent;\n\n    showAssignment: boolean = false;\n\n    private peopleSearchObserver: Observer<UserProcessModel[]>;\n    peopleSearch$: Observable<UserProcessModel[]>;\n\n    constructor(private logService: LogService, public peopleProcessService: PeopleProcessService) {\n        this.peopleSearch$ = new Observable<UserProcessModel[]>((observer) => this.peopleSearchObserver = observer)\n            .pipe(\n                share()\n            );\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n    }\n\n    involveUserAndCloseSearch() {\n        if (this.peopleSearch) {\n            this.peopleSearch.involveUserAndClose();\n        }\n    }\n\n    involveUserWithoutCloseSearch() {\n        if (this.peopleSearch) {\n            this.peopleSearch.involveUser();\n        }\n    }\n\n    searchUser(searchedWord: string) {\n        this.peopleProcessService.getWorkflowUsers(this.taskId, searchedWord)\n            .subscribe((users) => {\n                this.peopleSearchObserver.next(users);\n            }, (error) => this.logService.error(error));\n    }\n\n    involveUser(user: UserProcessModel) {\n        this.peopleProcessService.involveUserWithTask(this.taskId, user.id.toString())\n            .subscribe(() => {\n                this.people = [...this.people, user];\n            }, (error) => this.logService.error('Impossible to involve user with task'));\n    }\n\n    removeInvolvedUser(user: UserProcessModel) {\n        this.peopleProcessService.removeInvolvedUser(this.taskId, user.id.toString())\n            .subscribe(() => {\n                this.people = this.people.filter((involvedUser) => {\n                    return involvedUser.id !== user.id;\n                });\n            }, (error) => this.logService.error('Impossible to remove involved user from task'));\n    }\n\n    getDisplayUser(firstName: string, lastName: string, delimiter: string = '-'): string {\n        firstName = (firstName !== null ? firstName : '');\n        lastName = (lastName !== null ? lastName : '');\n        return firstName + delimiter + lastName;\n    }\n\n    getInitialUserName(firstName: string, lastName: string) {\n        firstName = (firstName !== null && firstName !== '' ? firstName[0] : '');\n        lastName = (lastName !== null && lastName !== '' ? lastName[0] : '');\n        return this.getDisplayUser(firstName, lastName, '');\n    }\n\n    onAddAssignment() {\n        this.showAssignment = true;\n    }\n\n    onClickAction(event: UserEventModel) {\n        if (event.type === 'remove') {\n            this.removeInvolvedUser(event.value);\n        }\n    }\n\n    hasPeople() {\n        return this.people && this.people.length > 0;\n    }\n\n    isEditMode() {\n        return !this.readOnly;\n    }\n\n    onCloseSearch() {\n        this.showAssignment = false;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataTableComponent } from '@alfresco/adf-core';\nimport { DataColumnListComponent, UserProcessModel } from '@alfresco/adf-core';\nimport { AfterContentInit, AfterViewInit, Component, ContentChild, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { UserEventModel } from '../../../task-list/models/user-event.model';\n\n@Component({\n    selector: 'adf-people-list',\n    templateUrl: './people-list.component.html',\n    styleUrls: ['./people-list.component.scss']\n})\n\nexport class PeopleListComponent implements AfterViewInit, AfterContentInit {\n\n    @ContentChild(DataColumnListComponent) columnList: DataColumnListComponent;\n\n    @ViewChild('dataTable')\n    peopleDataTable: DataTableComponent;\n\n    /** The array of user data used to populate the people list. */\n    @Input()\n    users: UserProcessModel[];\n\n    /** Toggles whether or not actions should be visible, i.e. the 'Three-Dots' menu. */\n    @Input()\n    actions: boolean = false;\n\n    /** Emitted when the user clicks a row in the people list. */\n    @Output()\n    clickRow: EventEmitter<UserProcessModel> = new EventEmitter<UserProcessModel>();\n\n    /** Emitted when the user clicks in the 'Three Dots' drop down menu for a row. */\n    @Output()\n    clickAction: EventEmitter<UserEventModel> = new EventEmitter<UserEventModel>();\n\n    user: UserProcessModel;\n\n    ngAfterContentInit() {\n        this.peopleDataTable.columnList = this.columnList;\n    }\n\n    ngAfterViewInit() {\n    }\n\n    selectUser(event: any) {\n        this.user = event.value.obj;\n        this.clickRow.emit(this.user);\n    }\n\n    hasActions(): boolean {\n        return this.actions;\n    }\n\n    onShowRowActionsMenu(event: any) {\n\n        const removeAction = {\n            title: 'Remove',\n            name: 'remove'\n        };\n\n        event.value.actions = [\n            removeAction\n        ];\n    }\n\n    onExecuteRowAction(event: any) {\n        const args = event.value;\n        const action = args.action;\n        this.clickAction.emit(new UserEventModel({type: action.name, value: args.row.obj}));\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserProcessModel } from '@alfresco/adf-core';\nimport { Component, EventEmitter, OnInit, Input, Output, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { PerformSearchCallback } from '../../interfaces/perform-search-callback.interface';\nimport { map } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-people-search',\n    templateUrl: './people-search.component.html',\n    styleUrls: ['./people-search.component.scss'],\n    host: {\n        'class': 'adf-people-search'\n    },\n    encapsulation: ViewEncapsulation.None\n})\n\nexport class PeopleSearchComponent implements OnInit {\n\n    /** Parameters for displaying the list. */\n    @Input()\n    results: Observable<UserProcessModel[]>;\n\n    /** Emitted when a search is performed with a new keyword. */\n    @Output()\n    searchPeople: EventEmitter<any> = new EventEmitter();\n\n    /** Emitted when a user is selected and the action button is clicked. */\n    @Output()\n    success: EventEmitter<UserProcessModel> = new EventEmitter<UserProcessModel>();\n\n    /** Emitted when the \"close\" button is clicked. */\n    @Output()\n    closeSearch = new EventEmitter();\n\n    filteredResults$: Observable<UserProcessModel[]>;\n    selectedUser: UserProcessModel = {};\n    performSearch: PerformSearchCallback;\n\n    constructor() {}\n\n    ngOnInit() {\n        this.filteredResults$ = this.results\n            .pipe(\n                map((users) => {\n                    return users.filter((user) => user.id !== this.selectedUser.id);\n                })\n            );\n        this.performSearch = this.performSearchCallback.bind(this);\n    }\n\n    private performSearchCallback(event): Observable<UserProcessModel[]> {\n        this.searchPeople.emit(event);\n        return this.filteredResults$;\n    }\n\n    onRowClick(user: UserProcessModel) {\n        this.selectedUser = user;\n    }\n\n    closeSearchList() {\n        this.closeSearch.emit();\n    }\n\n    involveUserAndClose() {\n        this.involveUser();\n        this.closeSearchList();\n    }\n\n    involveUser() {\n        if (this.selectedUser === undefined) {\n            return;\n        }\n        this.success.emit(this.selectedUser);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function getDisplayUser(firstName: string, lastName: string, delimiter: string = '-'): string {\n    firstName = (firstName !== null ? firstName : '');\n    lastName = (lastName !== null ? lastName : '');\n    return firstName + delimiter + lastName;\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UserProcessModel, TranslationService, PeopleProcessService } from '@alfresco/adf-core';\nimport { Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { debounceTime, switchMap } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { PerformSearchCallback } from '../../interfaces/perform-search-callback.interface';\nimport { getDisplayUser } from '../../helpers/getDisplayUser';\n\n@Component({\n    selector: 'adf-people-search-field',\n    templateUrl: './people-search-field.component.html',\n    styleUrls: ['./people-search-field.component.scss'],\n    host: { 'class': 'adf-people-search-field' },\n    encapsulation: ViewEncapsulation.None\n})\n\nexport class PeopleSearchFieldComponent {\n\n    @Input()\n    performSearch: PerformSearchCallback;\n\n    @Input()\n    placeholder: string;\n\n    @Output()\n    rowClick: EventEmitter<UserProcessModel> = new EventEmitter<UserProcessModel>();\n\n    users$: Observable<UserProcessModel[]>;\n    searchUser: FormControl = new FormControl();\n\n    defaultPlaceholder = 'ADF_TASK_LIST.PEOPLE.SEARCH_USER';\n\n    constructor(public peopleProcessService: PeopleProcessService,\n                private translationService: TranslationService) {\n        this.users$ = this.searchUser.valueChanges\n            .pipe(\n                debounceTime(200),\n                switchMap((searchWord: string) => {\n                    if (searchWord && searchWord.trim()) {\n                        return this.performSearch(searchWord);\n                    } else {\n                        return of([]);\n                    }\n                })\n            );\n\n        this.defaultPlaceholder = this.translationService.instant(this.defaultPlaceholder);\n    }\n\n    public reset() {\n        this.searchUser.reset();\n    }\n\n    get searchPlaceholder() {\n        return this.placeholder || this.defaultPlaceholder;\n    }\n\n    onRowClick(event) {\n        this.rowClick.emit(event);\n    }\n\n    getDisplayUser(firstName: string, lastName: string, delimiter: string = '-'): string {\n        return getDisplayUser(firstName, lastName, delimiter);\n    }\n\n    getInitialUserName(firstName: string, lastName: string) {\n        firstName = (firstName !== null && firstName !== '' ? firstName[0] : '');\n        lastName = (lastName !== null && lastName !== '' ? lastName[0] : '');\n        return this.getDisplayUser(firstName, lastName, '');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ViewChild, ViewEncapsulation, EventEmitter, Input, Output } from '@angular/core';\nimport { PerformSearchCallback } from '../../interfaces/perform-search-callback.interface';\nimport { PeopleProcessService, UserProcessModel, LogService, TranslationService } from '@alfresco/adf-core';\nimport { PeopleSearchFieldComponent } from '../people-search-field/people-search-field.component';\nimport { getDisplayUser } from '../../helpers/getDisplayUser';\nimport { Observable, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nconst DEFAULT_ASSIGNEE_PLACEHOLDER = 'ADF_TASK_LIST.PEOPLE.ASSIGNEE';\n\n@Component({\n    selector: 'adf-people-selector',\n    templateUrl: './people-selector.component.html',\n    styleUrls: ['./people-selector.component.scss'],\n    host: { 'class': 'adf-people-selector' },\n    encapsulation: ViewEncapsulation.None\n})\n\nexport class PeopleSelectorComponent {\n\n    @Input()\n    peopleId: UserProcessModel;\n\n    // Poorly documented Angular magic for [(peopleId)]\n    @Output()\n    peopleIdChange: EventEmitter<number>;\n\n    @ViewChild('peopleSearchField')\n    searchFieldComponent: PeopleSearchFieldComponent;\n\n    performSearch: PerformSearchCallback;\n    selectedUser: UserProcessModel;\n    defaultPlaceholder: string;\n\n    constructor(\n        private peopleProcessService: PeopleProcessService,\n        private logService: LogService,\n        private translationService: TranslationService) {\n\n        this.peopleIdChange = new EventEmitter();\n        this.performSearch = this.searchUser.bind(this);\n        this.defaultPlaceholder = this.translationService.instant(DEFAULT_ASSIGNEE_PLACEHOLDER);\n    }\n\n    searchUser(searchWord: string): Observable<{} | UserProcessModel[]> {\n        return this.peopleProcessService.getWorkflowUsers(undefined, searchWord)\n            .pipe(\n                catchError(this.onSearchUserError.bind(this))\n            );\n    }\n\n    private onSearchUserError(): Observable<UserProcessModel[]> {\n        this.logService.error('getWorkflowUsers threw error');\n        return of([]);\n    }\n\n    userSelected(user: UserProcessModel): void {\n        this.updateUserSelection(user);\n    }\n\n    userDeselected(): void {\n        this.updateUserSelection(undefined);\n    }\n\n    private updateUserSelection(user: UserProcessModel): void {\n        this.selectedUser = user;\n        this.peopleIdChange.emit(user && user.id || undefined);\n        this.searchFieldComponent.reset();\n    }\n\n    get placeholder() {\n        if (!this.selectedUser) {\n            return this.defaultPlaceholder;\n        }\n\n        return getDisplayUser(this.selectedUser.firstName, this.selectedUser.lastName, ' ');\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Directive } from '@angular/core';\n\n/**\n * Directive selectors without adf- prefix will be deprecated on 3.0.0\n */\n@Directive({ selector: 'adf-people-search-action-label, people-search-action-label' })\nexport class PeopleSearchActionLabelDirective { }\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Directive } from '@angular/core';\n\n/**\n * Directive selectors without adf- prefix will be deprecated on 3.0.0\n */\n@Directive({ selector: 'adf-people-search-title, people-search-title' })\nexport class PeopleSearchTitleDirective { }\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { CoreModule } from '@alfresco/adf-core';\nimport { PeopleComponent } from './components/people/people.component';\nimport { PeopleListComponent } from './components/people-list/people-list.component';\nimport { PeopleSearchComponent } from './components/people-search/people-search.component';\nimport { PeopleSearchFieldComponent } from './components/people-search-field/people-search-field.component';\nimport { PeopleSelectorComponent } from './components/people-selector/people-selector.component';\n\nimport { PeopleSearchActionLabelDirective } from './directives/people-search-action-label.directive';\nimport { PeopleSearchTitleDirective } from './directives/people-search-title.directive';\n\n@NgModule({\n    imports: [\n        FormsModule,\n        ReactiveFormsModule,\n        MaterialModule,\n        CommonModule,\n        CoreModule.forChild()\n    ],\n    declarations: [\n        PeopleComponent,\n        PeopleSearchComponent,\n        PeopleSearchFieldComponent,\n        PeopleSelectorComponent,\n        PeopleSearchTitleDirective,\n        PeopleSearchActionLabelDirective,\n        PeopleListComponent\n    ],\n    exports: [\n        PeopleComponent,\n        PeopleSearchComponent,\n        PeopleSearchFieldComponent,\n        PeopleSelectorComponent,\n        PeopleSearchTitleDirective,\n        PeopleSearchActionLabelDirective,\n        PeopleListComponent\n    ]\n})\nexport class PeopleModule {\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, Inject, ViewEncapsulation, ViewChild } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material';\nimport { ExternalAlfrescoApiService, AlfrescoApiService, AuthenticationService, LoginDialogPanelComponent, SitesService, SearchService } from '@alfresco/adf-core';\nimport { DocumentListService, ContentNodeSelectorService } from '@alfresco/adf-content-services';\nimport { AttachFileWidgetDialogComponentData } from './attach-file-widget-dialog-component.interface';\nimport { Node } from '@alfresco/js-api';\n\n@Component({\n    selector: 'adf-attach-file-widget-dialog',\n    templateUrl: './attach-file-widget-dialog.component.html',\n    styleUrls: ['./attach-file-widget-dialog.component.scss'],\n    encapsulation: ViewEncapsulation.None,\n    providers: [ AuthenticationService,\n                 DocumentListService,\n                 SitesService,\n                 ContentNodeSelectorService,\n                 SearchService,\n                 { provide: AlfrescoApiService, useClass: ExternalAlfrescoApiService} ]\n})\nexport class AttachFileWidgetDialogComponent {\n\n    @ViewChild('adfLoginPanel')\n    loginPanel: LoginDialogPanelComponent;\n\n    chosenNode: Node[];\n    buttonActionName;\n\n    constructor(@Inject(MAT_DIALOG_DATA) public data: AttachFileWidgetDialogComponentData,\n                private externalApiService: AlfrescoApiService) {\n        (<any> externalApiService).init(data.ecmHost, data.context);\n        this.buttonActionName = data.actionName ? `ATTACH-FILE.ACTIONS.${data.actionName.toUpperCase()}` : 'ATTACH-FILE.ACTIONS.CHOOSE';\n    }\n\n    isLoggedIn() {\n        return this.externalApiService.getInstance().isLoggedIn();\n    }\n\n    performLogin() {\n        this.loginPanel.submitForm();\n    }\n\n    close() {\n        this.data.selected.complete();\n    }\n\n    onSelect(nodeList: Node[]) {\n        if (nodeList && nodeList[0].isFile) {\n            this.chosenNode = nodeList;\n        } else {\n            this.chosenNode = null;\n        }\n    }\n\n    onClick(event: any) {\n        this.data.selected.next(this.chosenNode);\n        this.data.selected.complete();\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MatDialog } from '@angular/material';\nimport { EventEmitter, Injectable, Output } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport { AttachFileWidgetDialogComponentData } from './attach-file-widget-dialog-component.interface';\nimport { Node } from '@alfresco/js-api';\nimport { AttachFileWidgetDialogComponent } from './attach-file-widget-dialog.component';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AttachFileWidgetDialogService {\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(private dialog: MatDialog) {\n    }\n\n    /**\n     * Opens a dialog to choose a file to upload.\n     * @param action Name of the action to show in the title\n     * @param contentEntry Item to upload\n     * @returns Information about the chosen file(s)\n     */\n    openLogin(ecmHost: string, actionName?: string, context?: string): Observable<Node[]> {\n        const titleString: string = `Please log in for ${ecmHost}`;\n        const selected = new Subject<Node[]>();\n        selected.subscribe({\n            complete: this.close.bind(this)\n        });\n\n        const data: AttachFileWidgetDialogComponentData = {\n            title : titleString,\n            actionName,\n            selected,\n            ecmHost,\n            context,\n            isSelectionValid: this.isNodeFile.bind(this)\n        };\n\n        this.openLoginDialog(data, 'adf-attach-file-widget-dialog', '630px');\n        return selected;\n    }\n\n    private openLoginDialog(data: AttachFileWidgetDialogComponentData, currentPanelClass: string, chosenWidth: string) {\n        this.dialog.open(AttachFileWidgetDialogComponent, { data, panelClass: currentPanelClass, width: chosenWidth });\n    }\n\n    /** Closes the currently open dialog. */\n    close() {\n        this.dialog.closeAll();\n    }\n\n    private isNodeFile(entry: Node): boolean {\n        return entry.isFile;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable:component-selector */\n\nimport { Component, ViewEncapsulation, OnInit } from '@angular/core';\nimport {\n    UploadWidgetComponent,\n    FormService,\n    LogService,\n    ThumbnailService,\n    ProcessContentService,\n    ActivitiContentService,\n    ContentService,\n    FormEvent,\n    AppConfigValues,\n    AppConfigService\n} from '@alfresco/adf-core';\nimport { ContentNodeDialogService } from '@alfresco/adf-content-services';\nimport { Node, RelatedContentRepresentation } from '@alfresco/js-api';\nimport { from, zip, of } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport { AttachFileWidgetDialogService } from './attach-file-widget-dialog.service';\n\n@Component({\n    selector: 'attach-widget',\n    templateUrl: './attach-file-widget.component.html',\n    styleUrls: ['./attach-file-widget.component.scss'],\n    host: {\n        '(click)': 'event($event)',\n        '(blur)': 'event($event)',\n        '(change)': 'event($event)',\n        '(focus)': 'event($event)',\n        '(focusin)': 'event($event)',\n        '(focusout)': 'event($event)',\n        '(input)': 'event($event)',\n        '(invalid)': 'event($event)',\n        '(select)': 'event($event)'\n    },\n    encapsulation: ViewEncapsulation.None\n})\nexport class AttachFileWidgetComponent extends UploadWidgetComponent implements OnInit {\n\n    repositoryList = [];\n    private tempFilesList = [];\n\n    constructor(public formService: FormService,\n                private logger: LogService,\n                public thumbnails: ThumbnailService,\n                public processContentService: ProcessContentService,\n                private activitiContentService: ActivitiContentService,\n                private contentService: ContentService,\n                private contentDialog: ContentNodeDialogService,\n                private appConfigService: AppConfigService,\n                private attachDialogService: AttachFileWidgetDialogService) {\n        super(formService, logger, thumbnails, processContentService);\n    }\n\n    ngOnInit() {\n        if (this.field &&\n            this.field.value &&\n            this.field.value.length > 0) {\n            this.hasFile = true;\n        }\n        this.getMultipleFileParam();\n\n        this.activitiContentService.getAlfrescoRepositories(null, true).subscribe((repoList) => {\n            this.repositoryList = repoList;\n        });\n\n        this.formService.taskSaved.subscribe((formSaved: FormEvent) => {\n            if (formSaved.form.id === this.field.form.id) {\n                this.tempFilesList = [];\n            }\n        });\n    }\n\n    isFileSourceConfigured(): boolean {\n        return !!this.field.params && !!this.field.params.fileSource;\n    }\n\n    isMultipleSourceUpload(): boolean {\n        return !this.field.readOnly && this.isFileSourceConfigured() && !this.isOnlyLocalSourceSelected();\n    }\n\n    isAllFileSourceSelected(): boolean {\n        return this.field.params &&\n            this.field.params.fileSource &&\n            this.field.params.fileSource.serviceId === 'all-file-sources';\n    }\n\n    isOnlyLocalSourceSelected(): boolean {\n        return this.field.params &&\n            this.field.params.fileSource &&\n            this.field.params.fileSource.serviceId === 'local-file';\n    }\n\n    isSimpleUploadButton(): boolean {\n        return this.isUploadButtonVisible() &&\n            !this.isFileSourceConfigured() ||\n            this.isOnlyLocalSourceSelected();\n    }\n\n    isUploadButtonVisible(): boolean {\n        return (!this.hasFile || this.multipleOption) && !this.field.readOnly;\n    }\n\n    isDefinedSourceFolder(): boolean {\n        return !!this.field.params &&\n            !!this.field.params.fileSource &&\n            !!this.field.params.fileSource.selectedFolder;\n    }\n\n    isTemporaryFile(file): boolean {\n        return this.tempFilesList.findIndex((elem) => elem.name === file.name) >= 0;\n    }\n\n    openSelectDialogFromFileSource() {\n        const params = this.field.params;\n        if (this.isDefinedSourceFolder()) {\n            this.contentDialog.openFileBrowseDialogByFolderId(params.fileSource.selectedFolder.pathId).subscribe(\n                (selections: Node[]) => {\n                    this.tempFilesList.push(...selections);\n                    this.uploadFileFromCS(selections,\n                        this.field.params.fileSource.selectedFolder.accountId,\n                        this.field.params.fileSource.selectedFolder.siteId);\n                });\n        }\n    }\n\n    onAttachFileChanged(event: any) {\n        this.tempFilesList.push(...Array.from(event.target.files));\n        this.onFileChanged(event);\n    }\n\n    onRemoveAttachFile(file: File | RelatedContentRepresentation) {\n        if (this.isTemporaryFile(file)) {\n            this.tempFilesList.splice(this.tempFilesList.indexOf((<RelatedContentRepresentation> file).contentBlob), 1);\n        }\n        this.removeFile(file);\n    }\n\n    onAttachFileClicked(file: any) {\n        if (file.isExternal) {\n            this.logger.info(`The file ${file.name} comes from an external source and cannot be showed at this moment`);\n            return;\n        }\n        if (this.isTemporaryFile(file)) {\n            this.formService.formContentClicked.next(file);\n        } else {\n            this.fileClicked(file);\n        }\n    }\n\n    downloadContent(file: any | RelatedContentRepresentation): void {\n        if (this.isTemporaryFile(file)) {\n            this.contentService.downloadBlob((<RelatedContentRepresentation> file).contentBlob, file.name);\n        } else {\n            this.processContentService.getFileRawContent((<any> file).id).subscribe(\n                (blob: Blob) => {\n                    this.contentService.downloadBlob(blob, (<any> file).name);\n                },\n                (err) => {\n                    this.logger.error('Impossible retrieve content for download');\n                }\n            );\n        }\n    }\n\n    openSelectDialog(repository) {\n        const accountIdentifier = 'alfresco-' + repository.id + '-' + repository.name;\n        const currentECMHost = this.getDomainHost(this.appConfigService.get(AppConfigValues.ECMHOST));\n        const chosenRepositoryHost = this.getDomainHost(repository.repositoryUrl);\n        if (chosenRepositoryHost !== currentECMHost) {\n            const formattedRepositoryHost = repository.repositoryUrl.replace('/alfresco', '');\n            this.attachDialogService.openLogin(formattedRepositoryHost).subscribe(\n                (selections: any[]) => {\n                    selections.forEach((node) => node.isExternal = true);\n                    this.tempFilesList.push(...selections);\n                    this.uploadFileFromCS(selections, accountIdentifier);\n                });\n        } else {\n            this.contentDialog.openFileBrowseDialogBySite().subscribe(\n                (selections: Node[]) => {\n                    this.tempFilesList.push(...selections);\n                    this.uploadFileFromCS(selections, accountIdentifier);\n                });\n        }\n    }\n\n    private uploadFileFromCS(fileNodeList: any[], accountId: string, siteId?: string) {\n        const filesSaved = [];\n        from(fileNodeList).pipe(\n            mergeMap((node) =>\n                zip(\n                    of(node.content.mimeType),\n                    this.activitiContentService.applyAlfrescoNode(node, siteId, accountId),\n                    of(node.isExternal)\n                )\n            )\n        )\n            .subscribe(([mimeType, res, isExternal]) => {\n                    res.mimeType = mimeType;\n                    res.isExternal = isExternal;\n                    filesSaved.push(res);\n                },\n                (error) => {\n                    this.logger.error(error);\n                },\n                () => {\n                    this.field.value = filesSaved;\n                    this.field.json.value = filesSaved;\n                    this.hasFile = true;\n                });\n    }\n\n    private getDomainHost(urlToCheck) {\n        const result = urlToCheck.match('^(?:https?:\\/\\/)?(?:[^@\\/\\n]+@)?(?:www\\.)?([^:\\/?\\n]+)');\n        return result[1];\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* tslint:disable:component-selector*/\n\nimport { Component, ViewEncapsulation, OnInit } from '@angular/core';\nimport {\n    WidgetComponent,\n    FormService,\n    NodesApiService\n} from '@alfresco/adf-core';\nimport { ContentNodeDialogService } from '@alfresco/adf-content-services';\nimport { Node } from '@alfresco/js-api';\n\n@Component({\n    selector: 'attach-folder-widget',\n    templateUrl: './attach-folder-widget.component.html',\n    styleUrls: ['./attach-folder-widget.component.scss'],\n    host: {\n        '(click)': 'event($event)',\n        '(blur)': 'event($event)',\n        '(change)': 'event($event)',\n        '(focus)': 'event($event)',\n        '(focusin)': 'event($event)',\n        '(focusout)': 'event($event)',\n        '(input)': 'event($event)',\n        '(invalid)': 'event($event)',\n        '(select)': 'event($event)'\n    },\n    encapsulation: ViewEncapsulation.None\n})\nexport class AttachFolderWidgetComponent extends WidgetComponent implements OnInit {\n\n    hasFolder: boolean = false;\n    selectedFolderName: string = '';\n\n    constructor(private contentDialog: ContentNodeDialogService,\n                public formService: FormService,\n                private nodeService: NodesApiService) {\n        super();\n    }\n\n    ngOnInit() {\n        if (this.field &&\n            this.field.value) {\n            this.hasFolder = true;\n            this.nodeService.getNode(this.field.value).subscribe((node: Node) => {\n                this.selectedFolderName = node.name;\n            });\n        }\n    }\n\n    isDefinedSourceFolder(): boolean {\n        return !!this.field.params &&\n            !!this.field.params.folderSource &&\n            !!this.field.params.folderSource.selectedFolder;\n    }\n\n    openSelectDialogFromFileSource() {\n        const params = this.field.params;\n        if (this.isDefinedSourceFolder()) {\n            this.contentDialog.openFolderBrowseDialogByFolderId(params.folderSource.selectedFolder.pathId).subscribe(\n                (selections: Node[]) => {\n                    this.selectedFolderName = selections[0].name;\n                    this.field.value = selections[0].id;\n                    this.hasFolder = true;\n                });\n        } else {\n            this.contentDialog.openFolderBrowseDialogBySite().subscribe(\n                (selections: Node[]) => {\n                    this.selectedFolderName = selections[0].name;\n                    this.field.value = selections[0].id;\n                    this.hasFolder = true;\n                });\n        }\n    }\n\n    removeFolder() {\n        this.field.value = null;\n        this.selectedFolderName = '';\n        this.hasFolder = false;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\nimport { CoreModule } from '@alfresco/adf-core';\nimport { ContentNodeSelectorModule } from '@alfresco/adf-content-services';\n\nimport { AttachFileWidgetComponent } from './attach-file-widget.component';\nimport { AttachFolderWidgetComponent } from './attach-folder-widget.component';\nimport { AttachFileWidgetDialogComponent } from './attach-file-widget-dialog.component';\n\n@NgModule({\n    imports: [\n        CoreModule.forChild(),\n        ContentNodeSelectorModule,\n        MaterialModule\n    ],\n    entryComponents: [\n        AttachFileWidgetComponent,\n        AttachFolderWidgetComponent,\n        AttachFileWidgetDialogComponent\n    ],\n    declarations: [\n        AttachFileWidgetComponent,\n        AttachFolderWidgetComponent,\n        AttachFileWidgetDialogComponent\n    ],\n    exports: [\n        AttachFileWidgetComponent,\n        AttachFolderWidgetComponent,\n        AttachFileWidgetDialogComponent\n    ]\n})\nexport class ContentWidgetModule {}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component, EventEmitter, Input, Output, ViewEncapsulation, SimpleChanges, OnInit, OnDestroy, OnChanges\n} from '@angular/core';\nimport { AttachFileWidgetComponent, AttachFolderWidgetComponent } from '../content-widget';\nimport { EcmModelService, NodeService, WidgetVisibilityService,\n    FormService, FormRenderingService, FormBaseComponent, FormOutcomeModel,\n    ValidateFormEvent, FormEvent, FormErrorEvent, FormFieldModel,\n    FormModel, FormOutcomeEvent, FormValues, ContentLinkModel } from '@alfresco/adf-core';\n\nimport { Observable, of, Subscription } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-form',\n    templateUrl: './form.component.html',\n    encapsulation: ViewEncapsulation.None\n})\nexport class FormComponent extends FormBaseComponent implements OnInit, OnDestroy, OnChanges {\n\n    /** Underlying form model instance. */\n    @Input()\n    form: FormModel;\n\n    /** Task id to fetch corresponding form and values. */\n    @Input()\n    taskId: string;\n\n    /** Content Services node ID for the form metadata. */\n    @Input()\n    nodeId: string;\n\n    /** The id of the form definition to load and display with custom values. */\n    @Input()\n    formId: number;\n\n    /** Name of the form definition to load and display with custom values. */\n    @Input()\n    formName: string;\n\n    /** Toggle saving of form metadata. */\n    @Input()\n    saveMetadata: boolean = false;\n\n    /** Custom form values map to be used with the rendered form. */\n    @Input()\n    data: FormValues;\n\n    /** Emitted when the form is submitted with the `Save` or custom outcomes. */\n    @Output()\n    formSaved: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when the form is submitted with the `Complete` outcome. */\n    @Output()\n    formCompleted: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when form content is clicked. */\n    @Output()\n    formContentClicked: EventEmitter<ContentLinkModel> = new EventEmitter<ContentLinkModel>();\n\n    /** Emitted when the form is loaded or reloaded. */\n    @Output()\n    formLoaded: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    /** Emitted when form values are refreshed due to a data property change. */\n    @Output()\n    formDataRefreshed: EventEmitter<FormModel> = new EventEmitter<FormModel>();\n\n    debugMode: boolean = false;\n\n    protected subscriptions: Subscription[] = [];\n\n    constructor(protected formService: FormService,\n                protected visibilityService: WidgetVisibilityService,\n                protected ecmModelService: EcmModelService,\n                protected nodeService: NodeService,\n                protected formRenderingService: FormRenderingService) {\n        super();\n        this.formRenderingService.setComponentTypeResolver('upload', () => AttachFileWidgetComponent, true);\n        this.formRenderingService.setComponentTypeResolver('select-folder', () => AttachFolderWidgetComponent, true);\n    }\n\n    ngOnInit() {\n        this.subscriptions.push(\n            this.formService.formContentClicked.subscribe((content: ContentLinkModel) => {\n                this.formContentClicked.emit(content);\n            }),\n            this.formService.validateForm.subscribe((validateFormEvent: ValidateFormEvent) => {\n                if (validateFormEvent.errorsField.length > 0) {\n                    this.formError.next(validateFormEvent.errorsField);\n                }\n            })\n        );\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n        this.subscriptions = [];\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const taskId = changes['taskId'];\n        if (taskId && taskId.currentValue) {\n            this.getFormByTaskId(taskId.currentValue);\n            return;\n        }\n\n        const formId = changes['formId'];\n        if (formId && formId.currentValue) {\n            this.getFormDefinitionByFormId(formId.currentValue);\n            return;\n        }\n\n        const formName = changes['formName'];\n        if (formName && formName.currentValue) {\n            this.getFormDefinitionByFormName(formName.currentValue);\n            return;\n        }\n\n        const nodeId = changes['nodeId'];\n        if (nodeId && nodeId.currentValue) {\n            this.loadFormForEcmNode(nodeId.currentValue);\n            return;\n        }\n\n        const data = changes['data'];\n        if (data && data.currentValue) {\n            this.refreshFormData();\n            return;\n        }\n    }\n\n    /**\n     * Invoked when user clicks form refresh button.\n     */\n    onRefreshClicked() {\n        this.loadForm();\n    }\n\n    loadForm() {\n        if (this.taskId) {\n            this.getFormByTaskId(this.taskId);\n            return;\n        }\n\n        if (this.formId) {\n            this.getFormDefinitionByFormId(this.formId);\n            return;\n        }\n\n        if (this.formName) {\n            this.getFormDefinitionByFormName(this.formName);\n            return;\n        }\n    }\n\n    findProcessVariablesByTaskId(taskId: string): Observable<any> {\n        return this.formService.getTask(taskId).pipe(\n            switchMap((task: any) => {\n                if (this.isAProcessTask(task)) {\n                    return this.visibilityService.getTaskProcessVariable(taskId);\n                } else {\n                    return of({});\n                }\n            })\n        );\n    }\n\n    isAProcessTask(taskRepresentation) {\n        return taskRepresentation.processDefinitionId && taskRepresentation.processDefinitionDeploymentId !== 'null';\n    }\n\n    getFormByTaskId(taskId: string): Promise<FormModel> {\n        return new Promise<FormModel>((resolve, reject) => {\n            this.findProcessVariablesByTaskId(taskId).subscribe((processVariables) => {\n                this.formService\n                    .getTaskForm(taskId)\n                    .subscribe(\n                        (form) => {\n                            const parsedForm = this.parseForm(form);\n                            this.visibilityService.refreshVisibility(parsedForm);\n                            parsedForm.validateForm();\n                            this.form = parsedForm;\n                            this.onFormLoaded(this.form);\n                            resolve(this.form);\n                        },\n                        (error) => {\n                            this.handleError(error);\n                            // reject(error);\n                            resolve(null);\n                        }\n                    );\n            });\n        });\n    }\n\n    getFormDefinitionByFormId(formId: number) {\n        this.formService\n            .getFormDefinitionById(formId)\n            .subscribe(\n                (form) => {\n                    this.formName = form.name;\n                    this.form = this.parseForm(form);\n                    this.visibilityService.refreshVisibility(this.form);\n                    this.form.validateForm();\n                    this.onFormLoaded(this.form);\n                },\n                (error) => {\n                    this.handleError(error);\n                }\n            );\n    }\n\n    getFormDefinitionByFormName(formName: string) {\n        this.formService\n            .getFormDefinitionByName(formName)\n            .subscribe(\n                (id) => {\n                    this.formService.getFormDefinitionById(id).subscribe(\n                        (form) => {\n                            this.form = this.parseForm(form);\n                            this.visibilityService.refreshVisibility(this.form);\n                            this.form.validateForm();\n                            this.onFormLoaded(this.form);\n                        },\n                        (error) => {\n                            this.handleError(error);\n                        }\n                    );\n                },\n                (error) => {\n                    this.handleError(error);\n                }\n            );\n    }\n\n    saveTaskForm() {\n        if (this.form && this.form.taskId) {\n            this.formService\n                .saveTaskForm(this.form.taskId, this.form.values)\n                .subscribe(\n                    () => {\n                        this.onTaskSaved(this.form);\n                        this.storeFormAsMetadata();\n                    },\n                    (error) => this.onTaskSavedError(this.form, error)\n                );\n        }\n    }\n\n    completeTaskForm(outcome?: string) {\n        if (this.form && this.form.taskId) {\n            this.formService\n                .completeTaskForm(this.form.taskId, this.form.values, outcome)\n                .subscribe(\n                    () => {\n                        this.onTaskCompleted(this.form);\n                        this.storeFormAsMetadata();\n                    },\n                    (error) => this.onTaskCompletedError(this.form, error)\n                );\n        }\n    }\n\n    handleError(err: any): any {\n        this.error.emit(err);\n    }\n\n    parseForm(json: any): FormModel {\n        if (json) {\n            const form = new FormModel(json, this.data, this.readOnly, this.formService);\n            if (!json.fields) {\n                form.outcomes = this.getFormDefinitionOutcomes(form);\n            }\n            if (this.fieldValidators && this.fieldValidators.length > 0) {\n                form.fieldValidators = this.fieldValidators;\n            }\n            return form;\n        }\n        return null;\n    }\n\n    /**\n     * Get custom set of outcomes for a Form Definition.\n     * @param form Form definition model.\n     */\n    getFormDefinitionOutcomes(form: FormModel): FormOutcomeModel[] {\n        return [\n            new FormOutcomeModel(form, { id: '$save', name: FormOutcomeModel.SAVE_ACTION, isSystem: true })\n        ];\n    }\n\n    checkVisibility(field: FormFieldModel) {\n        if (field && field.form) {\n            this.visibilityService.refreshVisibility(field.form);\n        }\n    }\n\n    private refreshFormData() {\n        this.form = this.parseForm(this.form.json);\n        this.onFormLoaded(this.form);\n        this.onFormDataRefreshed(this.form);\n    }\n\n    private loadFormForEcmNode(nodeId: string): void {\n        this.nodeService.getNodeMetadata(nodeId).subscribe((data) => {\n                this.data = data.metadata;\n                this.loadFormFromActiviti(data.nodeType);\n            },\n            this.handleError);\n    }\n\n    loadFormFromActiviti(nodeType: string): any {\n        this.formService.searchFrom(nodeType).subscribe(\n            (form) => {\n                if (!form) {\n                    this.formService.createFormFromANode(nodeType).subscribe((formMetadata) => {\n                        this.loadFormFromFormId(formMetadata.id);\n                    });\n                } else {\n                    this.loadFormFromFormId(form.id);\n                }\n            },\n            (error) => {\n                this.handleError(error);\n            }\n        );\n    }\n\n    private loadFormFromFormId(formId: number) {\n        this.formId = formId;\n        this.loadForm();\n    }\n\n    protected storeFormAsMetadata() {\n        if (this.saveMetadata) {\n            this.ecmModelService.createEcmTypeForActivitiForm(this.formName, this.form).subscribe((type) => {\n                    this.nodeService.createNodeMetadata(type.nodeType || type.entry.prefixedName, EcmModelService.MODEL_NAMESPACE, this.form.values, this.path, this.nameNode);\n                },\n                (error) => {\n                    this.handleError(error);\n                }\n            );\n        }\n    }\n\n    protected onFormLoaded(form: FormModel) {\n        this.formLoaded.emit(form);\n        this.formService.formLoaded.next(new FormEvent(form));\n    }\n\n    protected onFormDataRefreshed(form: FormModel) {\n        this.formDataRefreshed.emit(form);\n        this.formService.formDataRefreshed.next(new FormEvent(form));\n    }\n\n    protected onTaskSaved(form: FormModel) {\n        this.formSaved.emit(form);\n        this.formService.taskSaved.next(new FormEvent(form));\n    }\n\n    protected onTaskSavedError(form: FormModel, error: any) {\n        this.handleError(error);\n        this.formService.taskSavedError.next(new FormErrorEvent(form, error));\n    }\n\n    protected onTaskCompleted(form: FormModel) {\n        this.formCompleted.emit(form);\n        this.formService.taskCompleted.next(new FormEvent(form));\n    }\n\n    protected onTaskCompletedError(form: FormModel, error: any) {\n        this.handleError(error);\n        this.formService.taskCompletedError.next(new FormErrorEvent(form, error));\n    }\n\n    protected onExecuteOutcome(outcome: FormOutcomeModel): boolean {\n        const args = new FormOutcomeEvent(outcome);\n\n        this.formService.executeOutcome.next(args);\n        if (args.defaultPrevented) {\n            return false;\n        }\n\n        this.executeOutcome.emit(args);\n        if (args.defaultPrevented) {\n            return false;\n        }\n\n        return true;\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    OnChanges,\n    OnInit,\n    Output,\n    SimpleChanges,\n    ViewChild,\n    ViewEncapsulation,\n    OnDestroy\n} from '@angular/core';\nimport { FormComponent } from './form.component';\nimport { ContentLinkModel, FormService, WidgetVisibilityService, FormRenderingService, ValidateFormEvent, FormOutcomeModel } from '@alfresco/adf-core';\n\n@Component({\n    selector: 'adf-start-form',\n    templateUrl: './start-form.component.html',\n    styleUrls: ['./start-form.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class StartFormComponent extends FormComponent implements OnChanges, OnInit, OnDestroy {\n\n    /** Definition ID of the process to start. */\n    @Input()\n    processDefinitionId: string;\n\n    /** Process ID of the process to start. */\n    @Input()\n    processId: string;\n\n    /** Should form outcome buttons be shown? */\n    @Input()\n    showOutcomeButtons: boolean = true;\n\n    /** Should the refresh button be shown? */\n    @Input()\n    showRefreshButton: boolean = true;\n\n    /** Is the form read-only (ie, can't be edited)? */\n    @Input()\n    readOnlyForm: boolean = false;\n\n    /** Emitted when the user clicks one of the outcome buttons that completes the form. */\n    @Output()\n    outcomeClick: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when a field of the form is clicked. */\n    @Output()\n    formContentClicked: EventEmitter<ContentLinkModel> = new EventEmitter<ContentLinkModel>();\n\n    @ViewChild('outcomesContainer', {})\n    outcomesContainer: ElementRef = null;\n\n    constructor(formService: FormService,\n                visibilityService: WidgetVisibilityService,\n                formRenderingService: FormRenderingService) {\n        super(formService, visibilityService, null, null, formRenderingService);\n        this.showTitle = false;\n    }\n\n    ngOnInit() {\n        this.subscriptions.push(\n            this.formService.formContentClicked.subscribe((content) => {\n                this.formContentClicked.emit(content);\n            }),\n            this.formService.validateForm.subscribe((validateFormEvent: ValidateFormEvent) => {\n                if (validateFormEvent.errorsField.length > 0) {\n                    this.formError.next(validateFormEvent.errorsField);\n                }\n            })\n        );\n    }\n\n    ngOnDestroy() {\n        this.subscriptions.forEach((subscription) => subscription.unsubscribe());\n        this.subscriptions = [];\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const processDefinitionId = changes['processDefinitionId'];\n        if (processDefinitionId && processDefinitionId.currentValue) {\n            this.visibilityService.cleanProcessVariable();\n            this.getStartFormDefinition(processDefinitionId.currentValue);\n            return;\n        }\n\n        const processId = changes['processId'];\n        if (processId && processId.currentValue) {\n            this.visibilityService.cleanProcessVariable();\n            this.loadStartForm(processId.currentValue);\n            return;\n        }\n    }\n\n    loadStartForm(processId: string) {\n        this.formService.getProcessInstance(processId)\n            .subscribe((instance: any) => {\n                this.formService\n                    .getStartFormInstance(processId)\n                    .subscribe(\n                        (form) => {\n                            this.formName = form.name;\n                            if (instance.variables) {\n                                form.processVariables = instance.variables;\n                            }\n                            this.form = this.parseForm(form);\n                            this.visibilityService.refreshVisibility(this.form);\n                            this.form.validateForm();\n                            this.form.readOnly = this.readOnlyForm;\n                            this.onFormLoaded(this.form);\n                        },\n                        (error) => this.handleError(error)\n                    );\n            });\n    }\n\n    getStartFormDefinition(processId: string) {\n        this.formService\n            .getStartFormDefinition(processId)\n            .subscribe(\n                (form) => {\n                    this.formName = form.processDefinitionName;\n                    this.form = this.parseForm(form);\n                    this.visibilityService.refreshVisibility(this.form);\n                    this.form.validateForm();\n                    this.form.readOnly = this.readOnlyForm;\n                    this.onFormLoaded(this.form);\n                },\n                (error) => this.handleError(error)\n            );\n    }\n\n    /** @override */\n    isOutcomeButtonVisible(outcome: FormOutcomeModel, isFormReadOnly: boolean): boolean {\n        if (outcome && outcome.isSystem && (outcome.name === FormOutcomeModel.SAVE_ACTION ||\n            outcome.name === FormOutcomeModel.COMPLETE_ACTION)) {\n            return false;\n        } else if (outcome && outcome.name === FormOutcomeModel.START_PROCESS_ACTION) {\n            return true;\n        }\n        return super.isOutcomeButtonVisible(outcome, isFormReadOnly);\n    }\n\n    /** @override */\n    saveTaskForm() {\n        // do nothing\n    }\n\n    /** @override */\n    onRefreshClicked() {\n        if (this.processDefinitionId) {\n            this.visibilityService.cleanProcessVariable();\n            this.getStartFormDefinition(this.processDefinitionId);\n        } else if (this.processId) {\n            this.visibilityService.cleanProcessVariable();\n            this.loadStartForm(this.processId);\n        }\n    }\n\n    completeTaskForm(outcome?: string) {\n        this.outcomeClick.emit(outcome);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\nimport { CoreModule } from '@alfresco/adf-core';\nimport { FormComponent } from './form.component';\nimport { StartFormComponent } from './start-form.component';\n\n@NgModule({\n    imports: [\n        CoreModule.forChild(),\n        MaterialModule\n    ],\n    declarations: [\n        FormComponent,\n        StartFormComponent\n    ],\n    exports: [\n        FormComponent,\n        StartFormComponent\n    ]\n})\nexport class FormModule {}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { CoreModule } from '@alfresco/adf-core';\nimport { ProcessCommentsModule } from '../process-comments/process-comments.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { MaterialModule } from '../material.module';\nimport { PeopleModule } from '../people/people.module';\nimport { ContentWidgetModule } from '../content-widget/content-widget.module';\n\nimport { ChecklistComponent } from './components/checklist.component';\nimport { NoTaskDetailsTemplateDirective } from './components/no-task-detail-template.directive';\nimport { StartTaskComponent } from './components/start-task.component';\nimport { TaskAuditDirective } from './components/task-audit.directive';\nimport { TaskDetailsComponent } from './components/task-details.component';\nimport { TaskFiltersComponent } from './components/task-filters.component';\nimport { TaskHeaderComponent } from './components/task-header.component';\nimport { TaskListComponent } from './components/task-list.component';\nimport { TaskStandaloneComponent } from './components/task-standalone.component';\nimport { AttachFormComponent } from './components/attach-form.component';\nimport { FormModule } from '../form/form.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FlexLayoutModule,\n        MaterialModule,\n        FormsModule,\n        FormModule,\n        ReactiveFormsModule,\n        CoreModule.forChild(),\n        PeopleModule,\n        ProcessCommentsModule,\n        ContentWidgetModule\n    ],\n    declarations: [\n        NoTaskDetailsTemplateDirective,\n        TaskFiltersComponent,\n        TaskListComponent,\n        TaskDetailsComponent,\n        TaskAuditDirective,\n        ChecklistComponent,\n        TaskHeaderComponent,\n        StartTaskComponent,\n        TaskStandaloneComponent,\n        AttachFormComponent\n    ],\n    exports: [\n        NoTaskDetailsTemplateDirective,\n        TaskFiltersComponent,\n        TaskListComponent,\n        TaskDetailsComponent,\n        TaskAuditDirective,\n        ChecklistComponent,\n        TaskHeaderComponent,\n        StartTaskComponent,\n        TaskStandaloneComponent,\n        AttachFormComponent\n    ]\n})\nexport class TaskListModule {\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogService } from '@alfresco/adf-core';\nimport { DatePipe } from '@angular/common';\nimport { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material';\nimport { Observable, Observer } from 'rxjs';\nimport { TaskDetailsEvent, TaskDetailsModel } from '../../task-list';\nimport { ProcessInstance } from '../models/process-instance.model';\nimport { ProcessService } from './../services/process.service';\nimport { share } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-process-instance-tasks',\n    templateUrl: './process-instance-tasks.component.html',\n    styleUrls: ['./process-instance-tasks.component.css']\n})\nexport class ProcessInstanceTasksComponent implements OnInit, OnChanges {\n\n    /** (**required**) The ID of the process instance to display tasks for. */\n    @Input()\n    processInstanceDetails: ProcessInstance;\n\n    /** Toggles whether to show a refresh button next to the list of tasks to allow\n     * it to be updated from the server.\n     */\n    @Input()\n    showRefreshButton: boolean = true;\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    activeTasks: TaskDetailsModel[] = [];\n    completedTasks: TaskDetailsModel[] = [];\n\n    private taskObserver: Observer<TaskDetailsModel>;\n    private completedTaskObserver: Observer<TaskDetailsModel>;\n\n    task$: Observable<TaskDetailsModel>;\n    completedTask$: Observable<TaskDetailsModel>;\n\n    message: string;\n    processId: string;\n\n    @ViewChild('startDialog')\n    startDialog: any;\n\n    @ViewChild('taskDetails')\n    taskDetails: any;\n\n    /** Emitted when a task is clicked. */\n    @Output()\n    taskClick: EventEmitter<TaskDetailsEvent> = new EventEmitter<TaskDetailsEvent>();\n\n    constructor(private activitiProcess: ProcessService,\n                private logService: LogService,\n                private dialog: MatDialog) {\n        this.task$ = new Observable<TaskDetailsModel>((observer) => this.taskObserver = observer)\n            .pipe(share());\n        this.completedTask$ = new Observable<TaskDetailsModel>((observer) => this.completedTaskObserver = observer)\n            .pipe(share());\n    }\n\n    ngOnInit() {\n        this.task$.subscribe((task: TaskDetailsModel) => {\n            this.activeTasks.push(task);\n        });\n        this.completedTask$.subscribe((task: TaskDetailsModel) => {\n            this.completedTasks.push(task);\n        });\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const processInstanceDetails = changes['processInstanceDetails'];\n        if (processInstanceDetails && processInstanceDetails.currentValue) {\n            this.load(processInstanceDetails.currentValue.id);\n        }\n    }\n\n    load(processInstanceId: string) {\n        this.loadActive(processInstanceId);\n        this.loadCompleted(processInstanceId);\n    }\n\n    loadActive(processInstanceId: string) {\n        this.activeTasks = [];\n        if (processInstanceId) {\n            this.activitiProcess.getProcessTasks(processInstanceId, null).subscribe(\n                (res: TaskDetailsModel[]) => {\n                    res.forEach((task) => {\n                        this.taskObserver.next(task);\n                    });\n                },\n                (err) => {\n                    this.error.emit(err);\n                }\n            );\n        } else {\n            this.activeTasks = [];\n        }\n    }\n\n    loadCompleted(processInstanceId: string) {\n        this.completedTasks = [];\n        if (processInstanceId) {\n            this.activitiProcess.getProcessTasks(processInstanceId, 'completed').subscribe(\n                (res: TaskDetailsModel[]) => {\n                    res.forEach((task) => {\n                        this.completedTaskObserver.next(task);\n                    });\n                },\n                (err) => {\n                    this.error.emit(err);\n                }\n            );\n        } else {\n            this.completedTasks = [];\n        }\n    }\n\n    hasStartFormDefined(): boolean {\n        return this.processInstanceDetails && this.processInstanceDetails.startFormDefined === true;\n    }\n\n    getUserFullName(user: any) {\n        if (user) {\n            return (user.firstName && user.firstName !== 'null'\n                    ? user.firstName + ' ' : '') +\n                user.lastName;\n        }\n        return 'Nobody';\n    }\n\n    getFormatDate(value, format: string) {\n        const datePipe = new DatePipe('en-US');\n        try {\n            return datePipe.transform(value, format);\n        } catch (err) {\n            this.logService.error(`ProcessListInstanceTask: error parsing date ${value} to format ${format}`);\n        }\n    }\n\n    clickTask($event: any, task: TaskDetailsModel) {\n        const args = new TaskDetailsEvent(task);\n        this.taskClick.emit(args);\n    }\n\n    clickStartTask() {\n        this.processId = this.processInstanceDetails.id;\n        this.showStartDialog();\n    }\n\n    showStartDialog() {\n        this.dialog.open(this.startDialog, { height: '500px', width: '700px' });\n    }\n\n    closeStartDialog() {\n        this.dialog.closeAll();\n    }\n\n    onRefreshClicked() {\n        this.load(this.processInstanceDetails.id);\n    }\n\n    onFormContentClick() {\n        this.closeStartDialog();\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport let processPresetsDefaultModel = {\n    'default': [\n        {\n            'key': 'name',\n            'type': 'text',\n            'title': 'ADF_PROCESS_LIST.PROPERTIES.NAME',\n            'sortable': true\n        },\n        {\n            'key': 'created',\n            'type': 'text',\n            'title': 'ADF_PROCESS_LIST.PROPERTIES.CREATED',\n            'cssClass': 'hidden',\n            'sortable': true\n        }\n    ]\n};\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    DataTableSchema,\n    DataRowEvent,\n    DataTableAdapter,\n    CustomEmptyContentTemplateDirective,\n    CustomLoadingContentTemplateDirective\n} from '@alfresco/adf-core';\nimport {\n    AppConfigService,\n    PaginatedComponent,\n    PaginationComponent,\n    PaginationModel,\n    UserPreferencesService\n} from '@alfresco/adf-core';\nimport { DatePipe } from '@angular/common';\nimport {\n    AfterContentInit,\n    Component,\n    ContentChild,\n    EventEmitter,\n    Input,\n    OnChanges,\n    Output,\n    SimpleChanges\n} from '@angular/core';\nimport { ProcessFilterParamRepresentationModel } from '../models/filter-process.model';\nimport { processPresetsDefaultModel } from '../models/process-preset.model';\nimport { ProcessService } from '../services/process.service';\nimport { BehaviorSubject } from 'rxjs';\nimport { ProcessListModel } from '../models/process-list.model';\nimport moment from 'moment-es6';\n\n@Component({\n    selector: 'adf-process-instance-list',\n    styleUrls: ['./process-list.component.css'],\n    templateUrl: './process-list.component.html'\n})\nexport class ProcessInstanceListComponent extends DataTableSchema  implements OnChanges, AfterContentInit, PaginatedComponent {\n\n    static PRESET_KEY = 'adf-process-list.presets';\n    public FORMAT_DATE: string = 'll';\n\n    @ContentChild(CustomEmptyContentTemplateDirective)\n    customEmptyContent: CustomEmptyContentTemplateDirective;\n\n    @ContentChild(CustomLoadingContentTemplateDirective)\n    customLoadingContent: CustomLoadingContentTemplateDirective;\n\n    /** The id of the app. */\n    @Input()\n    appId: number;\n\n    /** The Definition Id of the process. */\n    @Input()\n    processDefinitionId: string;\n\n    /** The id of the process instance. */\n    @Input()\n    processInstanceId: number|string;\n\n    /** Defines the state of the processes. Possible values are `running`, `completed` and `all` */\n    @Input()\n    state: string;\n\n    /** Defines the sort ordering of the list. Possible values are `created-desc`, `created-asc`,\n     * `ended-desc`, `ended-asc`.\n     */\n    @Input()\n    sort: string;\n\n    /** The page number of the processes to fetch. */\n    @Input()\n    page: number = 0;\n\n    /** The number of processes to fetch in each page. */\n    @Input()\n    size: number = PaginationComponent.DEFAULT_PAGINATION.maxItems;\n\n    /** Data source to define the datatable. */\n    @Input()\n    data: DataTableAdapter;\n\n    /** Toggles multiple row selection, which renders checkboxes at the beginning of each row */\n    @Input()\n    multiselect: boolean = false;\n\n    /** Row selection mode. Can be none, `single` or `multiple`. For `multiple` mode,\n     * you can use Cmd (macOS) or Ctrl (Win) modifier key to toggle selection for\n     * multiple rows.\n     */\n    @Input()\n    selectionMode: string = 'single'; // none|single|multiple\n\n    /** Toggles default selection of the first row */\n    @Input()\n    selectFirstRow: boolean = true;\n\n    /** Emitted when a row in the process list is clicked. */\n    @Output()\n    rowClick: EventEmitter<string> = new EventEmitter<string>();\n\n    /** Emitted when the list of process instances has been loaded successfully from the server. */\n    @Output()\n    success: EventEmitter<ProcessListModel> = new EventEmitter<ProcessListModel>();\n\n    /** Emitted when an error occurs while loading the list of process instances from the server. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    requestNode: ProcessFilterParamRepresentationModel;\n    currentInstanceId: string;\n    isLoading: boolean = true;\n    rows: any[] = [];\n    sorting: any[] = ['created', 'desc'];\n\n    pagination: BehaviorSubject<PaginationModel>;\n\n    constructor(private processService: ProcessService,\n                private userPreferences: UserPreferencesService,\n                appConfig: AppConfigService) {\n        super(appConfig, ProcessInstanceListComponent.PRESET_KEY, processPresetsDefaultModel);\n        this.size = this.userPreferences.paginationSize;\n\n        this.pagination = new BehaviorSubject<PaginationModel>(<PaginationModel> {\n            maxItems: this.size,\n            skipCount: 0,\n            totalItems: 0\n        });\n    }\n\n    ngAfterContentInit() {\n        this.createDatatableSchema();\n        if (this.data && this.data.getColumns().length === 0) {\n            this.data.setColumns(this.columns);\n        }\n\n        if (this.appId != null) {\n            this.reload();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.isPropertyChanged(changes)) {\n            if (this.isSortChanged(changes)) {\n                this.sorting = this.sort ? this.sort.split('-') : this.sorting;\n            }\n            this.reload();\n        }\n    }\n\n    private isSortChanged(changes: SimpleChanges): boolean {\n        const actualSort = changes['sort'];\n        return actualSort && actualSort.currentValue && actualSort.currentValue !== actualSort.previousValue;\n    }\n\n    private isPropertyChanged(changes: SimpleChanges): boolean {\n        let changed: boolean = false;\n\n        const appId = changes['appId'];\n        const processDefinitionId = changes['processDefinitionId'];\n        const processInstanceId = changes['processInstanceId'];\n        const state = changes['state'];\n        const sort = changes['sort'];\n        const page = changes['page'];\n        const size = changes['size'];\n\n        if (appId && appId.currentValue) {\n            changed = true;\n        } else if (processDefinitionId) {\n            changed = true;\n        } else if (processInstanceId) {\n            changed = true;\n        } else if (state && state.currentValue) {\n            changed = true;\n        } else if (sort && sort.currentValue) {\n            changed = true;\n        } else if (page && page.currentValue !== page.previousValue) {\n            changed = true;\n        } else if (size && size.currentValue !== size.previousValue) {\n            changed = true;\n        }\n        return changed;\n    }\n\n    public reload() {\n        this.requestNode = this.createRequestNode();\n        this.load(this.requestNode);\n    }\n\n    private load(requestNode: ProcessFilterParamRepresentationModel) {\n        this.isLoading = true;\n        this.processService.getProcesses(requestNode)\n            .subscribe(\n                (response) => {\n                    this.rows = this.optimizeProcessDetails(response.data);\n                    this.selectFirst();\n                    this.success.emit(response);\n                    this.isLoading = false;\n                    this.pagination.next({\n                        count: response.data.length,\n                        maxItems: this.size,\n                        skipCount: this.page * this.size,\n                        totalItems: response.total\n                    });\n                },\n                (error) => {\n                    this.error.emit(error);\n                    this.isLoading = false;\n                });\n    }\n\n    /**\n     * Select the first instance of a list if present\n     */\n    selectFirst() {\n        if (this.selectFirstRow) {\n            if (!this.isListEmpty()) {\n                const dataRow = this.rows[0];\n                dataRow.isSelected = true;\n                this.currentInstanceId = dataRow['id'];\n            } else {\n                this.currentInstanceId = null;\n            }\n        }\n    }\n\n    /**\n     * Return the current id\n     */\n    getCurrentId(): string {\n        return this.currentInstanceId;\n    }\n\n    /**\n     * Check if the list is empty\n     */\n    isListEmpty(): boolean {\n        return !this.rows || this.rows.length === 0;\n    }\n\n    /**\n     * Emit the event rowClick passing the current task id when the row is clicked\n     * @param event\n     */\n    onRowClick(event: DataRowEvent) {\n        const item = event;\n        this.currentInstanceId = item.value.getValue('id');\n        this.rowClick.emit(this.currentInstanceId);\n    }\n\n    /**\n     * Emit the event rowClick passing the current task id when pressed the Enter key on the selected row\n     * @param event\n     */\n    onRowKeyUp(event: CustomEvent) {\n        if (event.detail.keyboardEvent.key === 'Enter') {\n            event.preventDefault();\n            this.currentInstanceId = event.detail.row.getValue('id');\n            this.rowClick.emit(this.currentInstanceId);\n        }\n    }\n\n    /**\n     * Optimize name field\n     * @param instances\n     */\n    private optimizeProcessDetails(instances: any[]): any[] {\n        instances = instances.map((instance) => {\n            instance.name = this.getProcessNameOrDescription(instance, 'medium');\n            if (instance.started) {\n                instance.started = moment(instance.started).format(this.FORMAT_DATE);\n            }\n            return instance;\n        });\n        return instances;\n    }\n\n    getProcessNameOrDescription(processInstance, dateFormat): string {\n        let name = '';\n        if (processInstance) {\n            name = processInstance.name ||\n                processInstance.processDefinitionName + ' - ' + this.getFormatDate(processInstance.started, dateFormat);\n        }\n        return name;\n    }\n\n    getFormatDate(value, format: string) {\n        const datePipe = new DatePipe('en-US');\n        try {\n            return datePipe.transform(value, format);\n        } catch (err) {\n            return '';\n        }\n    }\n\n    private createRequestNode() {\n        const requestNode = {\n            appDefinitionId: this.appId,\n            processDefinitionId: this.processDefinitionId,\n            processInstanceId: this.processInstanceId,\n            state: this.state,\n            sort: this.sort,\n            page: this.page,\n            size: this.size,\n            start: 0\n        };\n        return new ProcessFilterParamRepresentationModel(requestNode);\n    }\n\n    updatePagination(params: PaginationModel) {\n        const needsReload = params.maxItems || params.skipCount;\n        this.size = params.maxItems;\n        this.page = this.currentPage(params.skipCount, params.maxItems);\n        if (needsReload) {\n            this.reload();\n        }\n    }\n\n    currentPage(skipCount: number, maxItems: number): number {\n        return (skipCount && maxItems) ? Math.floor(skipCount / maxItems) : 0;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    Component, EventEmitter, Input, OnChanges, OnInit,\n    Output, SimpleChanges, ViewChild, ViewEncapsulation\n} from '@angular/core';\nimport {\n    ActivitiContentService, AppConfigService, AppConfigValues,\n    FormValues\n} from '@alfresco/adf-core';\nimport { ProcessInstanceVariable } from '../models/process-instance-variable.model';\nimport { ProcessDefinitionRepresentation } from './../models/process-definition.model';\nimport { ProcessInstance } from './../models/process-instance.model';\nimport { ProcessService } from './../services/process.service';\nimport { FormControl, Validators, AbstractControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { MatAutocompleteTrigger } from '@angular/material';\nimport { StartFormComponent } from '../../form';\n\n@Component({\n    selector: 'adf-start-process',\n    templateUrl: './start-process.component.html',\n    styleUrls: ['./start-process.component.scss'],\n    encapsulation: ViewEncapsulation.None\n})\nexport class StartProcessInstanceComponent implements OnChanges, OnInit {\n\n    MAX_LENGTH: number = 255;\n\n    /** (optional) Limit the list of processes that can be started to those\n     * contained in the specified app.\n     */\n    @Input()\n    appId: number;\n\n    /** (optional) Definition name of the process to start. */\n    @Input()\n    processDefinitionName: string;\n\n    /** Variables in the input to the process\n     * [RestVariable](https://github.com/Alfresco/alfresco-js-api/tree/master/src/alfresco-activiti-rest-api/docs/RestVariable.md).\n     */\n    @Input()\n    variables: ProcessInstanceVariable[];\n\n    /** Parameter to pass form field values in the start form if one is associated. */\n    @Input()\n    values: FormValues;\n\n    /** (optional) Name to assign to the current process. */\n    @Input()\n    name: string = '';\n\n    /** Hide or show the process selection dropdown. */\n    @Input()\n    showSelectProcessDropdown: boolean = true;\n\n    /** (optional) Parameter to enable selection of process when filtering. */\n    @Input()\n    processFilterSelector: boolean = true;\n\n    /** Emitted when the process starts. */\n    @Output()\n    start: EventEmitter<ProcessInstance> = new EventEmitter<ProcessInstance>();\n\n    /** Emitted when the process is canceled. */\n    @Output()\n    cancel: EventEmitter<ProcessInstance> = new EventEmitter<ProcessInstance>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<ProcessInstance> = new EventEmitter<ProcessInstance>();\n\n    @ViewChild('startForm')\n    startForm: StartFormComponent;\n\n    @ViewChild(MatAutocompleteTrigger)\n    inputAutocomplete: MatAutocompleteTrigger;\n\n    processDefinitions: ProcessDefinitionRepresentation[] = [];\n    selectedProcessDef: ProcessDefinitionRepresentation = new ProcessDefinitionRepresentation();\n    errorMessageId: string = '';\n    processNameInput: FormControl;\n    processDefinitionInput: FormControl;\n    filteredProcesses: Observable<ProcessDefinitionRepresentation[]>;\n    maxProcessNameLength: number = this.MAX_LENGTH;\n\n    constructor(private activitiProcess: ProcessService,\n                private activitiContentService: ActivitiContentService,\n                private appConfig: AppConfigService) {\n        }\n\n    ngOnInit() {\n        this.processNameInput = new FormControl(this.name, [Validators.required, Validators.maxLength(this.maxProcessNameLength)]);\n        this.processDefinitionInput = new FormControl();\n\n        this.loadStartProcess();\n\n        this.processNameInput.valueChanges.subscribe((name) => this.name = name);\n        this.filteredProcesses = this.processDefinitionInput.valueChanges\n            .pipe(\n                map((value) => this._filter(value))\n            );\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['values'] && changes['values'].currentValue) {\n            this.moveNodeFromCStoPS();\n        }\n\n        if (changes['appId'] && changes['appId'].currentValue) {\n            this.appId = changes['appId'].currentValue;\n        }\n\n        this.loadStartProcess();\n    }\n\n    private _filter(value: string): ProcessDefinitionRepresentation[] {\n        if (value !== null && value !== undefined) {\n            const filterValue = value.toLowerCase();\n            const filteredProcess = this.processDefinitions.filter((option) => option.name.toLowerCase().includes(filterValue));\n\n            if (this.processFilterSelector) {\n                this.selectedProcessDef = this.getSelectedProcess(filterValue);\n            }\n            return filteredProcess;\n        }\n    }\n\n    getSelectedProcess(selectedProcess) {\n        let processSelected = this.processDefinitions.find((process) => process.name.toLowerCase() === selectedProcess);\n\n        if (!processSelected) {\n            processSelected = new ProcessDefinitionRepresentation();\n        }\n        return processSelected;\n    }\n\n    public loadStartProcess() {\n        this.resetSelectedProcessDefinition();\n        this.resetErrorMessage();\n\n        this.activitiProcess.getProcessDefinitions(this.appId).subscribe(\n            (processDefinitionRepresentations: ProcessDefinitionRepresentation[]) => {\n                this.processDefinitions = processDefinitionRepresentations;\n\n                if (!this.isProcessDefinitionsEmpty()) {\n\n                    if (this.processDefinitions.length === 1) {\n                        this.selectedProcessDef = this.processDefinitions[0];\n                    }\n\n                    if (this.processDefinitionName) {\n                        const selectedProcess = this.processDefinitions.find((currentProcessDefinition) => {\n                            return currentProcessDefinition.name === this.processDefinitionName;\n                        });\n                        if (selectedProcess) {\n                            this.selectedProcessDef = selectedProcess;\n                        }\n                    }\n\n                    this.processDefinitionInput.setValue(this.selectedProcessDef.name);\n                }\n            },\n            () => {\n                this.errorMessageId = 'ADF_PROCESS_LIST.START_PROCESS.ERROR.LOAD_PROCESS_DEFS';\n            });\n    }\n\n    isProcessDefinitionsEmpty(): boolean {\n        return this.processDefinitions.length === 0;\n    }\n\n    getAlfrescoRepositoryName(): string {\n        let alfrescoRepositoryName = this.appConfig.get<string>(AppConfigValues.ALFRESCO_REPOSITORY_NAME);\n        if (!alfrescoRepositoryName) {\n            alfrescoRepositoryName = 'alfresco-1';\n        }\n        return alfrescoRepositoryName + 'Alfresco';\n    }\n\n    moveNodeFromCStoPS() {\n        const accountIdentifier = this.getAlfrescoRepositoryName();\n\n        for (const key in this.values) {\n            if (this.values.hasOwnProperty(key)) {\n                const currentValue = this.values[key];\n\n                if (currentValue.isFile) {\n                    this.activitiContentService.applyAlfrescoNode(currentValue, null, accountIdentifier).subscribe((res) => {\n                        this.values[key] = [res];\n                    });\n                }\n            }\n        }\n    }\n\n    public startProcess(outcome?: string) {\n        if (this.selectedProcessDef && this.selectedProcessDef.id && this.name) {\n            this.resetErrorMessage();\n            const formValues = this.startForm ? this.startForm.form.values : undefined;\n            this.activitiProcess.startProcess(this.selectedProcessDef.id, this.name, outcome, formValues, this.variables).subscribe(\n                (res) => {\n                    this.name = '';\n                    this.start.emit(res);\n                },\n                (err) => {\n                    this.errorMessageId = 'ADF_PROCESS_LIST.START_PROCESS.ERROR.START';\n                    this.error.error(err);\n                }\n            );\n        }\n    }\n\n    public cancelStartProcess() {\n        this.cancel.emit();\n    }\n\n    hasStartForm(): boolean {\n        return this.selectedProcessDef && this.selectedProcessDef.hasStartForm;\n    }\n\n    isProcessDefinitionEmpty() {\n        return this.processDefinitions ? (this.processDefinitions.length > 0 || this.errorMessageId) : this.errorMessageId;\n    }\n\n    isStartFormMissingOrValid(): boolean {\n        if (this.startForm) {\n            return this.startForm.form && this.startForm.form.isValid;\n        } else {\n            return true;\n        }\n    }\n\n    validateForm(): boolean {\n        return this.selectedProcessDef && this.selectedProcessDef.id && this.processNameInput.valid && this.isStartFormMissingOrValid();\n    }\n\n    private resetSelectedProcessDefinition() {\n        this.selectedProcessDef = new ProcessDefinitionRepresentation();\n    }\n\n    private resetErrorMessage(): void {\n        this.errorMessageId = '';\n    }\n\n    hasErrorMessage(): boolean {\n        return this.processDefinitions.length === 0 && !this.errorMessageId;\n    }\n\n    public onOutcomeClick(outcome: string) {\n        this.startProcess(outcome);\n    }\n\n    public reset() {\n        this.resetSelectedProcessDefinition();\n        this.name = '';\n        if (this.startForm) {\n            this.startForm.data = {};\n        }\n        this.resetErrorMessage();\n    }\n\n    hasProcessName(): boolean {\n        return this.name ? true : false;\n    }\n\n    displayFn(process: any) {\n        if (process) {\n            let processName = process;\n            if (typeof process !== 'string') {\n                processName = process.name;\n            }\n            return processName;\n        }\n    }\n\n    displayDropdown(event) {\n        event.stopPropagation();\n        if (!this.inputAutocomplete.panelOpen) {\n            this.processDefinitionInput.setValue('');\n            this.inputAutocomplete.openPanel();\n        } else {\n            this.inputAutocomplete.closePanel();\n        }\n    }\n\n    get nameController(): AbstractControl {\n        return this.processNameInput;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class ProcessFilterRequestRepresentation {\n    processDefinitionId: string;\n    appDefinitionId: string;\n    state: string;\n    sort: string;\n    page: number;\n    size: number;\n\n    constructor(obj?: any) {\n        this.processDefinitionId = obj && obj.processDefinitionId || null;\n        this.appDefinitionId = obj && obj.appDefinitionId || null;\n        this.state = obj && obj.state || null;\n        this.sort = obj && obj.sort || null;\n        this.page = obj && obj.page || 0;\n        this.size = obj && obj.size || 25;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CoreModule } from '@alfresco/adf-core';\nimport { MaterialModule } from '../material.module';\nimport { ProcessCommentsModule } from '../process-comments/process-comments.module';\nimport { TaskListModule } from '../task-list/task-list.module';\nimport { PeopleModule } from '../people/people.module';\nimport { ContentWidgetModule } from '../content-widget/content-widget.module';\n\nimport { ProcessAuditDirective } from './components/process-audit.directive';\nimport { ProcessFiltersComponent } from './components/process-filters.component';\nimport { ProcessInstanceDetailsComponent } from './components/process-instance-details.component';\nimport { ProcessInstanceHeaderComponent } from './components/process-instance-header.component';\nimport { ProcessInstanceTasksComponent } from './components/process-instance-tasks.component';\nimport { ProcessInstanceListComponent } from './components/process-list.component';\nimport { StartProcessInstanceComponent } from './components/start-process.component';\nimport { FormModule } from '../form/form.module';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        MaterialModule,\n        FlexLayoutModule,\n        FormsModule,\n        ReactiveFormsModule,\n        CoreModule.forChild(),\n        TaskListModule,\n        PeopleModule,\n        ContentWidgetModule,\n        ProcessCommentsModule,\n        FormModule\n    ],\n    declarations: [\n        ProcessInstanceListComponent,\n        ProcessFiltersComponent,\n        ProcessInstanceDetailsComponent,\n        ProcessAuditDirective,\n        ProcessInstanceHeaderComponent,\n        ProcessInstanceTasksComponent,\n        StartProcessInstanceComponent\n    ],\n    exports: [\n        ProcessInstanceListComponent,\n        ProcessFiltersComponent,\n        ProcessInstanceDetailsComponent,\n        ProcessAuditDirective,\n        ProcessInstanceHeaderComponent,\n        ProcessInstanceTasksComponent,\n        StartProcessInstanceComponent\n    ]\n})\nexport class ProcessListModule {\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppsProcessService, TranslationService, CustomEmptyContentTemplateDirective } from '@alfresco/adf-core';\nimport { AfterContentInit, Component, EventEmitter, Input, OnInit, Output, ContentChild } from '@angular/core';\nimport { Observable, Observer, of } from 'rxjs';\nimport { AppDefinitionRepresentationModel } from '../task-list';\nimport { IconModel } from './icon.model';\nimport { share } from 'rxjs/operators';\n\n@Component({\n    selector: 'adf-apps',\n    templateUrl: 'apps-list.component.html',\n    styleUrls: ['./apps-list.component.scss']\n})\nexport class AppsListComponent implements OnInit, AfterContentInit {\n\n    public static LAYOUT_LIST: string = 'LIST';\n    public static LAYOUT_GRID: string = 'GRID';\n    public static DEFAULT_TASKS_APP: string = 'tasks';\n    public static DEFAULT_TASKS_APP_NAME: string = 'ADF_TASK_LIST.APPS.TASK_APP_NAME';\n    public static DEFAULT_TASKS_APP_THEME: string = 'theme-2';\n    public static DEFAULT_TASKS_APP_ICON: string = 'glyphicon-asterisk';\n    public static DEFAULT_TASKS_APP_MATERIAL_ICON: string = 'favorite_border';\n\n    @ContentChild(CustomEmptyContentTemplateDirective)\n    emptyCustomContent: CustomEmptyContentTemplateDirective;\n\n    /** (**required**) Defines the layout of the apps. There are two possible\n     * values, \"GRID\" and \"LIST\".\n     */\n    @Input()\n    layoutType: string = AppsListComponent.LAYOUT_GRID;\n\n    /** Provides a way to filter the apps to show. */\n    @Input()\n    filtersAppId: any[];\n\n    /** Emitted when an app entry is clicked. */\n    @Output()\n    appClick: EventEmitter<AppDefinitionRepresentationModel> = new EventEmitter<AppDefinitionRepresentationModel>();\n\n    /** Emitted when an error occurs. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    private appsObserver: Observer<AppDefinitionRepresentationModel>;\n    apps$: Observable<AppDefinitionRepresentationModel>;\n\n    currentApp: AppDefinitionRepresentationModel;\n\n    appList: AppDefinitionRepresentationModel [] = [];\n\n    private iconsMDL: IconModel;\n\n    loading: boolean = false;\n\n    hasEmptyCustomContentTemplate: boolean = false;\n\n    constructor(\n        private appsProcessService: AppsProcessService,\n        private translationService: TranslationService) {\n            this.apps$ = new Observable<AppDefinitionRepresentationModel>((observer) => this.appsObserver = observer)\n                .pipe(share());\n    }\n\n    ngOnInit() {\n        if (!this.isValidType()) {\n            this.setDefaultLayoutType();\n        }\n\n        this.apps$.subscribe((app: any) => {\n            this.appList.push(app);\n        });\n        this.iconsMDL = new IconModel();\n        this.load();\n    }\n\n    ngAfterContentInit() {\n        if (this.emptyCustomContent) {\n            this.hasEmptyCustomContentTemplate = true;\n        }\n    }\n\n    private load() {\n        this.loading = true;\n        this.appsProcessService.getDeployedApplications()\n        .subscribe(\n            (res: AppDefinitionRepresentationModel[]) => {\n                this.filterApps(res).forEach((app: AppDefinitionRepresentationModel) => {\n                    if (this.isDefaultApp(app)) {\n                        app.theme = AppsListComponent.DEFAULT_TASKS_APP_THEME;\n                        app.icon = AppsListComponent.DEFAULT_TASKS_APP_ICON;\n                        this.appsObserver.next(app);\n                    } else if (app.deploymentId) {\n                        this.appsObserver.next(app);\n                    }\n                    this.loading = false;\n                });\n            },\n            (err) => {\n                this.error.emit(err);\n                this.loading = false;\n            }\n        );\n    }\n\n    isDefaultApp(app) {\n        return app.defaultAppId === AppsListComponent.DEFAULT_TASKS_APP;\n    }\n\n    getAppName(app) {\n        return this.isDefaultApp(app)\n            ? this.translationService.get(AppsListComponent.DEFAULT_TASKS_APP_NAME)\n            : of(app.name);\n    }\n\n    /**\n     * Pass the selected app as next\n     * @param app\n     */\n    public selectApp(app: AppDefinitionRepresentationModel) {\n        this.currentApp = app;\n        this.appClick.emit(app);\n    }\n\n    /**\n     * Return true if the appId is the current app\n     * @param appId\n     */\n    isSelected(appId: number): boolean {\n        return (this.currentApp !== undefined && appId === this.currentApp.id);\n    }\n\n    private filterApps(apps: AppDefinitionRepresentationModel []): AppDefinitionRepresentationModel[] {\n        const filteredApps: AppDefinitionRepresentationModel[] = [];\n        if (this.filtersAppId) {\n            apps.filter((app: AppDefinitionRepresentationModel) => {\n                this.filtersAppId.forEach((filter) => {\n                    if (app.defaultAppId === filter.defaultAppId ||\n                        app.deploymentId === filter.deploymentId ||\n                        app.name === filter.name ||\n                        app.id === filter.id ||\n                        app.modelId === filter.modelId ||\n                        app.tenantId === filter.tenantId) {\n                        filteredApps.push(app);\n                    }\n                });\n            });\n        } else {\n            return apps;\n        }\n        return filteredApps;\n    }\n\n    /**\n     * Check if the value of the layoutType property is an allowed value\n     */\n    isValidType(): boolean {\n        if (this.layoutType && (this.layoutType === AppsListComponent.LAYOUT_LIST || this.layoutType === AppsListComponent.LAYOUT_GRID)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Assign the default value to LayoutType\n     */\n    setDefaultLayoutType(): void {\n        this.layoutType = AppsListComponent.LAYOUT_GRID;\n    }\n\n    /**\n     * Return true if the layout type is LIST\n     */\n    isList(): boolean {\n        return this.layoutType === AppsListComponent.LAYOUT_LIST;\n    }\n\n    /**\n     * Return true if the layout type is GRID\n     */\n    isGrid(): boolean {\n        return this.layoutType === AppsListComponent.LAYOUT_GRID;\n    }\n\n    isEmpty(): boolean {\n        return this.appList.length === 0;\n    }\n\n    isLoading(): boolean {\n        return this.loading;\n    }\n\n    getTheme(app: AppDefinitionRepresentationModel): string {\n        return app.theme ? app.theme : '';\n    }\n\n    getBackgroundIcon(app: AppDefinitionRepresentationModel): string {\n        return this.iconsMDL.mapGlyphiconToMaterialDesignIcons(app.icon);\n    }\n\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AppsProcessService } from '@alfresco/adf-core';\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material';\n\n@Component({\n    selector: 'adf-select-apps-dialog',\n    templateUrl: 'select-apps-dialog-component.html'\n})\nexport class SelectAppsDialogComponent {\n\n    processApps: any;\n\n    selectedProcess: any;\n\n    constructor(private appsProcessService: AppsProcessService,\n                public dialogRef: MatDialogRef<SelectAppsDialogComponent>,\n                @Inject(MAT_DIALOG_DATA) public data: any) {\n\n        this.appsProcessService.getDeployedApplications().subscribe(\n            (apps: any[]) => {\n                this.processApps = apps.filter((currentApp) => {\n                    return currentApp.id;\n                });\n            }\n        );\n    }\n\n    onStart(): void {\n        this.dialogRef.close(this.selectedProcess);\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\nimport { CoreModule } from '@alfresco/adf-core';\n\nimport { AppsListComponent } from './apps-list.component';\nimport { SelectAppsDialogComponent } from './select-apps-dialog-component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        MaterialModule,\n        FlexLayoutModule,\n        CoreModule.forChild()\n    ],\n    declarations: [\n        AppsListComponent,\n        SelectAppsDialogComponent\n    ],\n    exports: [\n        AppsListComponent,\n        SelectAppsDialogComponent\n    ],\n    entryComponents: [\n        SelectAppsDialogComponent\n    ]\n})\nexport class AppsListModule {\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ContentService, ThumbnailService, EmptyListComponent } from '@alfresco/adf-core';\nimport {\n    AfterContentInit,\n    ContentChild,\n    Component,\n    EventEmitter,\n    Input,\n    NgZone,\n    OnChanges,\n    Output,\n    SimpleChanges,\n    ViewEncapsulation\n} from '@angular/core';\nimport { ProcessContentService } from '@alfresco/adf-core';\n\n@Component({\n    selector: 'adf-task-attachment-list',\n    styleUrls: ['./task-attachment-list.component.scss'],\n    templateUrl: './task-attachment-list.component.html',\n    encapsulation: ViewEncapsulation.None\n})\nexport class TaskAttachmentListComponent implements OnChanges, AfterContentInit {\n\n    @ContentChild(EmptyListComponent)\n    emptyTemplate: EmptyListComponent;\n\n    /** (**required**) The ID of the task to display. */\n    @Input()\n    taskId: string;\n\n    /** Disable/Enable read only mode for attachment list. */\n    @Input()\n    disabled: boolean = false;\n\n    /** Emitted when the attachment is double-clicked or a view\n     * option is selected from the context menu by the user from within the component.\n     * Returns a Blob representing the clicked object.\n     */\n    @Output()\n    attachmentClick = new EventEmitter();\n\n    /** Emitted when the attachment list has fetched all the attachments.\n     * Returns a list of attachments.\n     */\n    @Output()\n    success = new EventEmitter();\n\n    /** Emitted when an error occurs while fetching the attachments. */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    hasCustomTemplate: boolean = false;\n\n    attachments: any[] = [];\n    isLoading: boolean = false;\n\n    constructor(private activitiContentService: ProcessContentService,\n                private contentService: ContentService,\n                private thumbnailService: ThumbnailService,\n                private ngZone: NgZone) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['taskId'] && changes['taskId'].currentValue) {\n            this.loadAttachmentsByTaskId(changes['taskId'].currentValue);\n        }\n    }\n\n    ngAfterContentInit() {\n        if (this.emptyTemplate) {\n            this.hasCustomTemplate = true;\n        }\n    }\n\n    reset(): void {\n        this.attachments = [];\n    }\n\n    hasCustomEmptyTemplate() {\n        return !!this.emptyTemplate;\n    }\n\n    reload(): void {\n        this.ngZone.run(() => {\n            this.loadAttachmentsByTaskId(this.taskId);\n        });\n    }\n\n    add(content: any): void {\n        this.ngZone.run(() => {\n            this.attachments.push({\n                id: content.id,\n                name: content.name,\n                created: content.created,\n                createdBy: content.createdBy.firstName + ' ' + content.createdBy.lastName,\n                icon: this.thumbnailService.getMimeTypeIcon(content.mimeType)\n            });\n        });\n    }\n\n    private loadAttachmentsByTaskId(taskId: string) {\n        if (taskId) {\n            this.isLoading = true;\n            this.reset();\n            const opts = 'true';\n            this.activitiContentService.getTaskRelatedContent(taskId, opts).subscribe(\n                (res: any) => {\n                    const attachList = [];\n                    res.data.forEach((content) => {\n                        attachList.push({\n                            id: content.id,\n                            name: content.name,\n                            created: content.created,\n                            createdBy: content.createdBy.firstName + ' ' + content.createdBy.lastName,\n                            icon: this.thumbnailService.getMimeTypeIcon(content.mimeType)\n                        });\n                    });\n                    this.attachments = attachList;\n                    this.success.emit(this.attachments);\n                    this.isLoading = false;\n                },\n                (err) => {\n                    this.error.emit(err);\n                    this.isLoading = false;\n                });\n        }\n    }\n\n    deleteAttachmentById(contentId: number) {\n        if (contentId) {\n            this.activitiContentService.deleteRelatedContent(contentId).subscribe(\n                (res: any) => {\n                    this.attachments = this.attachments.filter((content) => {\n                        return content.id !== contentId;\n                    });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        }\n    }\n\n    isEmpty(): boolean {\n        return this.attachments && this.attachments.length === 0;\n    }\n\n    onShowRowActionsMenu(event: any) {\n        const viewAction = {\n            title: 'ADF_TASK_LIST.MENU_ACTIONS.VIEW_CONTENT',\n            name: 'view'\n        };\n\n        const removeAction = {\n            title: 'ADF_TASK_LIST.MENU_ACTIONS.REMOVE_CONTENT',\n            name: 'remove'\n        };\n\n        const downloadAction = {\n            title: 'ADF_TASK_LIST.MENU_ACTIONS.DOWNLOAD_CONTENT',\n            name: 'download'\n        };\n\n        event.value.actions = [\n            viewAction,\n            downloadAction\n        ];\n\n        if (!this.disabled) {\n            event.value.actions.splice(1, 0, removeAction);\n        }\n    }\n\n    onExecuteRowAction(event: any) {\n        const args = event.value;\n        const action = args.action;\n        if (action.name === 'view') {\n            this.emitDocumentContent(args.row.obj);\n        } else if (action.name === 'remove') {\n            this.deleteAttachmentById(args.row.obj.id);\n        } else if (action.name === 'download') {\n            this.downloadContent(args.row.obj);\n        }\n    }\n\n    openContent(event: any): void {\n        const content = event.value.obj;\n        this.emitDocumentContent(content);\n    }\n\n    emitDocumentContent(content: any) {\n        this.activitiContentService.getFileRawContent(content.id).subscribe(\n            (blob: Blob) => {\n                content.contentBlob = blob;\n                this.attachmentClick.emit(content);\n            },\n            (err) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    downloadContent(content: any): void {\n        this.activitiContentService.getFileRawContent(content.id).subscribe(\n            (blob: Blob) => this.contentService.downloadBlob(blob, content.name),\n            (err) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    isDisabled(): boolean {\n        return this.disabled;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ContentService, EmptyListComponent , ThumbnailService } from '@alfresco/adf-core';\nimport { AfterContentInit, ContentChild, Component, EventEmitter, Input, NgZone, OnChanges, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\nimport { ProcessContentService } from '@alfresco/adf-core';\n\n@Component({\n    selector: 'adf-process-attachment-list',\n    styleUrls: ['./process-attachment-list.component.scss'],\n    templateUrl: './process-attachment-list.component.html',\n    encapsulation: ViewEncapsulation.None\n})\nexport class ProcessAttachmentListComponent implements OnChanges, AfterContentInit {\n\n    @ContentChild(EmptyListComponent)\n    emptyTemplate: EmptyListComponent;\n\n    /** (**required**) The ID of the process instance to display. */\n    @Input()\n    processInstanceId: string;\n\n    /** Disable/Enable read-only mode for attachment list. */\n    @Input()\n    disabled: boolean = false;\n\n    /** Emitted when the attachment is double-clicked or the\n     * view option is selected from the context menu by the user from\n     * within the component. Returns a Blob representing the object\n     * that was clicked.\n     */\n    @Output()\n    attachmentClick = new EventEmitter();\n\n    /** Emitted when the attachment list has fetched all the attachments.\n     * Returns a list of attachments.\n     */\n    @Output()\n    success = new EventEmitter();\n\n    /** Emitted when the attachment list is not able to fetch the attachments\n     * (eg, following a network error).\n     */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    hasCustomTemplate: boolean = false;\n\n    attachments: any[] = [];\n    isLoading: boolean = false;\n\n    constructor(private activitiContentService: ProcessContentService,\n                private contentService: ContentService,\n                private thumbnailService: ThumbnailService,\n                private ngZone: NgZone) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['processInstanceId'] && changes['processInstanceId'].currentValue) {\n            this.loadAttachmentsByProcessInstanceId(changes['processInstanceId'].currentValue);\n        }\n    }\n\n    ngAfterContentInit() {\n        if (this.emptyTemplate) {\n            this.hasCustomTemplate = true;\n        }\n    }\n\n    reset() {\n        this.attachments = [];\n    }\n\n    reload(): void {\n        this.ngZone.run(() => {\n            this.loadAttachmentsByProcessInstanceId(this.processInstanceId);\n        });\n    }\n\n    hasCustomEmptyTemplate() {\n        return !!this.emptyTemplate;\n    }\n\n    add(content: any): void {\n        this.ngZone.run(() => {\n            this.attachments.push({\n                id: content.id,\n                name: content.name,\n                created: content.created,\n                createdBy: content.createdBy.firstName + ' ' + content.createdBy.lastName,\n                icon: this.thumbnailService.getMimeTypeIcon(content.mimeType)\n            });\n        });\n    }\n\n    private loadAttachmentsByProcessInstanceId(processInstanceId: string) {\n        if (processInstanceId) {\n            this.reset();\n            this.isLoading = true;\n            const opts: string =  'true';\n            this.activitiContentService.getProcessRelatedContent(processInstanceId, opts).subscribe(\n                (res: any) => {\n                    res.data.forEach((content) => {\n                        this.attachments.push({\n                            id: content.id,\n                            name: content.name,\n                            created: content.created,\n                            createdBy: content.createdBy.firstName + ' ' + content.createdBy.lastName,\n                            icon: this.thumbnailService.getMimeTypeIcon(content.mimeType)\n                        });\n                    });\n                    this.success.emit(this.attachments);\n                    this.isLoading = false;\n                },\n                (err) => {\n                    this.error.emit(err);\n                    this.isLoading = false;\n                });\n        }\n    }\n\n    private deleteAttachmentById(contentId: number) {\n        if (contentId) {\n            this.activitiContentService.deleteRelatedContent(contentId).subscribe(\n                (res: any) => {\n                    this.attachments = this.attachments.filter((content) => {\n                        return content.id !== contentId;\n                    });\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        }\n    }\n\n    isEmpty(): boolean {\n        return this.attachments && this.attachments.length === 0;\n    }\n\n    onShowRowActionsMenu(event: any) {\n        const viewAction = {\n            title: 'ADF_PROCESS_LIST.MENU_ACTIONS.VIEW_CONTENT',\n            name: 'view'\n        };\n\n        const removeAction = {\n            title: 'ADF_PROCESS_LIST.MENU_ACTIONS.REMOVE_CONTENT',\n            name: 'remove'\n        };\n\n        const downloadAction = {\n            title: 'ADF_PROCESS_LIST.MENU_ACTIONS.DOWNLOAD_CONTENT',\n            name: 'download'\n        };\n\n        event.value.actions = [\n            viewAction,\n            downloadAction\n        ];\n\n        if (!this.disabled) {\n            event.value.actions.splice(1, 0, removeAction);\n        }\n    }\n\n    onExecuteRowAction(event: any) {\n        const args = event.value;\n        const action = args.action;\n        if (action.name === 'view') {\n            this.emitDocumentContent(args.row.obj);\n        } else if (action.name === 'remove') {\n            this.deleteAttachmentById(args.row.obj.id);\n        } else if (action.name === 'download') {\n            this.downloadContent(args.row.obj);\n        }\n    }\n\n    openContent(event: any): void {\n        const content = event.value.obj;\n        this.emitDocumentContent(content);\n    }\n\n    emitDocumentContent(content: any) {\n        this.activitiContentService.getFileRawContent(content.id).subscribe(\n            (blob: Blob) => {\n                content.contentBlob = blob;\n                this.attachmentClick.emit(content);\n            },\n            (err) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    downloadContent(content: any): void {\n        this.activitiContentService.getFileRawContent(content.id).subscribe(\n            (blob: Blob) => this.contentService.downloadBlob(blob, content.name),\n            (err) => {\n                this.error.emit(err);\n            }\n        );\n    }\n\n    isDisabled(): boolean {\n        return this.disabled;\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { ProcessContentService } from '@alfresco/adf-core';\n\n@Component({\n    selector: 'adf-create-process-attachment',\n    styleUrls: ['./create-process-attachment.component.css'],\n    templateUrl: './create-process-attachment.component.html'\n})\nexport class CreateProcessAttachmentComponent implements OnChanges {\n\n    /** (required) The ID of the process instance to display. */\n    @Input()\n    processInstanceId: string;\n\n    /** Emitted when an error occurs while creating or uploading an attachment\n     * from the user within the component.\n     */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an attachment is successfully created or uploaded\n     * from within the component.\n     */\n    @Output()\n    success: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(private activitiContentService: ProcessContentService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['processInstanceId'] && changes['processInstanceId'].currentValue) {\n            this.processInstanceId = changes['processInstanceId'].currentValue;\n        }\n    }\n\n    onFileUpload(event: any) {\n        const filesList: File[] = event.detail.files.map((obj) => obj.file);\n\n        for (const fileInfoObj of filesList) {\n            const file: File = fileInfoObj;\n            const opts = {\n                isRelatedContent: true\n            };\n            this.activitiContentService.createProcessRelatedContent(this.processInstanceId, file, opts).subscribe(\n                (res) => {\n                    this.success.emit(res);\n                },\n                (err) => {\n                    this.error.emit(err);\n                });\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { ProcessContentService } from '@alfresco/adf-core';\n\n@Component({\n    selector: 'adf-create-task-attachment',\n    styleUrls: ['./create-task-attachment.component.scss'],\n    templateUrl: './create-task-attachment.component.html'\n})\nexport class AttachmentComponent implements OnChanges {\n\n    /** (required) The numeric ID of the task to display. */\n    @Input()\n    taskId: string;\n\n    /** Emitted when an error occurs while creating or uploading an\n     *  attachment from the user within the component.\n     */\n    @Output()\n    error: EventEmitter<any> = new EventEmitter<any>();\n\n    /** Emitted when an attachment is created or uploaded successfully\n     * from within the component.\n     */\n    @Output()\n    success: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(private activitiContentService: ProcessContentService) {\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['taskId'] && changes['taskId'].currentValue) {\n            this.taskId = changes['taskId'].currentValue;\n        }\n    }\n\n    onFileUpload(event: any) {\n        const filesList: File[] = event.detail.files.map((obj) => obj.file);\n\n        for (const fileInfoObj of filesList) {\n            const file: File = fileInfoObj;\n            const opts = {\n                isRelatedContent: true\n            };\n            this.activitiContentService.createTaskRelatedContent(this.taskId, file, opts).subscribe(\n                (res) => {\n                    this.success.emit(res);\n                },\n                (err) => {\n                    this.error.emit(err);\n                }\n            );\n        }\n    }\n}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from '@angular/core';\nimport { MaterialModule } from '../material.module';\n\nimport { TaskAttachmentListComponent } from './task-attachment-list.component';\nimport { ProcessAttachmentListComponent } from './process-attachment-list.component';\nimport { CreateProcessAttachmentComponent } from './create-process-attachment.component';\nimport { AttachmentComponent } from './create-task-attachment.component';\nimport { CoreModule } from '@alfresco/adf-core';\n\n@NgModule({\n    imports: [\n        CoreModule.forChild(),\n        MaterialModule\n    ],\n    declarations: [\n        TaskAttachmentListComponent,\n        ProcessAttachmentListComponent,\n        CreateProcessAttachmentComponent,\n        CreateProcessAttachmentComponent,\n        AttachmentComponent\n    ],\n    exports: [\n        TaskAttachmentListComponent,\n        ProcessAttachmentListComponent,\n        CreateProcessAttachmentComponent,\n        CreateProcessAttachmentComponent,\n        AttachmentComponent\n    ]\n})\nexport class AttachmentModule {}\n","/*!\n * @license\n * Copyright 2019 Alfresco Software, Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CoreModule, TRANSLATION_PROVIDER } from '@alfresco/adf-core';\n\nimport { MaterialModule } from './material.module';\n\nimport { ProcessListModule } from './process-list/process-list.module';\nimport { TaskListModule } from './task-list/task-list.module';\nimport { AppsListModule } from './app-list/apps-list.module';\nimport { ProcessCommentsModule } from './process-comments/process-comments.module';\nimport { AttachmentModule } from './attachment/attachment.module';\nimport { PeopleModule } from './people/people.module';\nimport { FormModule } from './form/form.module';\n\n@NgModule({\n    imports: [\n        CoreModule.forChild(),\n        CommonModule,\n        ProcessCommentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MaterialModule,\n        ProcessListModule,\n        TaskListModule,\n        AppsListModule,\n        AttachmentModule,\n        PeopleModule,\n        FormModule\n    ],\n    providers: [\n        {\n            provide: TRANSLATION_PROVIDER,\n            multi: true,\n            useValue: {\n                name: 'adf-process-services',\n                source: 'assets/adf-process-services'\n            }\n        }\n    ],\n    exports: [\n        CommonModule,\n        ProcessCommentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        ProcessListModule,\n        TaskListModule,\n        AppsListModule,\n        AttachmentModule,\n        PeopleModule,\n        FormModule\n    ]\n})\nexport class ProcessModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: ProcessModule,\n            providers: [\n                {\n                    provide: TRANSLATION_PROVIDER,\n                    multi: true,\n                    useValue: {\n                        name: 'adf-process-services',\n                        source: 'assets/adf-process-services'\n                    }\n                }\n            ]\n        };\n    }\n\n    static forChild(): ModuleWithProviders {\n        return {\n            ngModule: ProcessModuleLazy\n        };\n    }\n}\n\n@NgModule({\n    imports: [\n        CoreModule.forChild(),\n        CommonModule,\n        ProcessCommentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MaterialModule,\n        ProcessListModule,\n        TaskListModule,\n        AppsListModule,\n        AttachmentModule,\n        PeopleModule\n    ],\n    exports: [\n        CommonModule,\n        ProcessCommentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        ProcessListModule,\n        TaskListModule,\n        AppsListModule,\n        AttachmentModule,\n        PeopleModule\n    ]\n})\nexport class ProcessModuleLazy {}\n"]}