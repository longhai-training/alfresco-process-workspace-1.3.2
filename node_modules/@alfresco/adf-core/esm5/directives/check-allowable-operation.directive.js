/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/* tslint:disable:no-input-rename  */
import { ChangeDetectorRef, Directive, ElementRef, Host, Inject, Input, Optional, Renderer2 } from '@angular/core';
import { ContentService } from './../services/content.service';
import { EXTENDIBLE_COMPONENT } from './../interface/injection.tokens';
/**
 * @record
 */
export function NodeAllowableOperationSubject() { }
if (false) {
    /** @type {?} */
    NodeAllowableOperationSubject.prototype.disabled;
}
var CheckAllowableOperationDirective = /** @class */ (function () {
    function CheckAllowableOperationDirective(elementRef, renderer, contentService, changeDetector, parentComponent) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        this.contentService = contentService;
        this.changeDetector = changeDetector;
        this.parentComponent = parentComponent;
        /**
         * Node permission to check (create, delete, update, updatePermissions,
         * !create, !delete, !update, !updatePermissions).
         */
        this.permission = null;
        /**
         * Nodes to check permission for.
         */
        this.nodes = [];
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.nodes && !changes.nodes.firstChange) {
            this.updateElement();
        }
    };
    /**
     * Updates disabled state for the decorated element
     *
     * @memberof CheckAllowableOperationDirective
     */
    /**
     * Updates disabled state for the decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.updateElement = /**
     * Updates disabled state for the decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    function () {
        /** @type {?} */
        var enable = this.hasAllowableOperations(this.nodes, this.permission);
        if (enable) {
            this.enable();
        }
        else {
            this.disable();
        }
        return enable;
    };
    /**
     * @private
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.enable = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.parentComponent) {
            this.parentComponent.disabled = false;
            this.changeDetector.detectChanges();
        }
        else {
            this.enableElement();
        }
    };
    /**
     * @private
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.disable = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.parentComponent) {
            this.parentComponent.disabled = true;
            this.changeDetector.detectChanges();
        }
        else {
            this.disableElement();
        }
    };
    /**
     * Enables decorated element
     *
     * @memberof CheckAllowableOperationDirective
     */
    /**
     * Enables decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.enableElement = /**
     * Enables decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    function () {
        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');
    };
    /**
     * Disables decorated element
     *
     * @memberof CheckAllowableOperationDirective
     */
    /**
     * Disables decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.disableElement = /**
     * Disables decorated element
     *
     * \@memberof CheckAllowableOperationDirective
     * @return {?}
     */
    function () {
        this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'true');
    };
    /**
     * Checks whether all nodes have a particular permission
     *
     * @param  nodes Node collection to check
     * @param  permission Permission to check for each node
     * @memberof CheckAllowableOperationDirective
     */
    /**
     * Checks whether all nodes have a particular permission
     *
     * \@memberof CheckAllowableOperationDirective
     * @param {?} nodes Node collection to check
     * @param {?} permission Permission to check for each node
     * @return {?}
     */
    CheckAllowableOperationDirective.prototype.hasAllowableOperations = /**
     * Checks whether all nodes have a particular permission
     *
     * \@memberof CheckAllowableOperationDirective
     * @param {?} nodes Node collection to check
     * @param {?} permission Permission to check for each node
     * @return {?}
     */
    function (nodes, permission) {
        var _this = this;
        if (nodes && nodes.length > 0) {
            return nodes.every((/**
             * @param {?} node
             * @return {?}
             */
            function (node) { return _this.contentService.hasAllowableOperations(node.entry, permission); }));
        }
        return false;
    };
    CheckAllowableOperationDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[adf-check-allowable-operation]'
                },] }
    ];
    /** @nocollapse */
    CheckAllowableOperationDirective.ctorParameters = function () { return [
        { type: ElementRef },
        { type: Renderer2 },
        { type: ContentService },
        { type: ChangeDetectorRef },
        { type: undefined, decorators: [{ type: Host }, { type: Optional }, { type: Inject, args: [EXTENDIBLE_COMPONENT,] }] }
    ]; };
    CheckAllowableOperationDirective.propDecorators = {
        permission: [{ type: Input, args: ['adf-check-allowable-operation',] }],
        nodes: [{ type: Input, args: ['adf-nodes',] }]
    };
    return CheckAllowableOperationDirective;
}());
export { CheckAllowableOperationDirective };
if (false) {
    /**
     * Node permission to check (create, delete, update, updatePermissions,
     * !create, !delete, !update, !updatePermissions).
     * @type {?}
     */
    CheckAllowableOperationDirective.prototype.permission;
    /**
     * Nodes to check permission for.
     * @type {?}
     */
    CheckAllowableOperationDirective.prototype.nodes;
    /**
     * @type {?}
     * @private
     */
    CheckAllowableOperationDirective.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    CheckAllowableOperationDirective.prototype.renderer;
    /**
     * @type {?}
     * @private
     */
    CheckAllowableOperationDirective.prototype.contentService;
    /**
     * @type {?}
     * @private
     */
    CheckAllowableOperationDirective.prototype.changeDetector;
    /**
     * @type {?}
     * @private
     */
    CheckAllowableOperationDirective.prototype.parentComponent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2stYWxsb3dhYmxlLW9wZXJhdGlvbi5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLWNvcmUvIiwic291cmNlcyI6WyJkaXJlY3RpdmVzL2NoZWNrLWFsbG93YWJsZS1vcGVyYXRpb24uZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBYSxRQUFRLEVBQUUsU0FBUyxFQUFrQixNQUFNLGVBQWUsQ0FBQztBQUU5SSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDL0QsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0saUNBQWlDLENBQUM7Ozs7QUFFdkUsbURBRUM7OztJQURHLGlEQUFrQjs7QUFHdEI7SUFlSSwwQ0FBb0IsVUFBc0IsRUFDdEIsUUFBbUIsRUFDbkIsY0FBOEIsRUFDOUIsY0FBaUMsRUFJSCxlQUErQztRQVA3RSxlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQUlILG9CQUFlLEdBQWYsZUFBZSxDQUFnQzs7Ozs7UUFiakcsZUFBVSxHQUFZLElBQUksQ0FBQzs7OztRQUkzQixVQUFLLEdBQWdCLEVBQUUsQ0FBQztJQVV4QixDQUFDOzs7OztJQUVELHNEQUFXOzs7O0lBQVgsVUFBWSxPQUFzQjtRQUM5QixJQUFJLE9BQU8sQ0FBQyxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRTtZQUM3QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDeEI7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRzs7Ozs7OztJQUNILHdEQUFhOzs7Ozs7SUFBYjs7WUFDVSxNQUFNLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUV2RSxJQUFJLE1BQU0sRUFBRTtZQUNSLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUNqQjthQUFNO1lBQ0gsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1NBQ2xCO1FBRUQsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7Ozs7SUFFTyxpREFBTTs7OztJQUFkO1FBQ0ksSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUN0QyxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3ZDO2FBQU07WUFDSCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDeEI7SUFDTCxDQUFDOzs7OztJQUVPLGtEQUFPOzs7O0lBQWY7UUFDSSxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdkM7YUFBTTtZQUNILElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUN6QjtJQUNMLENBQUM7SUFFRDs7OztPQUlHOzs7Ozs7O0lBQ0gsd0RBQWE7Ozs7OztJQUFiO1FBQ0ksSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVEOzs7O09BSUc7Ozs7Ozs7SUFDSCx5REFBYzs7Ozs7O0lBQWQ7UUFDSSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUVEOzs7Ozs7T0FNRzs7Ozs7Ozs7O0lBQ0gsaUVBQXNCOzs7Ozs7OztJQUF0QixVQUF1QixLQUFrQixFQUFFLFVBQWtCO1FBQTdELGlCQU1DO1FBTEcsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDM0IsT0FBTyxLQUFLLENBQUMsS0FBSzs7OztZQUFDLFVBQUMsSUFBSSxJQUFLLE9BQUEsS0FBSSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxFQUFsRSxDQUFrRSxFQUFDLENBQUM7U0FDcEc7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDOztnQkFqR0osU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBRSxpQ0FBaUM7aUJBQzlDOzs7O2dCQVhzQyxVQUFVO2dCQUE0QyxTQUFTO2dCQUU3RixjQUFjO2dCQUZkLGlCQUFpQjtnREE2QlQsSUFBSSxZQUNKLFFBQVEsWUFDUixNQUFNLFNBQUMsb0JBQW9COzs7NkJBZHZDLEtBQUssU0FBQywrQkFBK0I7d0JBSXJDLEtBQUssU0FBQyxXQUFXOztJQXNGdEIsdUNBQUM7Q0FBQSxBQWxHRCxJQWtHQztTQS9GWSxnQ0FBZ0M7Ozs7Ozs7SUFLekMsc0RBQzJCOzs7OztJQUczQixpREFDd0I7Ozs7O0lBRVosc0RBQThCOzs7OztJQUM5QixvREFBMkI7Ozs7O0lBQzNCLDBEQUFzQzs7Ozs7SUFDdEMsMERBQXlDOzs7OztJQUV6QywyREFFcUYiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1pbnB1dC1yZW5hbWUgICovXG5cbmltcG9ydCB7IENoYW5nZURldGVjdG9yUmVmLCBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEhvc3QsIEluamVjdCwgSW5wdXQsIE9uQ2hhbmdlcywgT3B0aW9uYWwsIFJlbmRlcmVyMiwgIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5vZGVFbnRyeSB9IGZyb20gJ0BhbGZyZXNjby9qcy1hcGknO1xuaW1wb3J0IHsgQ29udGVudFNlcnZpY2UgfSBmcm9tICcuLy4uL3NlcnZpY2VzL2NvbnRlbnQuc2VydmljZSc7XG5pbXBvcnQgeyBFWFRFTkRJQkxFX0NPTVBPTkVOVCB9IGZyb20gJy4vLi4vaW50ZXJmYWNlL2luamVjdGlvbi50b2tlbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vZGVBbGxvd2FibGVPcGVyYXRpb25TdWJqZWN0IHtcbiAgICBkaXNhYmxlZDogYm9vbGVhbjtcbn1cblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbYWRmLWNoZWNrLWFsbG93YWJsZS1vcGVyYXRpb25dJ1xufSlcbmV4cG9ydCBjbGFzcyBDaGVja0FsbG93YWJsZU9wZXJhdGlvbkRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG5cbiAgICAvKiogTm9kZSBwZXJtaXNzaW9uIHRvIGNoZWNrIChjcmVhdGUsIGRlbGV0ZSwgdXBkYXRlLCB1cGRhdGVQZXJtaXNzaW9ucyxcbiAgICAgKiAhY3JlYXRlLCAhZGVsZXRlLCAhdXBkYXRlLCAhdXBkYXRlUGVybWlzc2lvbnMpLlxuICAgICAqL1xuICAgIEBJbnB1dCgnYWRmLWNoZWNrLWFsbG93YWJsZS1vcGVyYXRpb24nKVxuICAgIHBlcm1pc3Npb246IHN0cmluZyAgPSBudWxsO1xuXG4gICAgLyoqIE5vZGVzIHRvIGNoZWNrIHBlcm1pc3Npb24gZm9yLiAqL1xuICAgIEBJbnB1dCgnYWRmLW5vZGVzJylcbiAgICBub2RlczogTm9kZUVudHJ5W10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICAgICAgICAgICAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb250ZW50U2VydmljZTogQ29udGVudFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG5cbiAgICAgICAgICAgICAgICBASG9zdCgpXG4gICAgICAgICAgICAgICAgQE9wdGlvbmFsKClcbiAgICAgICAgICAgICAgICBASW5qZWN0KEVYVEVORElCTEVfQ09NUE9ORU5UKSBwcml2YXRlIHBhcmVudENvbXBvbmVudD86IE5vZGVBbGxvd2FibGVPcGVyYXRpb25TdWJqZWN0KSB7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy5ub2RlcyAmJiAhY2hhbmdlcy5ub2Rlcy5maXJzdENoYW5nZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGRpc2FibGVkIHN0YXRlIGZvciB0aGUgZGVjb3JhdGVkIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBDaGVja0FsbG93YWJsZU9wZXJhdGlvbkRpcmVjdGl2ZVxuICAgICAqL1xuICAgIHVwZGF0ZUVsZW1lbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGVuYWJsZSA9IHRoaXMuaGFzQWxsb3dhYmxlT3BlcmF0aW9ucyh0aGlzLm5vZGVzLCB0aGlzLnBlcm1pc3Npb24pO1xuXG4gICAgICAgIGlmIChlbmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbmFibGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmFibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRDb21wb25lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRpc2FibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnBhcmVudENvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRDb21wb25lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIGRlY29yYXRlZCBlbGVtZW50XG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgQ2hlY2tBbGxvd2FibGVPcGVyYXRpb25EaXJlY3RpdmVcbiAgICAgKi9cbiAgICBlbmFibGVFbGVtZW50KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2Rpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgZGVjb3JhdGVkIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBtZW1iZXJvZiBDaGVja0FsbG93YWJsZU9wZXJhdGlvbkRpcmVjdGl2ZVxuICAgICAqL1xuICAgIGRpc2FibGVFbGVtZW50KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciBhbGwgbm9kZXMgaGF2ZSBhIHBhcnRpY3VsYXIgcGVybWlzc2lvblxuICAgICAqXG4gICAgICogQHBhcmFtICBub2RlcyBOb2RlIGNvbGxlY3Rpb24gdG8gY2hlY2tcbiAgICAgKiBAcGFyYW0gIHBlcm1pc3Npb24gUGVybWlzc2lvbiB0byBjaGVjayBmb3IgZWFjaCBub2RlXG4gICAgICogQG1lbWJlcm9mIENoZWNrQWxsb3dhYmxlT3BlcmF0aW9uRGlyZWN0aXZlXG4gICAgICovXG4gICAgaGFzQWxsb3dhYmxlT3BlcmF0aW9ucyhub2RlczogTm9kZUVudHJ5W10sIHBlcm1pc3Npb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAobm9kZXMgJiYgbm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLmV2ZXJ5KChub2RlKSA9PiB0aGlzLmNvbnRlbnRTZXJ2aWNlLmhhc0FsbG93YWJsZU9wZXJhdGlvbnMobm9kZS5lbnRyeSwgcGVybWlzc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiJdfQ==