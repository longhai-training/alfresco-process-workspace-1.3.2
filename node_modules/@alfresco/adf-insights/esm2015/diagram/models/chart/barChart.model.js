/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import moment from 'moment-es6';
import { Chart } from './chart.model';
export class BarChart extends Chart {
    /**
     * @param {?=} obj
     */
    constructor(obj) {
        super(obj);
        this.labels = [];
        this.datasets = [];
        this.data = [];
        this.options = {
            responsive: true,
            scales: {
                yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            stepSize: 1
                        }
                    }],
                xAxes: [{
                        ticks: {},
                        stacked: false
                    }]
            }
        };
        this.xAxisTickFormatFunction = (/**
         * @param {?} xAxisType
         * @return {?}
         */
        function (xAxisType) {
            return (/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (xAxisType !== null && xAxisType !== undefined) {
                    if ('date_day' === xAxisType) {
                        return moment(new Date(value)).format('DD');
                    }
                    else if ('date_month' === xAxisType) {
                        return moment(new Date(value)).format('MMMM');
                    }
                    else if ('date_year' === xAxisType) {
                        return moment(new Date(value)).format('YYYY');
                    }
                }
                return value;
            });
        });
        this.yAxisTickFormatFunction = (/**
         * @param {?} yAxisType
         * @return {?}
         */
        function (yAxisType) {
            return (/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (yAxisType !== null && yAxisType !== undefined) {
                    if ('count' === yAxisType) {
                        /** @type {?} */
                        const label = '' + value;
                        if (label.indexOf('.') !== -1) {
                            return '';
                        }
                    }
                }
                return value;
            });
        });
        this.title = obj && obj.title || null;
        this.titleKey = obj && obj.titleKey || null;
        this.xAxisType = obj && obj.xAxisType || null;
        this.yAxisType = obj && obj.yAxisType || null;
        this.options.scales.xAxes[0].ticks.callback = this.xAxisTickFormatFunction(this.xAxisType);
        this.options.scales.yAxes[0].ticks.callback = this.yAxisTickFormatFunction(this.yAxisType);
        if (obj.values) {
            obj.values.forEach((/**
             * @param {?} params
             * @return {?}
             */
            (params) => {
                /** @type {?} */
                const dataValue = [];
                params.values.forEach((/**
                 * @param {?} info
                 * @return {?}
                 */
                (info) => {
                    info.forEach((/**
                     * @param {?} value
                     * @param {?} index
                     * @return {?}
                     */
                    (value, index) => {
                        if (index % 2 === 0) {
                            if (!this.labels.includes(value)) {
                                this.labels.push(value);
                            }
                        }
                        else {
                            dataValue.push(value);
                        }
                    }));
                }));
                if (dataValue && dataValue.length > 0) {
                    this.datasets.push({ data: dataValue, label: params.key });
                }
            }));
        }
    }
    /**
     * @return {?}
     */
    hasDatasets() {
        return this.datasets && this.datasets.length > 0 ? true : false;
    }
}
if (false) {
    /** @type {?} */
    BarChart.prototype.title;
    /** @type {?} */
    BarChart.prototype.titleKey;
    /** @type {?} */
    BarChart.prototype.labels;
    /** @type {?} */
    BarChart.prototype.datasets;
    /** @type {?} */
    BarChart.prototype.data;
    /** @type {?} */
    BarChart.prototype.xAxisType;
    /** @type {?} */
    BarChart.prototype.yAxisType;
    /** @type {?} */
    BarChart.prototype.options;
    /** @type {?} */
    BarChart.prototype.xAxisTickFormatFunction;
    /** @type {?} */
    BarChart.prototype.yAxisTickFormatFunction;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFyQ2hhcnQubW9kZWwuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLWluc2lnaHRzLyIsInNvdXJjZXMiOlsiZGlhZ3JhbS9tb2RlbHMvY2hhcnQvYmFyQ2hhcnQubW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsT0FBTyxNQUFNLE1BQU0sWUFBWSxDQUFDO0FBQ2hDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdEMsTUFBTSxPQUFPLFFBQVMsU0FBUSxLQUFLOzs7O0lBeUIvQixZQUFZLEdBQVM7UUFDakIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBdkJmLFdBQU0sR0FBUSxFQUFFLENBQUM7UUFDakIsYUFBUSxHQUFVLEVBQUUsQ0FBQztRQUNyQixTQUFJLEdBQVUsRUFBRSxDQUFDO1FBR2pCLFlBQU8sR0FBUTtZQUNYLFVBQVUsRUFBRSxJQUFJO1lBQ2hCLE1BQU0sRUFBRTtnQkFDSixLQUFLLEVBQUUsQ0FBQzt3QkFDSixLQUFLLEVBQUU7NEJBQ0gsV0FBVyxFQUFFLElBQUk7NEJBQ2pCLFFBQVEsRUFBRSxDQUFDO3lCQUNkO3FCQUNKLENBQUM7Z0JBQ0YsS0FBSyxFQUFFLENBQUM7d0JBQ0osS0FBSyxFQUFFLEVBQ047d0JBQ0QsT0FBTyxFQUFFLEtBQUs7cUJBQ2pCLENBQUM7YUFDTDtTQUNKLENBQUM7UUErQkYsNEJBQXVCOzs7O1FBQUcsVUFBVSxTQUFTO1lBQ3pDOzs7O1lBQU8sVUFBVSxLQUFLO2dCQUNsQixJQUFJLFNBQVMsS0FBSyxJQUFJLElBQUksU0FBUyxLQUFLLFNBQVMsRUFBRTtvQkFDL0MsSUFBSSxVQUFVLEtBQUssU0FBUyxFQUFFO3dCQUMxQixPQUFPLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztxQkFDL0M7eUJBQU0sSUFBSSxZQUFZLEtBQUss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QztTQUNOO0lBQ0wsQ0FBQzs7OztJQStCRCxXQUFXO1FBQ1AsT0FBTyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDcEUsQ0FBQztDQUNKOzs7SUFyRkcseUJBQWM7O0lBQ2QsNEJBQWlCOztJQUNqQiwwQkFBaUI7O0lBQ2pCLDRCQUFxQjs7SUFDckIsd0JBQWlCOztJQUNqQiw2QkFBa0I7O0lBQ2xCLDZCQUFrQjs7SUFDbEIsMkJBZUU7O0lBK0JGLDJDQWFFOztJQUVGLDJDQVlFIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQtZXM2JztcbmltcG9ydCB7IENoYXJ0IH0gZnJvbSAnLi9jaGFydC5tb2RlbCc7XG5cbmV4cG9ydCBjbGFzcyBCYXJDaGFydCBleHRlbmRzIENoYXJ0IHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHRpdGxlS2V5OiBzdHJpbmc7XG4gICAgbGFiZWxzOiBhbnkgPSBbXTtcbiAgICBkYXRhc2V0czogYW55W10gPSBbXTtcbiAgICBkYXRhOiBhbnlbXSA9IFtdO1xuICAgIHhBeGlzVHlwZTogc3RyaW5nO1xuICAgIHlBeGlzVHlwZTogc3RyaW5nO1xuICAgIG9wdGlvbnM6IGFueSA9IHtcbiAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgc2NhbGVzOiB7XG4gICAgICAgICAgICB5QXhlczogW3tcbiAgICAgICAgICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RlcFNpemU6IDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIHhBeGVzOiBbe1xuICAgICAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdGFja2VkOiBmYWxzZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihvYmo/OiBhbnkpIHtcbiAgICAgICAgc3VwZXIob2JqKTtcbiAgICAgICAgdGhpcy50aXRsZSA9IG9iaiAmJiBvYmoudGl0bGUgfHwgbnVsbDtcbiAgICAgICAgdGhpcy50aXRsZUtleSA9IG9iaiAmJiBvYmoudGl0bGVLZXkgfHwgbnVsbDtcbiAgICAgICAgdGhpcy54QXhpc1R5cGUgPSBvYmogJiYgb2JqLnhBeGlzVHlwZSB8fCBudWxsO1xuICAgICAgICB0aGlzLnlBeGlzVHlwZSA9IG9iaiAmJiBvYmoueUF4aXNUeXBlIHx8IG51bGw7XG4gICAgICAgIHRoaXMub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0udGlja3MuY2FsbGJhY2sgPSB0aGlzLnhBeGlzVGlja0Zvcm1hdEZ1bmN0aW9uKHRoaXMueEF4aXNUeXBlKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnNjYWxlcy55QXhlc1swXS50aWNrcy5jYWxsYmFjayA9IHRoaXMueUF4aXNUaWNrRm9ybWF0RnVuY3Rpb24odGhpcy55QXhpc1R5cGUpO1xuICAgICAgICBpZiAob2JqLnZhbHVlcykge1xuICAgICAgICAgICAgb2JqLnZhbHVlcy5mb3JFYWNoKChwYXJhbXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFWYWx1ZSA9IFtdO1xuICAgICAgICAgICAgICAgIHBhcmFtcy52YWx1ZXMuZm9yRWFjaCgoaW5mbzogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGluZm8uZm9yRWFjaCgodmFsdWU6IGFueSwgaW5kZXg6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5sYWJlbHMuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiZWxzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZhbHVlLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVZhbHVlICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YXNldHMucHVzaCh7ZGF0YTogZGF0YVZhbHVlLCBsYWJlbDogcGFyYW1zLmtleX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgeEF4aXNUaWNrRm9ybWF0RnVuY3Rpb24gPSBmdW5jdGlvbiAoeEF4aXNUeXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh4QXhpc1R5cGUgIT09IG51bGwgJiYgeEF4aXNUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2RhdGVfZGF5JyA9PT0geEF4aXNUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQobmV3IERhdGUodmFsdWUpKS5mb3JtYXQoJ0REJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgnZGF0ZV9tb250aCcgPT09IHhBeGlzVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KG5ldyBEYXRlKHZhbHVlKSkuZm9ybWF0KCdNTU1NJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgnZGF0ZV95ZWFyJyA9PT0geEF4aXNUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb21lbnQobmV3IERhdGUodmFsdWUpKS5mb3JtYXQoJ1lZWVknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHlBeGlzVGlja0Zvcm1hdEZ1bmN0aW9uID0gZnVuY3Rpb24gKHlBeGlzVHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoeUF4aXNUeXBlICE9PSBudWxsICYmIHlBeGlzVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdjb3VudCcgPT09IHlBeGlzVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9ICcnICsgdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbC5pbmRleE9mKCcuJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGhhc0RhdGFzZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhc2V0cyAmJiB0aGlzLmRhdGFzZXRzLmxlbmd0aCA+IDAgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxufVxuIl19