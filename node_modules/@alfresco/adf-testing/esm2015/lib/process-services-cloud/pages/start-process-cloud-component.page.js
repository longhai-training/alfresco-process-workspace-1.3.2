/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { by, element, Key, protractor, browser } from 'protractor';
import { BrowserVisibility } from '../../core/utils/browser-visibility';
export class StartProcessCloudPage {
    constructor() {
        this.defaultProcessName = element(by.css('input[id="processName"]'));
        this.processNameInput = element(by.id('processName'));
        this.selectProcessDropdownArrow = element(by.css('button[id="adf-select-process-dropdown"]'));
        this.cancelProcessButton = element(by.id('cancel_process'));
        this.formStartProcessButton = element(by.css('button[data-automation-id="adf-form-start process"]'));
        this.startProcessButton = element(by.css('button[data-automation-id="btn-start"]'));
        this.noProcess = element(by.id('no-process-message'));
        this.processDefinition = element(by.css('input[id="processDefinitionName"]'));
        this.processDefinitionOptionsPanel = element(by.css('div[class*="processDefinitionOptions"]'));
    }
    /**
     * @return {?}
     */
    checkNoProcessMessage() {
        BrowserVisibility.waitUntilElementIsVisible(this.noProcess);
    }
    /**
     * @return {?}
     */
    pressDownArrowAndEnter() {
        this.processDefinition.sendKeys(protractor.Key.ARROW_DOWN);
        return browser.actions().sendKeys(protractor.Key.ENTER).perform();
    }
    /**
     * @return {?}
     */
    checkNoProcessDefinitionOptionIsDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.processDefinitionOptionsPanel);
    }
    /**
     * @param {?} name
     * @return {?}
     */
    enterProcessName(name) {
        BrowserVisibility.waitUntilElementIsVisible(this.processNameInput);
        this.clearProcessName();
        this.processNameInput.sendKeys(name);
    }
    /**
     * @return {?}
     */
    clearProcessName() {
        BrowserVisibility.waitUntilElementIsVisible(this.processNameInput);
        this.processNameInput.clear();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    selectFromProcessDropdown(name) {
        (/** @type {?} */ (this)).clickProcessDropdownArrow();
        return (/** @type {?} */ (this)).selectOption(name);
    }
    /**
     * @return {?}
     */
    clickProcessDropdownArrow() {
        BrowserVisibility.waitUntilElementIsVisible(this.selectProcessDropdownArrow);
        BrowserVisibility.waitUntilElementIsClickable(this.selectProcessDropdownArrow);
        this.selectProcessDropdownArrow.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    checkOptionIsDisplayed(name) {
        /** @type {?} */
        const selectProcessDropdown = element(by.cssContainingText('.mat-option-text', name));
        BrowserVisibility.waitUntilElementIsVisible(selectProcessDropdown);
        BrowserVisibility.waitUntilElementIsClickable(selectProcessDropdown);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    selectOption(name) {
        /** @type {?} */
        const selectProcessDropdown = element(by.cssContainingText('.mat-option-text', name));
        BrowserVisibility.waitUntilElementIsVisible(selectProcessDropdown);
        BrowserVisibility.waitUntilElementIsClickable(selectProcessDropdown);
        selectProcessDropdown.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    clickCancelProcessButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.cancelProcessButton);
        this.cancelProcessButton.click();
    }
    /**
     * @return {?}
     */
    checkStartProcessButtonIsEnabled() {
        BrowserVisibility.waitUntilElementIsClickable(this.startProcessButton);
        expect(this.startProcessButton.isEnabled()).toBe(true);
    }
    /**
     * @return {?}
     */
    checkStartProcessButtonIsDisabled() {
        expect(this.startProcessButton.isEnabled()).toBe(false);
    }
    /**
     * @return {?}
     */
    clickStartProcessButton() {
        BrowserVisibility.waitUntilElementIsClickable(this.startProcessButton);
        return this.startProcessButton.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @param {?=} elementRef
     * @return {THIS}
     */
    checkValidationErrorIsDisplayed(error, elementRef = 'mat-error') {
        /** @type {?} */
        const errorElement = element(by.cssContainingText(elementRef, error));
        BrowserVisibility.waitUntilElementIsVisible(errorElement);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @return {THIS}
     */
    blur(locator) {
        locator.click();
        locator.sendKeys(Key.TAB);
        return (/** @type {?} */ (this));
    }
    /**
     * @param {?} locator
     * @return {?}
     */
    clearField(locator) {
        BrowserVisibility.waitUntilElementIsVisible(locator);
        locator.getAttribute('value').then((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            for (let i = result.length; i >= 0; i--) {
                locator.sendKeys(protractor.Key.BACK_SPACE);
            }
        }));
    }
}
if (false) {
    /** @type {?} */
    StartProcessCloudPage.prototype.defaultProcessName;
    /** @type {?} */
    StartProcessCloudPage.prototype.processNameInput;
    /** @type {?} */
    StartProcessCloudPage.prototype.selectProcessDropdownArrow;
    /** @type {?} */
    StartProcessCloudPage.prototype.cancelProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.formStartProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.startProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.noProcess;
    /** @type {?} */
    StartProcessCloudPage.prototype.processDefinition;
    /** @type {?} */
    StartProcessCloudPage.prototype.processDefinitionOptionsPanel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtcHJvY2Vzcy1jbG91ZC1jb21wb25lbnQucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9wcm9jZXNzLXNlcnZpY2VzLWNsb3VkL3BhZ2VzL3N0YXJ0LXByb2Nlc3MtY2xvdWQtY29tcG9uZW50LnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDbkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFFeEUsTUFBTSxPQUFPLHFCQUFxQjtJQUFsQztRQUVJLHVCQUFrQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQztRQUNoRSxxQkFBZ0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQ2pELCtCQUEwQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLENBQUMsQ0FBQztRQUN6Rix3QkFBbUIsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7UUFDdkQsMkJBQXNCLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMscURBQXFELENBQUMsQ0FBQyxDQUFDO1FBQ2hHLHVCQUFrQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsQ0FBQztRQUMvRSxjQUFTLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1FBQ2pELHNCQUFpQixHQUFHLE9BQU8sQ0FBQyxF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QU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNyQyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDL0M7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7Q0FDSjs7O0lBbkdHLG1EQUFnRTs7SUFDaEUsaURBQWlEOztJQUNqRCwyREFBeUY7O0lBQ3pGLG9EQUF1RDs7SUFDdkQsdURBQWdHOztJQUNoRyxtREFBK0U7O0lBQy9FLDBDQUFpRDs7SUFDakQsa0RBQXlFOztJQUN6RSw4REFBMEYiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBieSwgZWxlbWVudCwgS2V5LCBwcm90cmFjdG9yLCBicm93c2VyIH0gZnJvbSAncHJvdHJhY3Rvcic7XG5pbXBvcnQgeyBCcm93c2VyVmlzaWJpbGl0eSB9IGZyb20gJy4uLy4uL2NvcmUvdXRpbHMvYnJvd3Nlci12aXNpYmlsaXR5JztcblxuZXhwb3J0IGNsYXNzIFN0YXJ0UHJvY2Vzc0Nsb3VkUGFnZSB7XG5cbiAgICBkZWZhdWx0UHJvY2Vzc05hbWUgPSBlbGVtZW50KGJ5LmNzcygnaW5wdXRbaWQ9XCJwcm9jZXNzTmFtZVwiXScpKTtcbiAgICBwcm9jZXNzTmFtZUlucHV0ID0gZWxlbWVudChieS5pZCgncHJvY2Vzc05hbWUnKSk7XG4gICAgc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duQXJyb3cgPSBlbGVtZW50KGJ5LmNzcygnYnV0dG9uW2lkPVwiYWRmLXNlbGVjdC1wcm9jZXNzLWRyb3Bkb3duXCJdJykpO1xuICAgIGNhbmNlbFByb2Nlc3NCdXR0b24gPSBlbGVtZW50KGJ5LmlkKCdjYW5jZWxfcHJvY2VzcycpKTtcbiAgICBmb3JtU3RhcnRQcm9jZXNzQnV0dG9uID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltkYXRhLWF1dG9tYXRpb24taWQ9XCJhZGYtZm9ybS1zdGFydCBwcm9jZXNzXCJdJykpO1xuICAgIHN0YXJ0UHJvY2Vzc0J1dHRvbiA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bZGF0YS1hdXRvbWF0aW9uLWlkPVwiYnRuLXN0YXJ0XCJdJykpO1xuICAgIG5vUHJvY2VzcyA9IGVsZW1lbnQoYnkuaWQoJ25vLXByb2Nlc3MtbWVzc2FnZScpKTtcbiAgICBwcm9jZXNzRGVmaW5pdGlvbiA9IGVsZW1lbnQoYnkuY3NzKCdpbnB1dFtpZD1cInByb2Nlc3NEZWZpbml0aW9uTmFtZVwiXScpKTtcbiAgICBwcm9jZXNzRGVmaW5pdGlvbk9wdGlvbnNQYW5lbCA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbY2xhc3MqPVwicHJvY2Vzc0RlZmluaXRpb25PcHRpb25zXCJdJykpO1xuXG4gICAgY2hlY2tOb1Byb2Nlc3NNZXNzYWdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMubm9Qcm9jZXNzKTtcbiAgICB9XG5cbiAgICBwcmVzc0Rvd25BcnJvd0FuZEVudGVyKCkge1xuICAgICAgICB0aGlzLnByb2Nlc3NEZWZpbml0aW9uLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkFSUk9XX0RPV04pO1xuICAgICAgICByZXR1cm4gYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRU5URVIpLnBlcmZvcm0oKTtcbiAgICB9XG5cbiAgICBjaGVja05vUHJvY2Vzc0RlZmluaXRpb25PcHRpb25Jc0Rpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMucHJvY2Vzc0RlZmluaXRpb25PcHRpb25zUGFuZWwpO1xuICAgIH1cblxuICAgIGVudGVyUHJvY2Vzc05hbWUobmFtZSkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucHJvY2Vzc05hbWVJbnB1dCk7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9jZXNzTmFtZSgpO1xuICAgICAgICB0aGlzLnByb2Nlc3NOYW1lSW5wdXQuc2VuZEtleXMobmFtZSk7XG4gICAgfVxuXG4gICAgY2xlYXJQcm9jZXNzTmFtZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnByb2Nlc3NOYW1lSW5wdXQpO1xuICAgICAgICB0aGlzLnByb2Nlc3NOYW1lSW5wdXQuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBzZWxlY3RGcm9tUHJvY2Vzc0Ryb3Bkb3duKG5hbWUpIHtcbiAgICAgICAgdGhpcy5jbGlja1Byb2Nlc3NEcm9wZG93bkFycm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdE9wdGlvbihuYW1lKTtcbiAgICB9XG5cbiAgICBjbGlja1Byb2Nlc3NEcm9wZG93bkFycm93KCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duQXJyb3cpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5zZWxlY3RQcm9jZXNzRHJvcGRvd25BcnJvdyk7XG4gICAgICAgIHRoaXMuc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duQXJyb3cuY2xpY2soKTtcbiAgICB9XG5cbiAgICBjaGVja09wdGlvbklzRGlzcGxheWVkKG5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnLm1hdC1vcHRpb24tdGV4dCcsIG5hbWUpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShzZWxlY3RQcm9jZXNzRHJvcGRvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUoc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2VsZWN0T3B0aW9uKG5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnLm1hdC1vcHRpb24tdGV4dCcsIG5hbWUpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShzZWxlY3RQcm9jZXNzRHJvcGRvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUoc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duKTtcbiAgICAgICAgc2VsZWN0UHJvY2Vzc0Ryb3Bkb3duLmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNsaWNrQ2FuY2VsUHJvY2Vzc0J1dHRvbigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmNhbmNlbFByb2Nlc3NCdXR0b24pO1xuICAgICAgICB0aGlzLmNhbmNlbFByb2Nlc3NCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBjaGVja1N0YXJ0UHJvY2Vzc0J1dHRvbklzRW5hYmxlZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuc3RhcnRQcm9jZXNzQnV0dG9uKTtcbiAgICAgICAgZXhwZWN0KHRoaXMuc3RhcnRQcm9jZXNzQnV0dG9uLmlzRW5hYmxlZCgpKS50b0JlKHRydWUpO1xuICAgIH1cblxuICAgIGNoZWNrU3RhcnRQcm9jZXNzQnV0dG9uSXNEaXNhYmxlZCgpIHtcbiAgICAgICAgZXhwZWN0KHRoaXMuc3RhcnRQcm9jZXNzQnV0dG9uLmlzRW5hYmxlZCgpKS50b0JlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBjbGlja1N0YXJ0UHJvY2Vzc0J1dHRvbigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuc3RhcnRQcm9jZXNzQnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRQcm9jZXNzQnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgY2hlY2tWYWxpZGF0aW9uRXJyb3JJc0Rpc3BsYXllZChlcnJvciwgZWxlbWVudFJlZiA9ICdtYXQtZXJyb3InKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoZWxlbWVudFJlZiwgZXJyb3IpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShlcnJvckVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBibHVyKGxvY2F0b3IpIHtcbiAgICAgICAgbG9jYXRvci5jbGljaygpO1xuICAgICAgICBsb2NhdG9yLnNlbmRLZXlzKEtleS5UQUIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjbGVhckZpZWxkKGxvY2F0b3IpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShsb2NhdG9yKTtcbiAgICAgICAgbG9jYXRvci5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcmVzdWx0Lmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBsb2NhdG9yLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=