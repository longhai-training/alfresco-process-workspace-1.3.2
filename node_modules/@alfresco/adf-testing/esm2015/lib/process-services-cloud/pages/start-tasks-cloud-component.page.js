/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { element, by, Key, protractor } from 'protractor';
import { BrowserVisibility } from '../../core/utils/browser-visibility';
export class StartTasksCloudPage {
    constructor() {
        this.name = element(by.css('input[id="name_id"]'));
        this.dueDate = element(by.css('input[id="date_id"]'));
        this.description = element(by.css('textarea[id="description_id"]'));
        this.priority = element(by.css('input[formcontrolname="priority"]'));
        this.startButton = element(by.css('button[id="button-start"]'));
        this.startButtonEnabled = element(by.css('button[id="button-start"]:not(disabled)'));
        this.cancelButton = element(by.css('button[id="button-cancel"]'));
        this.form = element.all(by.css('adf-cloud-start-task form')).first();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkFormIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).form);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} userName
     * @return {THIS}
     */
    addName(userName) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).name);
        (/** @type {?} */ (this)).name.clear();
        (/** @type {?} */ (this)).name.sendKeys(userName);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} userDescription
     * @return {THIS}
     */
    addDescription(userDescription) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).description);
        (/** @type {?} */ (this)).description.sendKeys(userDescription);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} userPriority
     * @return {THIS}
     */
    addPriority(userPriority) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).priority);
        (/** @type {?} */ (this)).priority.sendKeys(userPriority);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} date
     * @return {THIS}
     */
    addDueDate(date) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).dueDate);
        (/** @type {?} */ (this)).clearField((/** @type {?} */ (this)).dueDate);
        (/** @type {?} */ (this)).dueDate.sendKeys(date);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    clickStartButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.startButton);
        BrowserVisibility.waitUntilElementIsClickable(this.startButton);
        return this.startButton.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkStartButtonIsEnabled() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).startButtonEnabled);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkStartButtonIsDisabled() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).startButton.getAttribute('disabled'));
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    clickCancelButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.cancelButton);
        BrowserVisibility.waitUntilElementIsClickable(this.cancelButton);
        return this.cancelButton.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @return {THIS}
     */
    blur(locator) {
        locator.click();
        locator.sendKeys(Key.TAB);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @param {?=} elementRef
     * @return {THIS}
     */
    checkValidationErrorIsDisplayed(error, elementRef = 'mat-error') {
        /** @type {?} */
        const errorElement = element(by.cssContainingText(elementRef, error));
        BrowserVisibility.waitUntilElementIsVisible(errorElement);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @return {THIS}
     */
    validateAssignee(error) {
        (/** @type {?} */ (this)).checkValidationErrorIsDisplayed(error, '.adf-start-task-cloud-error');
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @return {THIS}
     */
    validateDate(error) {
        (/** @type {?} */ (this)).checkValidationErrorIsDisplayed(error, '.adf-error-text');
        return (/** @type {?} */ (this));
    }
    /**
     * @param {?} locator
     * @return {?}
     */
    clearField(locator) {
        BrowserVisibility.waitUntilElementIsVisible(locator);
        BrowserVisibility.waitUntilElementIsClickable(locator);
        locator.getAttribute('value').then((/**
         * @param {?} result
         * @return {?}
         */
        (result) => {
            for (let i = result.length; i >= 0; i--) {
                locator.sendKeys(protractor.Key.BACK_SPACE);
            }
        }));
    }
}
if (false) {
    /** @type {?} */
    StartTasksCloudPage.prototype.name;
    /** @type {?} */
    StartTasksCloudPage.prototype.dueDate;
    /** @type {?} */
    StartTasksCloudPage.prototype.description;
    /** @type {?} */
    StartTasksCloudPage.prototype.priority;
    /** @type {?} */
    StartTasksCloudPage.prototype.startButton;
    /** @type {?} */
    StartTasksCloudPage.prototype.startButtonEnabled;
    /** @type {?} */
    StartTasksCloudPage.prototype.cancelButton;
    /** @type {?} */
    StartTasksCloudPage.prototype.form;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtdGFza3MtY2xvdWQtY29tcG9uZW50LnBhZ2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLXRlc3RpbmcvIiwic291cmNlcyI6WyJsaWIvcHJvY2Vzcy1zZXJ2aWNlcy1jbG91ZC9wYWdlcy9zdGFydC10YXNrcy1jbG91ZC1jb21wb25lbnQucGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQzFELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBRXhFLE1BQU0sT0FBTyxtQkFBbUI7SUFBaEM7UUFFSSxTQUFJLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO1FBQzlDLFlBQU8sR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7UUFDakQsZ0JBQVcsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUM7UUFDL0QsYUFBUSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUMsQ0FBQztRQUNoRSxnQkFBVyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQztRQUMzRCx1QkFBa0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDLENBQUM7UUFDaEYsaUJBQVksR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDLENBQUM7UUFDN0QsU0FBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdB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Qy9DO1FBQ0wsQ0FBQyxFQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0o7OztJQTdGRyxtQ0FBOEM7O0lBQzlDLHNDQUFpRDs7SUFDakQsMENBQStEOztJQUMvRCx1Q0FBZ0U7O0lBQ2hFLDBDQUEyRDs7SUFDM0QsaURBQWdGOztJQUNoRiwyQ0FBNkQ7O0lBQzdELG1DQUFnRSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGVsZW1lbnQsIGJ5LCBLZXksIHByb3RyYWN0b3IgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vLi4vY29yZS91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgU3RhcnRUYXNrc0Nsb3VkUGFnZSB7XG5cbiAgICBuYW1lID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwibmFtZV9pZFwiXScpKTtcbiAgICBkdWVEYXRlID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwiZGF0ZV9pZFwiXScpKTtcbiAgICBkZXNjcmlwdGlvbiA9IGVsZW1lbnQoYnkuY3NzKCd0ZXh0YXJlYVtpZD1cImRlc2NyaXB0aW9uX2lkXCJdJykpO1xuICAgIHByaW9yaXR5ID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2Zvcm1jb250cm9sbmFtZT1cInByaW9yaXR5XCJdJykpO1xuICAgIHN0YXJ0QnV0dG9uID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltpZD1cImJ1dHRvbi1zdGFydFwiXScpKTtcbiAgICBzdGFydEJ1dHRvbkVuYWJsZWQgPSBlbGVtZW50KGJ5LmNzcygnYnV0dG9uW2lkPVwiYnV0dG9uLXN0YXJ0XCJdOm5vdChkaXNhYmxlZCknKSk7XG4gICAgY2FuY2VsQnV0dG9uID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltpZD1cImJ1dHRvbi1jYW5jZWxcIl0nKSk7XG4gICAgZm9ybSA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnYWRmLWNsb3VkLXN0YXJ0LXRhc2sgZm9ybScpKS5maXJzdCgpO1xuXG4gICAgY2hlY2tGb3JtSXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5mb3JtKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgYWRkTmFtZSh1c2VyTmFtZSkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMubmFtZSk7XG4gICAgICAgIHRoaXMubmFtZS5jbGVhcigpO1xuICAgICAgICB0aGlzLm5hbWUuc2VuZEtleXModXNlck5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhZGREZXNjcmlwdGlvbih1c2VyRGVzY3JpcHRpb24pIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbi5zZW5kS2V5cyh1c2VyRGVzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhZGRQcmlvcml0eSh1c2VyUHJpb3JpdHkpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnByaW9yaXR5KTtcbiAgICAgICAgdGhpcy5wcmlvcml0eS5zZW5kS2V5cyh1c2VyUHJpb3JpdHkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBhZGREdWVEYXRlKGRhdGUpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmR1ZURhdGUpO1xuICAgICAgICB0aGlzLmNsZWFyRmllbGQodGhpcy5kdWVEYXRlKTtcbiAgICAgICAgdGhpcy5kdWVEYXRlLnNlbmRLZXlzKGRhdGUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjbGlja1N0YXJ0QnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc3RhcnRCdXR0b24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5zdGFydEJ1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0QnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgY2hlY2tTdGFydEJ1dHRvbklzRW5hYmxlZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnN0YXJ0QnV0dG9uRW5hYmxlZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNoZWNrU3RhcnRCdXR0b25Jc0Rpc2FibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc3RhcnRCdXR0b24uZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2xpY2tDYW5jZWxCdXR0b24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5jYW5jZWxCdXR0b24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5jYW5jZWxCdXR0b24pO1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWxCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBibHVyKGxvY2F0b3IpIHtcbiAgICAgICAgbG9jYXRvci5jbGljaygpO1xuICAgICAgICBsb2NhdG9yLnNlbmRLZXlzKEtleS5UQUIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjaGVja1ZhbGlkYXRpb25FcnJvcklzRGlzcGxheWVkKGVycm9yLCBlbGVtZW50UmVmID0gJ21hdC1lcnJvcicpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dChlbGVtZW50UmVmLCBlcnJvcikpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGVycm9yRWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhbGlkYXRlQXNzaWduZWUoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5jaGVja1ZhbGlkYXRpb25FcnJvcklzRGlzcGxheWVkKGVycm9yLCAnLmFkZi1zdGFydC10YXNrLWNsb3VkLWVycm9yJyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHZhbGlkYXRlRGF0ZShlcnJvcikge1xuICAgICAgICB0aGlzLmNoZWNrVmFsaWRhdGlvbkVycm9ySXNEaXNwbGF5ZWQoZXJyb3IsICcuYWRmLWVycm9yLXRleHQnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2xlYXJGaWVsZChsb2NhdG9yKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUobG9jYXRvcik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZShsb2NhdG9yKTtcbiAgICAgICAgbG9jYXRvci5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gcmVzdWx0Lmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBsb2NhdG9yLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=