/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { BrowserVisibility } from '../../core/utils/browser-visibility';
import { by, element } from 'protractor';
export class FormFieldsPage {
    constructor() {
        this.formContent = element(by.css('adf-form'));
        this.refreshButton = element(by.css('div[class*="form-reload-button"] mat-icon'));
        this.saveButton = element(by.cssContainingText('mat-card-actions[class*="adf-for"] span', 'SAVE'));
        this.valueLocator = by.css('input');
        this.labelLocator = by.css('label');
        this.noFormMessage = element(by.css('span[id*="no-form-message"]'));
        this.completedTaskNoFormMessage = element(by.css('div[id*="completed-form-message"] p'));
        this.attachFormButton = element(by.id('adf-no-form-attach-form-button'));
        this.selectFormDropDownArrow = element.all(by.css('adf-attach-form div[class*="mat-select-arrow"]')).first();
        this.selectFormContent = element(by.css('div[class*="mat-select-panel"]'));
        this.completeButton = element(by.id('adf-form-complete'));
        this.errorMessage = by.css('.adf-error-text-container .adf-error-text');
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @param {?} field
     * @param {?} value
     * @return {THIS}
     */
    setFieldValue(locator, field, value) {
        /** @type {?} */
        const fieldElement = element(locator(field));
        BrowserVisibility.waitUntilElementIsVisible(fieldElement);
        fieldElement.clear().sendKeys(value);
        return (/** @type {?} */ (this));
    }
    /**
     * @param {?} fieldId
     * @return {?}
     */
    checkWidgetIsVisible(fieldId) {
        /** @type {?} */
        const fieldElement = element.all(by.css(`adf-form-field div[id='field-${fieldId}-container']`)).first();
        BrowserVisibility.waitUntilElementIsVisible(fieldElement);
    }
    /**
     * @param {?} fieldId
     * @return {?}
     */
    checkWidgetIsHidden(fieldId) {
        /** @type {?} */
        const hiddenElement = element(by.css(`adf-form-field div[id='field-${fieldId}-container'][hidden]`));
        BrowserVisibility.waitUntilElementIsVisible(hiddenElement);
    }
    /**
     * @param {?} fieldId
     * @return {?}
     */
    getWidget(fieldId) {
        /** @type {?} */
        const widget = element(by.css(`adf-form-field div[id='field-${fieldId}-container']`));
        BrowserVisibility.waitUntilElementIsVisible(widget);
        return widget;
    }
    /**
     * @param {?} fieldId
     * @param {?} valueLocatorParam
     * @return {?}
     */
    getFieldValue(fieldId, valueLocatorParam) {
        /** @type {?} */
        const value = this.getWidget(fieldId).element(valueLocatorParam || this.valueLocator);
        BrowserVisibility.waitUntilElementIsVisible(value);
        return value.getAttribute('value');
    }
    /**
     * @param {?} fieldId
     * @param {?} labelLocatorParam
     * @return {?}
     */
    getFieldLabel(fieldId, labelLocatorParam) {
        /** @type {?} */
        const label = this.getWidget(fieldId).all(labelLocatorParam || this.labelLocator).first();
        BrowserVisibility.waitUntilElementIsVisible(label);
        return label.getText();
    }
    /**
     * @param {?} fieldId
     * @return {?}
     */
    getFieldErrorMessage(fieldId) {
        /** @type {?} */
        const error = this.getWidget(fieldId).element(this.errorMessage);
        return error.getText();
    }
    /**
     * @param {?} fieldId
     * @param {?} labelLocatorParam
     * @return {?}
     */
    getFieldText(fieldId, labelLocatorParam) {
        /** @type {?} */
        const label = this.getWidget(fieldId).element(labelLocatorParam || this.labelLocator);
        BrowserVisibility.waitUntilElementIsVisible(label);
        return label.getText();
    }
    /**
     * @param {?} fieldId
     * @param {?=} locator
     * @return {?}
     */
    getFieldPlaceHolder(fieldId, locator = 'input') {
        /** @type {?} */
        const placeHolderLocator = element(by.css(`${locator}#${fieldId}`)).getAttribute('placeholder');
        BrowserVisibility.waitUntilElementIsVisible(placeHolderLocator);
        return placeHolderLocator;
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @param {?} field
     * @param {?} val
     * @return {THIS}
     */
    checkFieldValue(locator, field, val) {
        BrowserVisibility.waitUntilElementHasValue(element(locator(field)), val);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    refreshForm() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).refreshButton);
        (/** @type {?} */ (this)).refreshButton.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    saveForm() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).saveButton);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).saveButton);
        (/** @type {?} */ (this)).saveButton.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    noFormIsDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage((/** @type {?} */ (this)).formContent);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkFormIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).formContent);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    getNoFormMessage() {
        BrowserVisibility.waitUntilElementIsVisible(this.noFormMessage);
        return this.noFormMessage.getText();
    }
    /**
     * @return {?}
     */
    getCompletedTaskNoFormMessage() {
        BrowserVisibility.waitUntilElementIsVisible(this.completedTaskNoFormMessage);
        return this.completedTaskNoFormMessage.getText();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    clickOnAttachFormButton() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).attachFormButton);
        (/** @type {?} */ (this)).attachFormButton.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} formName
     * @return {THIS}
     */
    selectForm(formName) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).selectFormDropDownArrow);
        (/** @type {?} */ (this)).selectFormDropDownArrow.click();
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).selectFormContent);
        (/** @type {?} */ (this)).selectFormFromDropDown(formName);
        return (/** @type {?} */ (this));
    }
    /**
     * @param {?} formName
     * @return {?}
     */
    selectFormFromDropDown(formName) {
        /** @type {?} */
        const formNameElement = element(by.cssContainingText('span', formName));
        BrowserVisibility.waitUntilElementIsVisible(formNameElement);
        formNameElement.click();
    }
    /**
     * @param {?} fieldId
     * @return {?}
     */
    checkWidgetIsReadOnlyMode(fieldId) {
        /** @type {?} */
        const widget = element(by.css(`adf-form-field div[id='field-${fieldId}-container']`));
        /** @type {?} */
        const widgetReadOnly = widget.element(by.css('div[class*="adf-readonly"]'));
        BrowserVisibility.waitUntilElementIsVisible(widgetReadOnly);
        return widgetReadOnly;
    }
    /**
     * @return {?}
     */
    completeForm() {
        BrowserVisibility.waitUntilElementIsVisible(this.completeButton);
        return this.completeButton.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} fieldId
     * @param {?} value
     * @return {THIS}
     */
    setValueInInputById(fieldId, value) {
        /** @type {?} */
        const input = element(by.id(fieldId));
        BrowserVisibility.waitUntilElementIsVisible(input);
        input.clear().sendKeys(value);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    isCompleteFormButtonDisabled() {
        BrowserVisibility.waitUntilElementIsVisible(this.completeButton);
        return this.completeButton.getAttribute('disabled');
    }
}
if (false) {
    /** @type {?} */
    FormFieldsPage.prototype.formContent;
    /** @type {?} */
    FormFieldsPage.prototype.refreshButton;
    /** @type {?} */
    FormFieldsPage.prototype.saveButton;
    /** @type {?} */
    FormFieldsPage.prototype.valueLocator;
    /** @type {?} */
    FormFieldsPage.prototype.labelLocator;
    /** @type {?} */
    FormFieldsPage.prototype.noFormMessage;
    /** @type {?} */
    FormFieldsPage.prototype.completedTaskNoFormMessage;
    /** @type {?} */
    FormFieldsPage.prototype.attachFormButton;
    /** @type {?} */
    FormFieldsPage.prototype.selectFormDropDownArrow;
    /** @type {?} */
    FormFieldsPage.prototype.selectFormContent;
    /** @type {?} */
    FormFieldsPage.prototype.completeButton;
    /** @type {?} */
    FormFieldsPage.prototype.errorMessage;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1maWVsZHMucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9wcm9jZXNzLXNlcnZpY2VzL3BhZ2VzL2Zvcm0tZmllbGRzLnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDeEUsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFekMsTUFBTSxPQUFPLGNBQWM7SUFBM0I7UUFFSSxnQkFBVyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDMUMsa0JBQWEsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDLENBQUM7UUFDN0UsZUFBVSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsaUJBQWlCLENBQUMseUNBQXlDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5RixpQkFBWSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0IsaUJBQVksR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLGtCQUFhLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDO1FBQy9ELCtCQUEwQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHFDQUFxQyxDQUFDLENBQUMsQ0FBQztRQUNwRixxQkFBZ0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUM7UUFDcEUsNEJBQXVCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLGdE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UUFDeEIsaUJBQWlCLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pFLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUNKOzs7SUFsSkcscUNBQTBDOztJQUMxQyx1Q0FBNkU7O0lBQzdFLG9DQUE4Rjs7SUFDOUYsc0NBQStCOztJQUMvQixzQ0FBK0I7O0lBQy9CLHVDQUErRDs7SUFDL0Qsb0RBQW9GOztJQUNwRiwwQ0FBb0U7O0lBQ3BFLGlEQUF3Rzs7SUFDeEcsMkNBQXNFOztJQUN0RSx3Q0FBcUQ7O0lBQ3JELHNDQUFtRSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vLi4vY29yZS91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuaW1wb3J0IHsgYnksIGVsZW1lbnQgfSBmcm9tICdwcm90cmFjdG9yJztcblxuZXhwb3J0IGNsYXNzIEZvcm1GaWVsZHNQYWdlIHtcblxuICAgIGZvcm1Db250ZW50ID0gZWxlbWVudChieS5jc3MoJ2FkZi1mb3JtJykpO1xuICAgIHJlZnJlc2hCdXR0b24gPSBlbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImZvcm0tcmVsb2FkLWJ1dHRvblwiXSBtYXQtaWNvbicpKTtcbiAgICBzYXZlQnV0dG9uID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnbWF0LWNhcmQtYWN0aW9uc1tjbGFzcyo9XCJhZGYtZm9yXCJdIHNwYW4nLCAnU0FWRScpKTtcbiAgICB2YWx1ZUxvY2F0b3IgPSBieS5jc3MoJ2lucHV0Jyk7XG4gICAgbGFiZWxMb2NhdG9yID0gYnkuY3NzKCdsYWJlbCcpO1xuICAgIG5vRm9ybU1lc3NhZ2UgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltpZCo9XCJuby1mb3JtLW1lc3NhZ2VcIl0nKSk7XG4gICAgY29tcGxldGVkVGFza05vRm9ybU1lc3NhZ2UgPSBlbGVtZW50KGJ5LmNzcygnZGl2W2lkKj1cImNvbXBsZXRlZC1mb3JtLW1lc3NhZ2VcIl0gcCcpKTtcbiAgICBhdHRhY2hGb3JtQnV0dG9uID0gZWxlbWVudChieS5pZCgnYWRmLW5vLWZvcm0tYXR0YWNoLWZvcm0tYnV0dG9uJykpO1xuICAgIHNlbGVjdEZvcm1Ecm9wRG93bkFycm93ID0gZWxlbWVudC5hbGwoYnkuY3NzKCdhZGYtYXR0YWNoLWZvcm0gZGl2W2NsYXNzKj1cIm1hdC1zZWxlY3QtYXJyb3dcIl0nKSkuZmlyc3QoKTtcbiAgICBzZWxlY3RGb3JtQ29udGVudCA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbY2xhc3MqPVwibWF0LXNlbGVjdC1wYW5lbFwiXScpKTtcbiAgICBjb21wbGV0ZUJ1dHRvbiA9IGVsZW1lbnQoYnkuaWQoJ2FkZi1mb3JtLWNvbXBsZXRlJykpO1xuICAgIGVycm9yTWVzc2FnZSA9IGJ5LmNzcygnLmFkZi1lcnJvci10ZXh0LWNvbnRhaW5lciAuYWRmLWVycm9yLXRleHQnKTtcblxuICAgIHNldEZpZWxkVmFsdWUobG9jYXRvciwgZmllbGQsIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRWxlbWVudDogYW55ID0gZWxlbWVudChsb2NhdG9yKGZpZWxkKSk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZmllbGRFbGVtZW50KTtcbiAgICAgICAgZmllbGRFbGVtZW50LmNsZWFyKCkuc2VuZEtleXModmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjaGVja1dpZGdldElzVmlzaWJsZShmaWVsZElkKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRWxlbWVudCA9IGVsZW1lbnQuYWxsKGJ5LmNzcyhgYWRmLWZvcm0tZmllbGQgZGl2W2lkPSdmaWVsZC0ke2ZpZWxkSWR9LWNvbnRhaW5lciddYCkpLmZpcnN0KCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZmllbGRFbGVtZW50KTtcbiAgICB9XG5cbiAgICBjaGVja1dpZGdldElzSGlkZGVuKGZpZWxkSWQpIHtcbiAgICAgICAgY29uc3QgaGlkZGVuRWxlbWVudCA9IGVsZW1lbnQoYnkuY3NzKGBhZGYtZm9ybS1maWVsZCBkaXZbaWQ9J2ZpZWxkLSR7ZmllbGRJZH0tY29udGFpbmVyJ11baGlkZGVuXWApKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShoaWRkZW5FbGVtZW50KTtcbiAgICB9XG5cbiAgICBnZXRXaWRnZXQoZmllbGRJZCkge1xuICAgICAgICBjb25zdCB3aWRnZXQgPSBlbGVtZW50KGJ5LmNzcyhgYWRmLWZvcm0tZmllbGQgZGl2W2lkPSdmaWVsZC0ke2ZpZWxkSWR9LWNvbnRhaW5lciddYCkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHdpZGdldCk7XG4gICAgICAgIHJldHVybiB3aWRnZXQ7XG4gICAgfVxuXG4gICAgZ2V0RmllbGRWYWx1ZShmaWVsZElkLCB2YWx1ZUxvY2F0b3JQYXJhbSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0V2lkZ2V0KGZpZWxkSWQpLmVsZW1lbnQodmFsdWVMb2NhdG9yUGFyYW0gfHwgdGhpcy52YWx1ZUxvY2F0b3IpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICB9XG5cbiAgICBnZXRGaWVsZExhYmVsKGZpZWxkSWQsIGxhYmVsTG9jYXRvclBhcmFtKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5nZXRXaWRnZXQoZmllbGRJZCkuYWxsKGxhYmVsTG9jYXRvclBhcmFtIHx8IHRoaXMubGFiZWxMb2NhdG9yKS5maXJzdCgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIGxhYmVsLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRGaWVsZEVycm9yTWVzc2FnZShmaWVsZElkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5nZXRXaWRnZXQoZmllbGRJZCkuZWxlbWVudCh0aGlzLmVycm9yTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiBlcnJvci5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0RmllbGRUZXh0KGZpZWxkSWQsIGxhYmVsTG9jYXRvclBhcmFtKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5nZXRXaWRnZXQoZmllbGRJZCkuZWxlbWVudChsYWJlbExvY2F0b3JQYXJhbSB8fCB0aGlzLmxhYmVsTG9jYXRvcik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUobGFiZWwpO1xuICAgICAgICByZXR1cm4gbGFiZWwuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldEZpZWxkUGxhY2VIb2xkZXIoZmllbGRJZCwgbG9jYXRvciA9ICdpbnB1dCcpIHtcbiAgICAgICAgY29uc3QgcGxhY2VIb2xkZXJMb2NhdG9yID0gZWxlbWVudChieS5jc3MoYCR7bG9jYXRvcn0jJHtmaWVsZElkfWApKS5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUocGxhY2VIb2xkZXJMb2NhdG9yKTtcbiAgICAgICAgcmV0dXJuIHBsYWNlSG9sZGVyTG9jYXRvcjtcbiAgICB9XG5cbiAgICBjaGVja0ZpZWxkVmFsdWUobG9jYXRvciwgZmllbGQsIHZhbCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SGFzVmFsdWUoZWxlbWVudChsb2NhdG9yKGZpZWxkKSksIHZhbCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHJlZnJlc2hGb3JtKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucmVmcmVzaEJ1dHRvbik7XG4gICAgICAgIHRoaXMucmVmcmVzaEJ1dHRvbi5jbGljaygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzYXZlRm9ybSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNhdmVCdXR0b24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5zYXZlQnV0dG9uKTtcbiAgICAgICAgdGhpcy5zYXZlQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG5vRm9ybUlzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5mb3JtQ29udGVudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNoZWNrRm9ybUlzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZm9ybUNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXROb0Zvcm1NZXNzYWdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMubm9Gb3JtTWVzc2FnZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vRm9ybU1lc3NhZ2UuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldENvbXBsZXRlZFRhc2tOb0Zvcm1NZXNzYWdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuY29tcGxldGVkVGFza05vRm9ybU1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZWRUYXNrTm9Gb3JtTWVzc2FnZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgY2xpY2tPbkF0dGFjaEZvcm1CdXR0b24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5hdHRhY2hGb3JtQnV0dG9uKTtcbiAgICAgICAgdGhpcy5hdHRhY2hGb3JtQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNlbGVjdEZvcm0oZm9ybU5hbWUpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNlbGVjdEZvcm1Ecm9wRG93bkFycm93KTtcbiAgICAgICAgdGhpcy5zZWxlY3RGb3JtRHJvcERvd25BcnJvdy5jbGljaygpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0Rm9ybUNvbnRlbnQpO1xuICAgICAgICB0aGlzLnNlbGVjdEZvcm1Gcm9tRHJvcERvd24oZm9ybU5hbWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZWxlY3RGb3JtRnJvbURyb3BEb3duKGZvcm1OYW1lKSB7XG4gICAgICAgIGNvbnN0IGZvcm1OYW1lRWxlbWVudCA9IGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoJ3NwYW4nLCBmb3JtTmFtZSkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGZvcm1OYW1lRWxlbWVudCk7XG4gICAgICAgIGZvcm1OYW1lRWxlbWVudC5jbGljaygpO1xuICAgIH1cblxuICAgIGNoZWNrV2lkZ2V0SXNSZWFkT25seU1vZGUoZmllbGRJZCkge1xuICAgICAgICBjb25zdCB3aWRnZXQgPSBlbGVtZW50KGJ5LmNzcyhgYWRmLWZvcm0tZmllbGQgZGl2W2lkPSdmaWVsZC0ke2ZpZWxkSWR9LWNvbnRhaW5lciddYCkpO1xuICAgICAgICBjb25zdCB3aWRnZXRSZWFkT25seSA9IHdpZGdldC5lbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImFkZi1yZWFkb25seVwiXScpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh3aWRnZXRSZWFkT25seSk7XG4gICAgICAgIHJldHVybiB3aWRnZXRSZWFkT25seTtcbiAgICB9XG5cbiAgICBjb21wbGV0ZUZvcm0oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5jb21wbGV0ZUJ1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlQnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgc2V0VmFsdWVJbklucHV0QnlJZChmaWVsZElkLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBpbnB1dDogYW55ID0gZWxlbWVudChieS5pZChmaWVsZElkKSk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoaW5wdXQpO1xuICAgICAgICBpbnB1dC5jbGVhcigpLnNlbmRLZXlzKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaXNDb21wbGV0ZUZvcm1CdXR0b25EaXNhYmxlZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmNvbXBsZXRlQnV0dG9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGVCdXR0b24uZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbn1cbiJdfQ==