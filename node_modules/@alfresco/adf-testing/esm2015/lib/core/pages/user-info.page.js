/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { element, by, browser, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
import { TabsPage } from '../../material/pages/tabs.page';
export class UserInfoPage {
    constructor() {
        this.dialog = element.all(by.css('mat-card[class*="adf-userinfo-card"]')).first();
        this.userImage = element(by.css('div[id="user-initial-image"]'));
        this.userInfoEcmHeaderTitle = element(by.css('div[id="ecm-username"]'));
        this.userInfoEcmTitle = element(by.css('mat-card-content span[id="ecm-full-name"]'));
        this.ecmEmail = element(by.css('span[id="ecm-email"]'));
        this.ecmJobTitle = element(by.css('span[id="ecm-job-title"]'));
        this.userInfoProcessHeaderTitle = element(by.css('div[id="bpm-username"]'));
        this.userInfoProcessTitle = element(by.css('mat-card-content span[id="bpm-full-name"]'));
        this.processEmail = element(by.css('span[id="bpm-email"]'));
        this.processTenant = element(by.css('span[class="detail-profile"]'));
        this.apsImage = element(by.css('img[id="bpm-user-detail-image"]'));
        this.acsImage = element(by.css('img[id="ecm-user-detail-image"]'));
        this.initialImage = element.all(by.css('div[id="user-initials-image"]')).first();
        this.userInfoSsoHeaderTitle = this.dialog.element(by.css('div[id="identity-username"]'));
        this.userInfoSsoTitle = element(by.css('.adf-userinfo__detail-title'));
        this.ssoEmail = element(by.id('identity-email'));
        this.userProfileButton = element(by.css('button[data-automation-id="adf-user-profile"]'));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    dialogIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).dialog);
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    dialogIsNotDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage((/** @type {?} */ (this)).dialog);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    clickUserProfile() {
        BrowserVisibility.waitUntilElementIsVisible(this.userProfileButton);
        this.userProfileButton.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    clickOnContentServicesTab() {
        /** @type {?} */
        const tabsPage = new TabsPage();
        tabsPage.clickTabByTitle('Content Services');
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkProcessServicesTabIsSelected() {
        /** @type {?} */
        const tabsPage = new TabsPage;
        tabsPage.checkTabIsSelectedByTitle('Process Services');
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    clickOnProcessServicesTab() {
        /** @type {?} */
        const tabsPage = new TabsPage;
        tabsPage.clickTabByTitle('Process Services');
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    userImageIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).userImage);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    getContentHeaderTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.dialog);
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoEcmHeaderTitle);
        return this.userInfoEcmHeaderTitle.getText();
    }
    /**
     * @return {?}
     */
    getContentTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoEcmTitle);
        return this.userInfoEcmTitle.getText();
    }
    /**
     * @return {?}
     */
    getContentEmail() {
        BrowserVisibility.waitUntilElementIsVisible(this.ecmEmail);
        return this.ecmEmail.getText();
    }
    /**
     * @return {?}
     */
    getContentJobTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.ecmJobTitle);
        return this.ecmJobTitle.getText();
    }
    /**
     * @return {?}
     */
    getProcessHeaderTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoProcessHeaderTitle);
        return this.userInfoProcessHeaderTitle.getText();
    }
    /**
     * @return {?}
     */
    getProcessTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoProcessTitle);
        return this.userInfoProcessTitle.getText();
    }
    /**
     * @return {?}
     */
    getProcessEmail() {
        BrowserVisibility.waitUntilElementIsVisible(this.processEmail);
        return this.processEmail.getText();
    }
    /**
     * @return {?}
     */
    getProcessTenant() {
        BrowserVisibility.waitUntilElementIsVisible(this.processTenant);
        return this.processTenant.getText();
    }
    /**
     * @return {?}
     */
    getSsoHeaderTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoSsoHeaderTitle);
        return this.userInfoSsoHeaderTitle.getText();
    }
    /**
     * @return {?}
     */
    getSsoTitle() {
        BrowserVisibility.waitUntilElementIsVisible(this.userInfoSsoTitle);
        return this.userInfoSsoTitle.getText();
    }
    /**
     * @return {?}
     */
    getSsoEmail() {
        BrowserVisibility.waitUntilElementIsVisible(this.ssoEmail);
        return this.ssoEmail.getText();
    }
    /**
     * @return {?}
     */
    closeUserProfile() {
        BrowserVisibility.waitUntilElementIsVisible(this.dialog);
        browser.actions().sendKeys(protractor.Key.ESCAPE).perform();
    }
    /**
     * @return {?}
     */
    checkACSProfileImage() {
        BrowserVisibility.waitUntilElementIsVisible(this.acsImage);
    }
    /**
     * @return {?}
     */
    checkAPSProfileImage() {
        BrowserVisibility.waitUntilElementIsVisible(this.apsImage);
    }
    /**
     * @return {?}
     */
    checkInitialImage() {
        BrowserVisibility.waitUntilElementIsVisible(this.initialImage);
    }
    /**
     * @return {?}
     */
    initialImageNotDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.initialImage);
    }
    /**
     * @return {?}
     */
    ACSProfileImageNotDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.acsImage);
    }
    /**
     * @return {?}
     */
    APSProfileImageNotDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.apsImage);
    }
}
if (false) {
    /** @type {?} */
    UserInfoPage.prototype.dialog;
    /** @type {?} */
    UserInfoPage.prototype.userImage;
    /** @type {?} */
    UserInfoPage.prototype.userInfoEcmHeaderTitle;
    /** @type {?} */
    UserInfoPage.prototype.userInfoEcmTitle;
    /** @type {?} */
    UserInfoPage.prototype.ecmEmail;
    /** @type {?} */
    UserInfoPage.prototype.ecmJobTitle;
    /** @type {?} */
    UserInfoPage.prototype.userInfoProcessHeaderTitle;
    /** @type {?} */
    UserInfoPage.prototype.userInfoProcessTitle;
    /** @type {?} */
    UserInfoPage.prototype.processEmail;
    /** @type {?} */
    UserInfoPage.prototype.processTenant;
    /** @type {?} */
    UserInfoPage.prototype.apsImage;
    /** @type {?} */
    UserInfoPage.prototype.acsImage;
    /** @type {?} */
    UserInfoPage.prototype.initialImage;
    /** @type {?} */
    UserInfoPage.prototype.userInfoSsoHeaderTitle;
    /** @type {?} */
    UserInfoPage.prototype.userInfoSsoTitle;
    /** @type {?} */
    UserInfoPage.prototype.ssoEmail;
    /** @type {?} */
    UserInfoPage.prototype.userProfileButton;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1pbmZvLnBhZ2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AYWxmcmVzY28vYWRmLXRlc3RpbmcvIiwic291cmNlcyI6WyJsaWIvY29yZS9wYWdlcy91c2VyLWluZm8ucGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlCQSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQzlELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUUxRCxNQUFNLE9BQU8sWUFBWTtJQUF6QjtRQUVJLFdBQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsc0NBQXNDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQzdFLGNBQVMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLENBQUM7UUFDNUQsMkJBQXNCLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO1FBQ25FLHFCQUFnQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDJDQUEyQyxDQUFDLENBQUMsQ0FBQztRQUNoRixhQUFRLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDO1FBQ25ELGdCQUFXLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDO1FBQzFELCtCQUEwQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQztRQUN2RSx5QkFBb0IsR0FBRyxPQUFPLENBQUMsRUFBRSxD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LENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7Ozs7SUFFRCwyQkFBMkI7UUFDdkIsaUJBQWlCLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7Q0FFSjs7O0lBN0lHLDhCQUE2RTs7SUFDN0UsaUNBQTREOztJQUM1RCw4Q0FBbUU7O0lBQ25FLHdDQUFnRjs7SUFDaEYsZ0NBQW1EOztJQUNuRCxtQ0FBMEQ7O0lBQzFELGtEQUF1RTs7SUFDdkUsNENBQW9GOztJQUNwRixvQ0FBdUQ7O0lBQ3ZELHFDQUFnRTs7SUFDaEUsZ0NBQThEOztJQUM5RCxnQ0FBOEQ7O0lBQzlELG9DQUE0RTs7SUFDNUUsOENBQW9GOztJQUNwRix3Q0FBa0U7O0lBQ2xFLGdDQUE0Qzs7SUFDNUMseUNBQXFGIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgZWxlbWVudCwgYnksIGJyb3dzZXIsIHByb3RyYWN0b3IgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci12aXNpYmlsaXR5JztcbmltcG9ydCB7IFRhYnNQYWdlIH0gZnJvbSAnLi4vLi4vbWF0ZXJpYWwvcGFnZXMvdGFicy5wYWdlJztcblxuZXhwb3J0IGNsYXNzIFVzZXJJbmZvUGFnZSB7XG5cbiAgICBkaWFsb2cgPSBlbGVtZW50LmFsbChieS5jc3MoJ21hdC1jYXJkW2NsYXNzKj1cImFkZi11c2VyaW5mby1jYXJkXCJdJykpLmZpcnN0KCk7XG4gICAgdXNlckltYWdlID0gZWxlbWVudChieS5jc3MoJ2RpdltpZD1cInVzZXItaW5pdGlhbC1pbWFnZVwiXScpKTtcbiAgICB1c2VySW5mb0VjbUhlYWRlclRpdGxlID0gZWxlbWVudChieS5jc3MoJ2RpdltpZD1cImVjbS11c2VybmFtZVwiXScpKTtcbiAgICB1c2VySW5mb0VjbVRpdGxlID0gZWxlbWVudChieS5jc3MoJ21hdC1jYXJkLWNvbnRlbnQgc3BhbltpZD1cImVjbS1mdWxsLW5hbWVcIl0nKSk7XG4gICAgZWNtRW1haWwgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltpZD1cImVjbS1lbWFpbFwiXScpKTtcbiAgICBlY21Kb2JUaXRsZSA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuW2lkPVwiZWNtLWpvYi10aXRsZVwiXScpKTtcbiAgICB1c2VySW5mb1Byb2Nlc3NIZWFkZXJUaXRsZSA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbaWQ9XCJicG0tdXNlcm5hbWVcIl0nKSk7XG4gICAgdXNlckluZm9Qcm9jZXNzVGl0bGUgPSBlbGVtZW50KGJ5LmNzcygnbWF0LWNhcmQtY29udGVudCBzcGFuW2lkPVwiYnBtLWZ1bGwtbmFtZVwiXScpKTtcbiAgICBwcm9jZXNzRW1haWwgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltpZD1cImJwbS1lbWFpbFwiXScpKTtcbiAgICBwcm9jZXNzVGVuYW50ID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJkZXRhaWwtcHJvZmlsZVwiXScpKTtcbiAgICBhcHNJbWFnZSA9IGVsZW1lbnQoYnkuY3NzKCdpbWdbaWQ9XCJicG0tdXNlci1kZXRhaWwtaW1hZ2VcIl0nKSk7XG4gICAgYWNzSW1hZ2UgPSBlbGVtZW50KGJ5LmNzcygnaW1nW2lkPVwiZWNtLXVzZXItZGV0YWlsLWltYWdlXCJdJykpO1xuICAgIGluaXRpYWxJbWFnZSA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnZGl2W2lkPVwidXNlci1pbml0aWFscy1pbWFnZVwiXScpKS5maXJzdCgpO1xuICAgIHVzZXJJbmZvU3NvSGVhZGVyVGl0bGUgPSB0aGlzLmRpYWxvZy5lbGVtZW50KGJ5LmNzcygnZGl2W2lkPVwiaWRlbnRpdHktdXNlcm5hbWVcIl0nKSk7XG4gICAgdXNlckluZm9Tc29UaXRsZSA9IGVsZW1lbnQoYnkuY3NzKCcuYWRmLXVzZXJpbmZvX19kZXRhaWwtdGl0bGUnKSk7XG4gICAgc3NvRW1haWwgPSBlbGVtZW50KGJ5LmlkKCdpZGVudGl0eS1lbWFpbCcpKTtcbiAgICB1c2VyUHJvZmlsZUJ1dHRvbiA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bZGF0YS1hdXRvbWF0aW9uLWlkPVwiYWRmLXVzZXItcHJvZmlsZVwiXScpKTtcblxuICAgIGRpYWxvZ0lzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZGlhbG9nSXNOb3REaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdE9uUGFnZSh0aGlzLmRpYWxvZyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNsaWNrVXNlclByb2ZpbGUoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy51c2VyUHJvZmlsZUJ1dHRvbik7XG4gICAgICAgIHRoaXMudXNlclByb2ZpbGVCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBjbGlja09uQ29udGVudFNlcnZpY2VzVGFiKCkge1xuICAgICAgICBjb25zdCB0YWJzUGFnZSA9IG5ldyBUYWJzUGFnZSgpO1xuICAgICAgICB0YWJzUGFnZS5jbGlja1RhYkJ5VGl0bGUoJ0NvbnRlbnQgU2VydmljZXMnKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tQcm9jZXNzU2VydmljZXNUYWJJc1NlbGVjdGVkKCkge1xuICAgICAgICBjb25zdCB0YWJzUGFnZSA9IG5ldyBUYWJzUGFnZTtcbiAgICAgICAgdGFic1BhZ2UuY2hlY2tUYWJJc1NlbGVjdGVkQnlUaXRsZSgnUHJvY2VzcyBTZXJ2aWNlcycpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjbGlja09uUHJvY2Vzc1NlcnZpY2VzVGFiKCkge1xuICAgICAgICBjb25zdCB0YWJzUGFnZSA9IG5ldyBUYWJzUGFnZTtcbiAgICAgICAgdGFic1BhZ2UuY2xpY2tUYWJCeVRpdGxlKCdQcm9jZXNzIFNlcnZpY2VzJyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHVzZXJJbWFnZUlzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudXNlckltYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZ2V0Q29udGVudEhlYWRlclRpdGxlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZGlhbG9nKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnVzZXJJbmZvRWNtSGVhZGVyVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VySW5mb0VjbUhlYWRlclRpdGxlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRDb250ZW50VGl0bGUoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy51c2VySW5mb0VjbVRpdGxlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckluZm9FY21UaXRsZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0Q29udGVudEVtYWlsKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZWNtRW1haWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5lY21FbWFpbC5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0Q29udGVudEpvYlRpdGxlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZWNtSm9iVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5lY21Kb2JUaXRsZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0UHJvY2Vzc0hlYWRlclRpdGxlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudXNlckluZm9Qcm9jZXNzSGVhZGVyVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VySW5mb1Byb2Nlc3NIZWFkZXJUaXRsZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0UHJvY2Vzc1RpdGxlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudXNlckluZm9Qcm9jZXNzVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VySW5mb1Byb2Nlc3NUaXRsZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0UHJvY2Vzc0VtYWlsKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucHJvY2Vzc0VtYWlsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0VtYWlsLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRQcm9jZXNzVGVuYW50KCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucHJvY2Vzc1RlbmFudCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NUZW5hbnQuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldFNzb0hlYWRlclRpdGxlICgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnVzZXJJbmZvU3NvSGVhZGVyVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VySW5mb1Nzb0hlYWRlclRpdGxlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRTc29UaXRsZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnVzZXJJbmZvU3NvVGl0bGUpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VySW5mb1Nzb1RpdGxlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRTc29FbWFpbCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNzb0VtYWlsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3NvRW1haWwuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGNsb3NlVXNlclByb2ZpbGUoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5kaWFsb2cpO1xuICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FU0NBUEUpLnBlcmZvcm0oKTtcbiAgICB9XG5cbiAgICBjaGVja0FDU1Byb2ZpbGVJbWFnZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmFjc0ltYWdlKTtcbiAgICB9XG5cbiAgICBjaGVja0FQU1Byb2ZpbGVJbWFnZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmFwc0ltYWdlKTtcbiAgICB9XG5cbiAgICBjaGVja0luaXRpYWxJbWFnZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmluaXRpYWxJbWFnZSk7XG4gICAgfVxuXG4gICAgaW5pdGlhbEltYWdlTm90RGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5pbml0aWFsSW1hZ2UpO1xuICAgIH1cblxuICAgIEFDU1Byb2ZpbGVJbWFnZU5vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMuYWNzSW1hZ2UpO1xuICAgIH1cblxuICAgIEFQU1Byb2ZpbGVJbWFnZU5vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMuYXBzSW1hZ2UpO1xuICAgIH1cblxufVxuIl19