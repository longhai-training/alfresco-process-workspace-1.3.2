/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { browser, by, element, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
export class SettingsPage {
    constructor() {
        this.settingsURL = browser.baseUrl + '/settings';
        this.providerDropdown = element(by.css('mat-select[id="adf-provider-selector"] div[class="mat-select-arrow-wrapper"]'));
        this.ecmAndBpm = {
            option: element(by.xpath('//SPAN[@class="mat-option-text"][contains(text(),"ALL")]')),
            text: 'ALL'
        };
        this.bpm = {
            option: element(by.xpath('//SPAN[@class="mat-option-text"][contains(text(),"BPM") and not (contains(text(),"and"))]')),
            text: 'BPM'
        };
        this.ecm = {
            option: element(by.xpath('//SPAN[@class="mat-option-text"][contains(text(),"ECM") and not (contains(text(),"and"))]')),
            text: 'ECM'
        };
        this.oauth = {
            option: element(by.xpath('//SPAN[@class="mat-option-text"][contains(text(),"OAUTH")]')),
            text: 'OAUTH'
        };
        this.selectedOption = element(by.css('span[class*="mat-select-value-text"]'));
        this.ecmText = element(by.css('input[data-automation-id*="ecmHost"]'));
        this.bpmText = element(by.css('input[data-automation-id*="bpmHost"]'));
        this.clientIdText = element(by.css('input[id="clientId"]'));
        this.authHostText = element(by.css('input[id="oauthHost"]'));
        this.logoutUrlText = element(by.css('input[id="logout-url"]'));
        this.basicAuthRadioButton = element(by.cssContainingText('mat-radio-button[id*="mat-radio"]', 'Basic Authentication'));
        this.identityHostText = element(by.css('input[id="identityHost"]'));
        this.ssoRadioButton = element(by.cssContainingText('[id*="mat-radio"]', 'SSO'));
        this.silentLoginToggleLabel = element(by.css('mat-slide-toggle[name="silentLogin"] label'));
        this.silentLoginToggleElement = element(by.css('mat-slide-toggle[name="silentLogin"]'));
        this.implicitFlowLabel = element(by.css('mat-slide-toggle[name="implicitFlow"] label'));
        this.implicitFlowElement = element(by.css('mat-slide-toggle[name="implicitFlow"]'));
        this.applyButton = element(by.css('button[data-automation-id*="host-button"]'));
        this.backButton = element(by.cssContainingText('button span[class="mat-button-wrapper"]', 'Back'));
        this.validationMessage = element(by.cssContainingText('mat-error', 'This field is required'));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    goToSettingsPage() {
        browser.waitForAngularEnabled(true);
        browser.driver.get((/** @type {?} */ (this)).settingsURL);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).providerDropdown);
        return (/** @type {?} */ (this));
    }
    /**
     * @param {?} option
     * @param {?} selected
     * @return {?}
     */
    setProvider(option, selected) {
        BrowserVisibility.waitUntilElementIsVisible(this.providerDropdown);
        this.providerDropdown.click();
        BrowserVisibility.waitUntilElementIsVisible(option);
        option.click();
        return expect(this.selectedOption.getText()).toEqual(selected);
    }
    /**
     * @return {?}
     */
    getSelectedOptionText() {
        return this.selectedOption.getText();
    }
    /**
     * @return {?}
     */
    getBpmHostUrl() {
        return this.bpmText.getAttribute('value');
    }
    /**
     * @return {?}
     */
    getEcmHostUrl() {
        return this.ecmText.getAttribute('value');
    }
    /**
     * @return {?}
     */
    getBpmOption() {
        return this.bpm.option;
    }
    /**
     * @return {?}
     */
    getEcmOption() {
        return this.ecm.option;
    }
    /**
     * @return {?}
     */
    getEcmAndBpmOption() {
        return this.ecmAndBpm.option;
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    setProviderEcmBpm() {
        (/** @type {?} */ (this)).goToSettingsPage();
        (/** @type {?} */ (this)).setProvider((/** @type {?} */ (this)).ecmAndBpm.option, (/** @type {?} */ (this)).ecmAndBpm.text);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).bpmText);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).ecmText);
        (/** @type {?} */ (this)).clickApply();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    setProviderBpm() {
        (/** @type {?} */ (this)).goToSettingsPage();
        (/** @type {?} */ (this)).setProvider((/** @type {?} */ (this)).bpm.option, (/** @type {?} */ (this)).bpm.text);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).bpmText);
        (/** @type {?} */ (this)).clickApply();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    setProviderEcm() {
        (/** @type {?} */ (this)).goToSettingsPage();
        (/** @type {?} */ (this)).setProvider((/** @type {?} */ (this)).ecm.option, (/** @type {?} */ (this)).ecm.text);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).ecmText);
        expect((/** @type {?} */ (this)).bpmText.isPresent()).toBeFalsy();
        (/** @type {?} */ (this)).clickApply();
        return (/** @type {?} */ (this));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    setProviderOauth() {
        (/** @type {?} */ (this)).goToSettingsPage();
        (/** @type {?} */ (this)).setProvider((/** @type {?} */ (this)).oauth.option, (/** @type {?} */ (this)).oauth.text);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).bpmText);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).ecmText);
        expect((/** @type {?} */ (this)).authHostText.isPresent()).toBeTruthy();
        (/** @type {?} */ (this)).clickApply();
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    clickBackButton() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.backButton);
            yield this.backButton.click();
        });
    }
    /**
     * @return {?}
     */
    clickSsoRadioButton() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.ssoRadioButton);
            yield this.ssoRadioButton.click();
        });
    }
    /**
     * @param {?} contentServiceURL
     * @param {?} authHost
     * @param {?} identityHost
     * @param {?=} silentLogin
     * @param {?=} implicitFlow
     * @param {?=} clientId
     * @param {?=} logoutUr
     * @return {?}
     */
    setProviderEcmSso(contentServiceURL, authHost, identityHost, silentLogin = true, implicitFlow = true, clientId, logoutUr = '/logout') {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            this.goToSettingsPage();
            this.setProvider(this.ecm.option, this.ecm.text);
            BrowserVisibility.waitUntilElementIsNotOnPage(this.bpmText);
            BrowserVisibility.waitUntilElementIsVisible(this.ecmText);
            yield this.clickSsoRadioButton();
            yield this.setClientId(clientId);
            yield this.setContentServicesURL(contentServiceURL);
            yield this.setAuthHost(authHost);
            yield this.setIdentityHost(identityHost);
            yield this.setSilentLogin(silentLogin);
            yield this.setImplicitFlow(implicitFlow);
            yield this.setLogoutUrl(logoutUr);
            yield this.clickApply();
        });
    }
    /**
     * @param {?} processServiceURL
     * @param {?} authHost
     * @param {?} identityHost
     * @param {?=} silentLogin
     * @param {?=} implicitFlow
     * @return {?}
     */
    setProviderBpmSso(processServiceURL, authHost, identityHost, silentLogin = true, implicitFlow = true) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            this.goToSettingsPage();
            this.setProvider(this.bpm.option, this.bpm.text);
            BrowserVisibility.waitUntilElementIsVisible(this.bpmText);
            BrowserVisibility.waitUntilElementIsNotOnPage(this.ecmText);
            yield this.clickSsoRadioButton();
            yield this.setClientId();
            yield this.setProcessServicesURL(processServiceURL);
            yield this.setAuthHost(authHost);
            yield this.setIdentityHost(identityHost);
            yield this.setSilentLogin(silentLogin);
            yield this.setImplicitFlow(implicitFlow);
            yield this.clickApply();
        });
    }
    /**
     * @param {?} logoutUrl
     * @return {?}
     */
    setLogoutUrl(logoutUrl) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsPresent(this.logoutUrlText);
            this.logoutUrlText.clear();
            this.logoutUrlText.sendKeys(logoutUrl);
        });
    }
    /**
     * @param {?} processServiceURL
     * @return {?}
     */
    setProcessServicesURL(processServiceURL) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.bpmText);
            this.bpmText.clear();
            this.bpmText.sendKeys(processServiceURL);
        });
    }
    /**
     * @param {?=} clientId
     * @return {?}
     */
    setClientId(clientId = browser.params.config.oauth2.clientId) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.clientIdText);
            this.clientIdText.clear();
            this.clientIdText.sendKeys(clientId);
        });
    }
    /**
     * @param {?} contentServiceURL
     * @return {?}
     */
    setContentServicesURL(contentServiceURL) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsClickable(this.ecmText);
            this.ecmText.clear();
            this.ecmText.sendKeys(contentServiceURL);
        });
    }
    /**
     * @return {?}
     */
    clearContentServicesURL() {
        BrowserVisibility.waitUntilElementIsVisible(this.ecmText);
        this.ecmText.clear();
        this.ecmText.sendKeys('a');
        this.ecmText.sendKeys(protractor.Key.BACK_SPACE);
    }
    /**
     * @return {?}
     */
    clearProcessServicesURL() {
        BrowserVisibility.waitUntilElementIsVisible(this.bpmText);
        this.bpmText.clear();
        this.bpmText.sendKeys('a');
        this.bpmText.sendKeys(protractor.Key.BACK_SPACE);
    }
    /**
     * @param {?} authHostURL
     * @return {?}
     */
    setAuthHost(authHostURL) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.authHostText);
            yield this.authHostText.clear();
            yield this.authHostText.sendKeys(authHostURL);
        });
    }
    /**
     * @param {?} identityHost
     * @return {?}
     */
    setIdentityHost(identityHost) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.identityHostText);
            yield this.identityHostText.clear();
            yield this.identityHostText.sendKeys(identityHost);
        });
    }
    /**
     * @return {?}
     */
    clickApply() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            BrowserVisibility.waitUntilElementIsVisible(this.applyButton);
            yield this.applyButton.click();
        });
    }
    /**
     * @param {?} enableToggle
     * @return {?}
     */
    setSilentLogin(enableToggle) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            yield BrowserVisibility.waitUntilElementIsVisible(this.silentLoginToggleElement);
            /** @type {?} */
            const isChecked = (yield this.silentLoginToggleElement.getAttribute('class')).includes('mat-checked');
            if (isChecked && !enableToggle || !isChecked && enableToggle) {
                return this.silentLoginToggleLabel.click();
            }
            return Promise.resolve();
        });
    }
    /**
     * @param {?} enableToggle
     * @return {?}
     */
    setImplicitFlow(enableToggle) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            yield BrowserVisibility.waitUntilElementIsVisible(this.implicitFlowElement);
            /** @type {?} */
            const isChecked = (yield this.implicitFlowElement.getAttribute('class')).includes('mat-checked');
            if (isChecked && !enableToggle || !isChecked && enableToggle) {
                return this.implicitFlowLabel.click();
            }
            return Promise.resolve();
        });
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkApplyButtonIsDisabled() {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).applyButton.getAttribute('disabled'));
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    checkProviderDropdownIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible(this.providerDropdown);
    }
    /**
     * @return {?}
     */
    checkValidationMessageIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible(this.validationMessage);
    }
    /**
     * @return {?}
     */
    checkProviderOptions() {
        BrowserVisibility.waitUntilElementIsVisible(this.providerDropdown);
        this.providerDropdown.click();
        BrowserVisibility.waitUntilElementIsVisible(this.ecmAndBpm.option);
        BrowserVisibility.waitUntilElementIsVisible(this.ecm.option);
        BrowserVisibility.waitUntilElementIsVisible(this.bpm.option);
    }
    /**
     * @return {?}
     */
    getBasicAuthRadioButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.basicAuthRadioButton);
        return this.basicAuthRadioButton;
    }
    /**
     * @return {?}
     */
    getSsoRadioButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.ssoRadioButton);
        return this.ssoRadioButton;
    }
    /**
     * @return {?}
     */
    getBackButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.backButton);
        return this.backButton;
    }
    /**
     * @return {?}
     */
    getApplyButton() {
        BrowserVisibility.waitUntilElementIsVisible(this.applyButton);
        return this.applyButton;
    }
    /**
     * @return {?}
     */
    checkBasicAuthRadioIsSelected() {
        expect(this.getBasicAuthRadioButton().getAttribute('class')).toContain('mat-radio-checked');
    }
    /**
     * @return {?}
     */
    checkSsoRadioIsNotSelected() {
        expect(this.getSsoRadioButton().getAttribute('class')).not.toContain('mat-radio-checked');
    }
}
if (false) {
    /** @type {?} */
    SettingsPage.prototype.settingsURL;
    /** @type {?} */
    SettingsPage.prototype.providerDropdown;
    /** @type {?} */
    SettingsPage.prototype.ecmAndBpm;
    /** @type {?} */
    SettingsPage.prototype.bpm;
    /** @type {?} */
    SettingsPage.prototype.ecm;
    /** @type {?} */
    SettingsPage.prototype.oauth;
    /** @type {?} */
    SettingsPage.prototype.selectedOption;
    /** @type {?} */
    SettingsPage.prototype.ecmText;
    /** @type {?} */
    SettingsPage.prototype.bpmText;
    /** @type {?} */
    SettingsPage.prototype.clientIdText;
    /** @type {?} */
    SettingsPage.prototype.authHostText;
    /** @type {?} */
    SettingsPage.prototype.logoutUrlText;
    /** @type {?} */
    SettingsPage.prototype.basicAuthRadioButton;
    /** @type {?} */
    SettingsPage.prototype.identityHostText;
    /** @type {?} */
    SettingsPage.prototype.ssoRadioButton;
    /** @type {?} */
    SettingsPage.prototype.silentLoginToggleLabel;
    /** @type {?} */
    SettingsPage.prototype.silentLoginToggleElement;
    /** @type {?} */
    SettingsPage.prototype.implicitFlowLabel;
    /** @type {?} */
    SettingsPage.prototype.implicitFlowElement;
    /** @type {?} */
    SettingsPage.prototype.applyButton;
    /** @type {?} */
    SettingsPage.prototype.backButton;
    /** @type {?} */
    SettingsPage.prototype.validationMessage;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3MucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9jb3JlL3BhZ2VzL3NldHRpbmdzLnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFaEUsTUFBTSxPQUFPLFlBQVk7SUFBekI7UUFFSSxnQkFBVyxHQUFHLE9BQU8sQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO1FBQzVDLHFCQUFnQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDhFQUE4RSxDQUFDLENBQUMsQ0FBQztRQUNuSCxjQUFTLEdBQUc7WUFDUixNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsMERBQTBELENBQUMsQ0FBQztZQUNyRixJQUFJLEVBQUUsS0FBSztTQUNkLENBQUM7UUFDRixRQUFHLEdBQUc7WUFDRixNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsMkZBQTJGLENBQUMsQ0FBQztZQUN0SCxJQUFJLEVBQUUsS0FBSztTQUNkLENBQUM7UUFDRixRQUFHLEdBQUc7WUFDRixNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsMkZBQTJGLENBQUMsQ0FBQztZQUN0SCxJQUFJLEVBQUUsS0FBSztTQUNkLENBQUM7UUFDRixVQUFLLEdBQUc7WUFDSixNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsNERBQTRELENBQUMsQ0FBQztZQUN2RixJQUFJLEVBQUUsT0FBTztTQUNoQixDQUFDO1FBQ0YsbUJBQWMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFD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Q0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDOUQsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzVCLENBQUM7Ozs7SUFFRCw2QkFBNkI7UUFDekIsTUFBTSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQ2hHLENBQUM7Ozs7SUFFRCwwQkFBMEI7UUFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUM5RixDQUFDO0NBQ0o7OztJQXRSRyxtQ0FBNEM7O0lBQzVDLHdDQUFtSDs7SUFDbkgsaUNBR0U7O0lBQ0YsMkJBR0U7O0lBQ0YsMkJBR0U7O0lBQ0YsNkJBR0U7O0lBQ0Ysc0NBQXlFOztJQUN6RSwrQkFBa0U7O0lBQ2xFLCtCQUFrRTs7SUFDbEUsb0NBQXVEOztJQUN2RCxvQ0FBd0Q7O0lBQ3hELHFDQUEwRDs7SUFDMUQsNENBQWtIOztJQUNsSCx3Q0FBK0Q7O0lBQy9ELHNDQUEyRTs7SUFDM0UsOENBQXVGOztJQUN2RixnREFBbUY7O0lBQ25GLHlDQUFtRjs7SUFDbkYsMkNBQStFOztJQUMvRSxtQ0FBMkU7O0lBQzNFLGtDQUE4Rjs7SUFDOUYseUNBQXlGIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgYnJvd3NlciwgYnksIGVsZW1lbnQsIHByb3RyYWN0b3IgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci12aXNpYmlsaXR5JztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzUGFnZSB7XG5cbiAgICBzZXR0aW5nc1VSTCA9IGJyb3dzZXIuYmFzZVVybCArICcvc2V0dGluZ3MnO1xuICAgIHByb3ZpZGVyRHJvcGRvd24gPSBlbGVtZW50KGJ5LmNzcygnbWF0LXNlbGVjdFtpZD1cImFkZi1wcm92aWRlci1zZWxlY3RvclwiXSBkaXZbY2xhc3M9XCJtYXQtc2VsZWN0LWFycm93LXdyYXBwZXJcIl0nKSk7XG4gICAgZWNtQW5kQnBtID0ge1xuICAgICAgICBvcHRpb246IGVsZW1lbnQoYnkueHBhdGgoJy8vU1BBTltAY2xhc3M9XCJtYXQtb3B0aW9uLXRleHRcIl1bY29udGFpbnModGV4dCgpLFwiQUxMXCIpXScpKSxcbiAgICAgICAgdGV4dDogJ0FMTCdcbiAgICB9O1xuICAgIGJwbSA9IHtcbiAgICAgICAgb3B0aW9uOiBlbGVtZW50KGJ5LnhwYXRoKCcvL1NQQU5bQGNsYXNzPVwibWF0LW9wdGlvbi10ZXh0XCJdW2NvbnRhaW5zKHRleHQoKSxcIkJQTVwiKSBhbmQgbm90IChjb250YWlucyh0ZXh0KCksXCJhbmRcIikpXScpKSxcbiAgICAgICAgdGV4dDogJ0JQTSdcbiAgICB9O1xuICAgIGVjbSA9IHtcbiAgICAgICAgb3B0aW9uOiBlbGVtZW50KGJ5LnhwYXRoKCcvL1NQQU5bQGNsYXNzPVwibWF0LW9wdGlvbi10ZXh0XCJdW2NvbnRhaW5zKHRleHQoKSxcIkVDTVwiKSBhbmQgbm90IChjb250YWlucyh0ZXh0KCksXCJhbmRcIikpXScpKSxcbiAgICAgICAgdGV4dDogJ0VDTSdcbiAgICB9O1xuICAgIG9hdXRoID0ge1xuICAgICAgICBvcHRpb246IGVsZW1lbnQoYnkueHBhdGgoJy8vU1BBTltAY2xhc3M9XCJtYXQtb3B0aW9uLXRleHRcIl1bY29udGFpbnModGV4dCgpLFwiT0FVVEhcIildJykpLFxuICAgICAgICB0ZXh0OiAnT0FVVEgnXG4gICAgfTtcbiAgICBzZWxlY3RlZE9wdGlvbiA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuW2NsYXNzKj1cIm1hdC1zZWxlY3QtdmFsdWUtdGV4dFwiXScpKTtcbiAgICBlY21UZXh0ID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2RhdGEtYXV0b21hdGlvbi1pZCo9XCJlY21Ib3N0XCJdJykpO1xuICAgIGJwbVRleHQgPSBlbGVtZW50KGJ5LmNzcygnaW5wdXRbZGF0YS1hdXRvbWF0aW9uLWlkKj1cImJwbUhvc3RcIl0nKSk7XG4gICAgY2xpZW50SWRUZXh0ID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwiY2xpZW50SWRcIl0nKSk7XG4gICAgYXV0aEhvc3RUZXh0ID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwib2F1dGhIb3N0XCJdJykpO1xuICAgIGxvZ291dFVybFRleHQgPSBlbGVtZW50KGJ5LmNzcygnaW5wdXRbaWQ9XCJsb2dvdXQtdXJsXCJdJykpO1xuICAgIGJhc2ljQXV0aFJhZGlvQnV0dG9uID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnbWF0LXJhZGlvLWJ1dHRvbltpZCo9XCJtYXQtcmFkaW9cIl0nLCAnQmFzaWMgQXV0aGVudGljYXRpb24nKSk7XG4gICAgaWRlbnRpdHlIb3N0VGV4dCA9IGVsZW1lbnQoYnkuY3NzKCdpbnB1dFtpZD1cImlkZW50aXR5SG9zdFwiXScpKTtcbiAgICBzc29SYWRpb0J1dHRvbiA9IGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoJ1tpZCo9XCJtYXQtcmFkaW9cIl0nLCAnU1NPJykpO1xuICAgIHNpbGVudExvZ2luVG9nZ2xlTGFiZWwgPSBlbGVtZW50KGJ5LmNzcygnbWF0LXNsaWRlLXRvZ2dsZVtuYW1lPVwic2lsZW50TG9naW5cIl0gbGFiZWwnKSk7XG4gICAgc2lsZW50TG9naW5Ub2dnbGVFbGVtZW50ID0gZWxlbWVudChieS5jc3MoJ21hdC1zbGlkZS10b2dnbGVbbmFtZT1cInNpbGVudExvZ2luXCJdJykpO1xuICAgIGltcGxpY2l0Rmxvd0xhYmVsID0gZWxlbWVudChieS5jc3MoJ21hdC1zbGlkZS10b2dnbGVbbmFtZT1cImltcGxpY2l0Rmxvd1wiXSBsYWJlbCcpKTtcbiAgICBpbXBsaWNpdEZsb3dFbGVtZW50ID0gZWxlbWVudChieS5jc3MoJ21hdC1zbGlkZS10b2dnbGVbbmFtZT1cImltcGxpY2l0Rmxvd1wiXScpKTtcbiAgICBhcHBseUJ1dHRvbiA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bZGF0YS1hdXRvbWF0aW9uLWlkKj1cImhvc3QtYnV0dG9uXCJdJykpO1xuICAgIGJhY2tCdXR0b24gPSBlbGVtZW50KGJ5LmNzc0NvbnRhaW5pbmdUZXh0KCdidXR0b24gc3BhbltjbGFzcz1cIm1hdC1idXR0b24td3JhcHBlclwiXScsICdCYWNrJykpO1xuICAgIHZhbGlkYXRpb25NZXNzYWdlID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnbWF0LWVycm9yJywgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnKSk7XG5cbiAgICBnb1RvU2V0dGluZ3NQYWdlKCkge1xuICAgICAgICBicm93c2VyLndhaXRGb3JBbmd1bGFyRW5hYmxlZCh0cnVlKTtcbiAgICAgICAgYnJvd3Nlci5kcml2ZXIuZ2V0KHRoaXMuc2V0dGluZ3NVUkwpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucHJvdmlkZXJEcm9wZG93bik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldFByb3ZpZGVyKG9wdGlvbiwgc2VsZWN0ZWQpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnByb3ZpZGVyRHJvcGRvd24pO1xuICAgICAgICB0aGlzLnByb3ZpZGVyRHJvcGRvd24uY2xpY2soKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShvcHRpb24pO1xuICAgICAgICBvcHRpb24uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIGV4cGVjdCh0aGlzLnNlbGVjdGVkT3B0aW9uLmdldFRleHQoKSkudG9FcXVhbChzZWxlY3RlZCk7XG4gICAgfVxuXG4gICAgZ2V0U2VsZWN0ZWRPcHRpb25UZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZE9wdGlvbi5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0QnBtSG9zdFVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnBtVGV4dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgfVxuXG4gICAgZ2V0RWNtSG9zdFVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWNtVGV4dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgfVxuXG4gICAgZ2V0QnBtT3B0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5icG0ub3B0aW9uO1xuICAgIH1cblxuICAgIGdldEVjbU9wdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWNtLm9wdGlvbjtcbiAgICB9XG5cbiAgICBnZXRFY21BbmRCcG1PcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVjbUFuZEJwbS5vcHRpb247XG4gICAgfVxuXG4gICAgc2V0UHJvdmlkZXJFY21CcG0oKSB7XG4gICAgICAgIHRoaXMuZ29Ub1NldHRpbmdzUGFnZSgpO1xuICAgICAgICB0aGlzLnNldFByb3ZpZGVyKHRoaXMuZWNtQW5kQnBtLm9wdGlvbiwgdGhpcy5lY21BbmRCcG0udGV4dCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5icG1UZXh0KTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmVjbVRleHQpO1xuICAgICAgICB0aGlzLmNsaWNrQXBwbHkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0UHJvdmlkZXJCcG0oKSB7XG4gICAgICAgIHRoaXMuZ29Ub1NldHRpbmdzUGFnZSgpO1xuICAgICAgICB0aGlzLnNldFByb3ZpZGVyKHRoaXMuYnBtLm9wdGlvbiwgdGhpcy5icG0udGV4dCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5icG1UZXh0KTtcbiAgICAgICAgdGhpcy5jbGlja0FwcGx5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldFByb3ZpZGVyRWNtKCkge1xuICAgICAgICB0aGlzLmdvVG9TZXR0aW5nc1BhZ2UoKTtcbiAgICAgICAgdGhpcy5zZXRQcm92aWRlcih0aGlzLmVjbS5vcHRpb24sIHRoaXMuZWNtLnRleHQpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuZWNtVGV4dCk7XG4gICAgICAgIGV4cGVjdCh0aGlzLmJwbVRleHQuaXNQcmVzZW50KCkpLnRvQmVGYWxzeSgpO1xuICAgICAgICB0aGlzLmNsaWNrQXBwbHkoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgc2V0UHJvdmlkZXJPYXV0aCgpIHtcbiAgICAgICAgdGhpcy5nb1RvU2V0dGluZ3NQYWdlKCk7XG4gICAgICAgIHRoaXMuc2V0UHJvdmlkZXIodGhpcy5vYXV0aC5vcHRpb24sIHRoaXMub2F1dGgudGV4dCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5icG1UZXh0KTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmVjbVRleHQpO1xuICAgICAgICBleHBlY3QodGhpcy5hdXRoSG9zdFRleHQuaXNQcmVzZW50KCkpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgdGhpcy5jbGlja0FwcGx5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGFzeW5jIGNsaWNrQmFja0J1dHRvbigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmJhY2tCdXR0b24pO1xuICAgICAgICBhd2FpdCB0aGlzLmJhY2tCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBhc3luYyBjbGlja1Nzb1JhZGlvQnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc3NvUmFkaW9CdXR0b24pO1xuICAgICAgICBhd2FpdCB0aGlzLnNzb1JhZGlvQnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0UHJvdmlkZXJFY21Tc28oY29udGVudFNlcnZpY2VVUkwsIGF1dGhIb3N0LCBpZGVudGl0eUhvc3QsIHNpbGVudExvZ2luID0gdHJ1ZSwgaW1wbGljaXRGbG93ID0gdHJ1ZSwgY2xpZW50SWQ/OiBzdHJpbmcsIGxvZ291dFVyOiBzdHJpbmcgPSAnL2xvZ291dCcpIHtcbiAgICAgICAgdGhpcy5nb1RvU2V0dGluZ3NQYWdlKCk7XG4gICAgICAgIHRoaXMuc2V0UHJvdmlkZXIodGhpcy5lY20ub3B0aW9uLCB0aGlzLmVjbS50ZXh0KTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMuYnBtVGV4dCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5lY21UZXh0KTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGlja1Nzb1JhZGlvQnV0dG9uKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q2xpZW50SWQoY2xpZW50SWQpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldENvbnRlbnRTZXJ2aWNlc1VSTChjb250ZW50U2VydmljZVVSTCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0QXV0aEhvc3QoYXV0aEhvc3QpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldElkZW50aXR5SG9zdChpZGVudGl0eUhvc3QpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldFNpbGVudExvZ2luKHNpbGVudExvZ2luKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRJbXBsaWNpdEZsb3coaW1wbGljaXRGbG93KTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRMb2dvdXRVcmwobG9nb3V0VXIpO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWNrQXBwbHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRQcm92aWRlckJwbVNzbyhwcm9jZXNzU2VydmljZVVSTCwgYXV0aEhvc3QsIGlkZW50aXR5SG9zdCwgc2lsZW50TG9naW4gPSB0cnVlLCBpbXBsaWNpdEZsb3cgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuZ29Ub1NldHRpbmdzUGFnZSgpO1xuICAgICAgICB0aGlzLnNldFByb3ZpZGVyKHRoaXMuYnBtLm9wdGlvbiwgdGhpcy5icG0udGV4dCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5icG1UZXh0KTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMuZWNtVGV4dCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpY2tTc29SYWRpb0J1dHRvbigpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldENsaWVudElkKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0UHJvY2Vzc1NlcnZpY2VzVVJMKHByb2Nlc3NTZXJ2aWNlVVJMKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRBdXRoSG9zdChhdXRoSG9zdCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0SWRlbnRpdHlIb3N0KGlkZW50aXR5SG9zdCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2lsZW50TG9naW4oc2lsZW50TG9naW4pO1xuICAgICAgICBhd2FpdCB0aGlzLnNldEltcGxpY2l0RmxvdyhpbXBsaWNpdEZsb3cpO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWNrQXBwbHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRMb2dvdXRVcmwobG9nb3V0VXJsKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1ByZXNlbnQodGhpcy5sb2dvdXRVcmxUZXh0KTtcbiAgICAgICAgdGhpcy5sb2dvdXRVcmxUZXh0LmNsZWFyKCk7XG4gICAgICAgIHRoaXMubG9nb3V0VXJsVGV4dC5zZW5kS2V5cyhsb2dvdXRVcmwpO1xuICAgIH1cblxuICAgIGFzeW5jIHNldFByb2Nlc3NTZXJ2aWNlc1VSTChwcm9jZXNzU2VydmljZVVSTCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuYnBtVGV4dCk7XG4gICAgICAgIHRoaXMuYnBtVGV4dC5jbGVhcigpO1xuICAgICAgICB0aGlzLmJwbVRleHQuc2VuZEtleXMocHJvY2Vzc1NlcnZpY2VVUkwpO1xuICAgIH1cblxuICAgIGFzeW5jIHNldENsaWVudElkKGNsaWVudElkOiBzdHJpbmcgPSBicm93c2VyLnBhcmFtcy5jb25maWcub2F1dGgyLmNsaWVudElkKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5jbGllbnRJZFRleHQpO1xuICAgICAgICB0aGlzLmNsaWVudElkVGV4dC5jbGVhcigpO1xuICAgICAgICB0aGlzLmNsaWVudElkVGV4dC5zZW5kS2V5cyhjbGllbnRJZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2V0Q29udGVudFNlcnZpY2VzVVJMKGNvbnRlbnRTZXJ2aWNlVVJMKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZSh0aGlzLmVjbVRleHQpO1xuICAgICAgICB0aGlzLmVjbVRleHQuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5lY21UZXh0LnNlbmRLZXlzKGNvbnRlbnRTZXJ2aWNlVVJMKTtcbiAgICB9XG5cbiAgICBjbGVhckNvbnRlbnRTZXJ2aWNlc1VSTCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmVjbVRleHQpO1xuICAgICAgICB0aGlzLmVjbVRleHQuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5lY21UZXh0LnNlbmRLZXlzKCdhJyk7XG4gICAgICAgIHRoaXMuZWNtVGV4dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcbiAgICB9XG5cbiAgICBjbGVhclByb2Nlc3NTZXJ2aWNlc1VSTCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmJwbVRleHQpO1xuICAgICAgICB0aGlzLmJwbVRleHQuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5icG1UZXh0LnNlbmRLZXlzKCdhJyk7XG4gICAgICAgIHRoaXMuYnBtVGV4dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRBdXRoSG9zdChhdXRoSG9zdFVSTCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuYXV0aEhvc3RUZXh0KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoSG9zdFRleHQuY2xlYXIoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoSG9zdFRleHQuc2VuZEtleXMoYXV0aEhvc3RVUkwpO1xuICAgIH1cblxuICAgIGFzeW5jIHNldElkZW50aXR5SG9zdChpZGVudGl0eUhvc3QpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmlkZW50aXR5SG9zdFRleHQpO1xuICAgICAgICBhd2FpdCB0aGlzLmlkZW50aXR5SG9zdFRleHQuY2xlYXIoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pZGVudGl0eUhvc3RUZXh0LnNlbmRLZXlzKGlkZW50aXR5SG9zdCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY2xpY2tBcHBseSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmFwcGx5QnV0dG9uKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseUJ1dHRvbi5jbGljaygpO1xuICAgIH1cblxuICAgIGFzeW5jIHNldFNpbGVudExvZ2luKGVuYWJsZVRvZ2dsZSkge1xuICAgICAgICBhd2FpdCBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2lsZW50TG9naW5Ub2dnbGVFbGVtZW50KTtcblxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoYXdhaXQgdGhpcy5zaWxlbnRMb2dpblRvZ2dsZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5pbmNsdWRlcygnbWF0LWNoZWNrZWQnKTtcblxuICAgICAgICBpZiAoaXNDaGVja2VkICYmICFlbmFibGVUb2dnbGUgfHwgIWlzQ2hlY2tlZCAmJiBlbmFibGVUb2dnbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpbGVudExvZ2luVG9nZ2xlTGFiZWwuY2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXRJbXBsaWNpdEZsb3coZW5hYmxlVG9nZ2xlKSB7XG4gICAgICAgIGF3YWl0IEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5pbXBsaWNpdEZsb3dFbGVtZW50KTtcblxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoYXdhaXQgdGhpcy5pbXBsaWNpdEZsb3dFbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuaW5jbHVkZXMoJ21hdC1jaGVja2VkJyk7XG5cbiAgICAgICAgaWYgKGlzQ2hlY2tlZCAmJiAhZW5hYmxlVG9nZ2xlIHx8ICFpc0NoZWNrZWQgJiYgZW5hYmxlVG9nZ2xlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbXBsaWNpdEZsb3dMYWJlbC5jbGljaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNoZWNrQXBwbHlCdXR0b25Jc0Rpc2FibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuYXBwbHlCdXR0b24uZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tQcm92aWRlckRyb3Bkb3duSXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wcm92aWRlckRyb3Bkb3duKTtcbiAgICB9XG5cbiAgICBjaGVja1ZhbGlkYXRpb25NZXNzYWdlSXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgY2hlY2tQcm92aWRlck9wdGlvbnMoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wcm92aWRlckRyb3Bkb3duKTtcbiAgICAgICAgdGhpcy5wcm92aWRlckRyb3Bkb3duLmNsaWNrKCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5lY21BbmRCcG0ub3B0aW9uKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmVjbS5vcHRpb24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuYnBtLm9wdGlvbik7XG4gICAgfVxuXG4gICAgZ2V0QmFzaWNBdXRoUmFkaW9CdXR0b24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5iYXNpY0F1dGhSYWRpb0J1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2ljQXV0aFJhZGlvQnV0dG9uO1xuICAgIH1cblxuICAgIGdldFNzb1JhZGlvQnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc3NvUmFkaW9CdXR0b24pO1xuICAgICAgICByZXR1cm4gdGhpcy5zc29SYWRpb0J1dHRvbjtcbiAgICB9XG5cbiAgICBnZXRCYWNrQnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuYmFja0J1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmJhY2tCdXR0b247XG4gICAgfVxuXG4gICAgZ2V0QXBwbHlCdXR0b24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5hcHBseUJ1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5QnV0dG9uO1xuICAgIH1cblxuICAgIGNoZWNrQmFzaWNBdXRoUmFkaW9Jc1NlbGVjdGVkKCkge1xuICAgICAgICBleHBlY3QodGhpcy5nZXRCYXNpY0F1dGhSYWRpb0J1dHRvbigpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9Db250YWluKCdtYXQtcmFkaW8tY2hlY2tlZCcpO1xuICAgIH1cblxuICAgIGNoZWNrU3NvUmFkaW9Jc05vdFNlbGVjdGVkKCkge1xuICAgICAgICBleHBlY3QodGhpcy5nZXRTc29SYWRpb0J1dHRvbigpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkubm90LnRvQ29udGFpbignbWF0LXJhZGlvLWNoZWNrZWQnKTtcbiAgICB9XG59XG4iXX0=