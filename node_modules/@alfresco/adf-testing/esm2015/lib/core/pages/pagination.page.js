/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { browser, by, element, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
export class PaginationPage {
    constructor() {
        this.itemsPerPageDropdown = element(by.css('div[class*="adf-pagination__perpage-block"] button'));
        this.pageSelectorDropDown = element(by.css('div[class*="adf-pagination__page-selector"]'));
        this.pageSelectorArrow = element(by.css('button[data-automation-id="page-selector"]'));
        this.itemsPerPage = element(by.css('span[class="adf-pagination__max-items"]'));
        this.currentPage = element(by.css('span[class="adf-pagination__current-page"]'));
        this.totalPages = element(by.css('span[class="adf-pagination__total-pages"]'));
        this.paginationRange = element(by.css('span[class="adf-pagination__range"]'));
        this.nextPageButton = element(by.css('button[class*="adf-pagination__next-button"]'));
        this.nextButtonDisabled = element(by.css('button[class*="adf-pagination__next-button"][disabled]'));
        this.previousButtonDisabled = element(by.css('button[class*="adf-pagination__previous-button"][disabled]'));
        this.pageDropDown = element(by.css('div[class*="adf-pagination__actualinfo-block"] button'));
        this.pageDropDownOptions = by.css('div[class*="mat-menu-content"] button');
        this.paginationSection = element(by.css('adf-pagination'));
        this.paginationSectionEmpty = element(by.css('adf-pagination[class*="adf-pagination__empty"]'));
        this.totalFiles = element(by.css('span[class="adf-pagination__range"]'));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItem
     * @return {THIS}
     */
    selectItemsPerPage(numberOfItem) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).itemsPerPageDropdown);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).itemsPerPageDropdown);
        browser.actions().mouseMove((/** @type {?} */ (this)).itemsPerPageDropdown).perform();
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).itemsPerPageDropdown);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).itemsPerPageDropdown);
        (/** @type {?} */ (this)).itemsPerPageDropdown.click();
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).pageSelectorDropDown);
        /** @type {?} */
        const itemsPerPage = element.all(by.cssContainingText('.mat-menu-item', numberOfItem)).first();
        BrowserVisibility.waitUntilElementIsClickable(itemsPerPage);
        BrowserVisibility.waitUntilElementIsVisible(itemsPerPage);
        itemsPerPage.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    checkPageSelectorIsNotDisplayed() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.pageSelectorArrow);
    }
    /**
     * @return {?}
     */
    checkPageSelectorIsDisplayed() {
        BrowserVisibility.waitUntilElementIsVisible(this.pageSelectorArrow);
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    checkPaginationIsNotDisplayed() {
        BrowserVisibility.waitUntilElementIsOnPage((/** @type {?} */ (this)).paginationSectionEmpty);
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    getCurrentItemsPerPage() {
        BrowserVisibility.waitUntilElementIsVisible(this.itemsPerPage);
        return this.itemsPerPage.getText();
    }
    /**
     * @return {?}
     */
    getCurrentPage() {
        BrowserVisibility.waitUntilElementIsVisible(this.paginationSection);
        BrowserVisibility.waitUntilElementIsVisible(this.currentPage);
        return this.currentPage.getText();
    }
    /**
     * @return {?}
     */
    getTotalPages() {
        BrowserVisibility.waitUntilElementIsVisible(this.totalPages);
        return this.totalPages.getText();
    }
    /**
     * @return {?}
     */
    getPaginationRange() {
        BrowserVisibility.waitUntilElementIsVisible(this.paginationRange);
        return this.paginationRange.getText();
    }
    /**
     * @return {?}
     */
    clickOnNextPage() {
        BrowserVisibility.waitUntilElementIsVisible(this.nextPageButton);
        BrowserVisibility.waitUntilElementIsClickable(this.nextPageButton);
        browser.actions().mouseMove(this.nextPageButton).perform();
        BrowserVisibility.waitUntilElementIsVisible(this.nextPageButton);
        BrowserVisibility.waitUntilElementIsClickable(this.nextPageButton);
        return this.nextPageButton.click();
    }
    /**
     * @return {?}
     */
    clickOnPageDropdown() {
        BrowserVisibility.waitUntilElementIsVisible(this.pageDropDown);
        BrowserVisibility.waitUntilElementIsClickable(this.pageDropDown);
        return this.pageDropDown.click();
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItemPerPage
     * @return {THIS}
     */
    clickOnPageDropdownOption(numberOfItemPerPage) {
        BrowserVisibility.waitUntilElementIsVisible(element.all((/** @type {?} */ (this)).pageDropDownOptions).first());
        /** @type {?} */
        const option = element(by.cssContainingText('div[class*="mat-menu-content"] button', numberOfItemPerPage));
        BrowserVisibility.waitUntilElementIsVisible(option);
        option.click();
        return (/** @type {?} */ (this));
    }
    /**
     * @return {?}
     */
    getPageDropdownOptions() {
        /** @type {?} */
        const deferred = protractor.promise.defer();
        BrowserVisibility.waitUntilElementIsVisible(element.all(this.pageDropDownOptions).first());
        /** @type {?} */
        const initialList = [];
        element.all(this.pageDropDownOptions).each((/**
         * @param {?} currentOption
         * @return {?}
         */
        function (currentOption) {
            currentOption.getText().then((/**
             * @param {?} text
             * @return {?}
             */
            function (text) {
                if (text !== '') {
                    initialList.push(text);
                }
            }));
        })).then((/**
         * @return {?}
         */
        function () {
            deferred.fulfill(initialList);
        }));
        return deferred.promise;
    }
    /**
     * @return {?}
     */
    checkNextPageButtonIsDisabled() {
        BrowserVisibility.waitUntilElementIsVisible(this.nextButtonDisabled);
    }
    /**
     * @return {?}
     */
    checkPreviousPageButtonIsDisabled() {
        BrowserVisibility.waitUntilElementIsVisible(this.previousButtonDisabled);
    }
    /**
     * @return {?}
     */
    checkNextPageButtonIsEnabled() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.nextButtonDisabled);
    }
    /**
     * @return {?}
     */
    checkPreviousPageButtonIsEnabled() {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.previousButtonDisabled);
    }
    /**
     * @return {?}
     */
    getTotalNumberOfFiles() {
        BrowserVisibility.waitUntilElementIsVisible(this.totalFiles);
        /** @type {?} */
        const numberOfFiles = this.totalFiles.getText().then((/**
         * @param {?} totalNumber
         * @return {?}
         */
        function (totalNumber) {
            /** @type {?} */
            const totalNumberOfFiles = totalNumber.split('of ')[1];
            return totalNumberOfFiles;
        }));
        return numberOfFiles;
    }
}
if (false) {
    /** @type {?} */
    PaginationPage.prototype.itemsPerPageDropdown;
    /** @type {?} */
    PaginationPage.prototype.pageSelectorDropDown;
    /** @type {?} */
    PaginationPage.prototype.pageSelectorArrow;
    /** @type {?} */
    PaginationPage.prototype.itemsPerPage;
    /** @type {?} */
    PaginationPage.prototype.currentPage;
    /** @type {?} */
    PaginationPage.prototype.totalPages;
    /** @type {?} */
    PaginationPage.prototype.paginationRange;
    /** @type {?} */
    PaginationPage.prototype.nextPageButton;
    /** @type {?} */
    PaginationPage.prototype.nextButtonDisabled;
    /** @type {?} */
    PaginationPage.prototype.previousButtonDisabled;
    /** @type {?} */
    PaginationPage.prototype.pageDropDown;
    /** @type {?} */
    PaginationPage.prototype.pageDropDownOptions;
    /** @type {?} */
    PaginationPage.prototype.paginationSection;
    /** @type {?} */
    PaginationPage.prototype.paginationSectionEmpty;
    /** @type {?} */
    PaginationPage.prototype.totalFiles;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5wYWdlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsZnJlc2NvL2FkZi10ZXN0aW5nLyIsInNvdXJjZXMiOlsibGliL2NvcmUvcGFnZXMvcGFnaW5hdGlvbi5wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFaEUsTUFBTSxPQUFPLGNBQWM7SUFBM0I7UUFFSSx5QkFBb0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxvREFBb0QsQ0FBQyxDQUFDLENBQUM7UUFDN0YseUJBQW9CLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsNkNBQTZDLENBQUMsQ0FBQyxDQUFDO1FBQ3RGLHNCQUFpQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxDQUFDLENBQUMsQ0FBQztRQUNsRixpQkFBWSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUMsQ0FBQztRQUMxRSxnQkFBVyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDRDQUE0QyxDQUFDLENBQUMsQ0FBQztRQUM1RSxlQUFVLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsMkNBQTJDLENBQUMsQ0FBQyxDQUFDO1FBQzFFLG9CQUFlLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMscUNBQXFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pFLG1CQUFjLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsOENBQThDLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLHVCQUFrQixHQUFHLE9BQU8sQ0FBQyxF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Qzs7OztJQUVELGlDQUFpQztRQUM3QixpQkFBaUIsQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUM3RSxDQUFDOzs7O0lBRUQsNEJBQTRCO1FBQ3hCLGlCQUFpQixDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQzNFLENBQUM7Ozs7SUFFRCxnQ0FBZ0M7UUFDNUIsaUJBQWlCLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDL0UsQ0FBQzs7OztJQUVELHFCQUFxQjtRQUNqQixpQkFBaUIsQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7O2NBQ3ZELGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUk7Ozs7UUFBQyxVQUFVLFdBQVc7O2tCQUNoRSxrQkFBa0IsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RCxPQUFPLGtCQUFrQixDQUFDO1FBQzlCLENBQUMsRUFBQztRQUVGLE9BQU8sYUFBYSxDQUFDO0lBQ3pCLENBQUM7Q0FDSjs7O0lBbElHLDhDQUE2Rjs7SUFDN0YsOENBQXNGOztJQUN0RiwyQ0FBa0Y7O0lBQ2xGLHNDQUEwRTs7SUFDMUUscUNBQTRFOztJQUM1RSxvQ0FBMEU7O0lBQzFFLHlDQUF5RTs7SUFDekUsd0NBQWlGOztJQUNqRiw0Q0FBK0Y7O0lBQy9GLGdEQUF1Rzs7SUFDdkcsc0NBQXdGOztJQUN4Riw2Q0FBc0U7O0lBQ3RFLDJDQUFzRDs7SUFDdEQsZ0RBQTJGOztJQUMzRixvQ0FBb0UiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBicm93c2VyLCBieSwgZWxlbWVudCwgcHJvdHJhY3RvciB9IGZyb20gJ3Byb3RyYWN0b3InO1xuaW1wb3J0IHsgQnJvd3NlclZpc2liaWxpdHkgfSBmcm9tICcuLi91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvblBhZ2Uge1xuXG4gICAgaXRlbXNQZXJQYWdlRHJvcGRvd24gPSBlbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19wZXJwYWdlLWJsb2NrXCJdIGJ1dHRvbicpKTtcbiAgICBwYWdlU2VsZWN0b3JEcm9wRG93biA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX3BhZ2Utc2VsZWN0b3JcIl0nKSk7XG4gICAgcGFnZVNlbGVjdG9yQXJyb3cgPSBlbGVtZW50KGJ5LmNzcygnYnV0dG9uW2RhdGEtYXV0b21hdGlvbi1pZD1cInBhZ2Utc2VsZWN0b3JcIl0nKSk7XG4gICAgaXRlbXNQZXJQYWdlID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fbWF4LWl0ZW1zXCJdJykpO1xuICAgIGN1cnJlbnRQYWdlID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fY3VycmVudC1wYWdlXCJdJykpO1xuICAgIHRvdGFsUGFnZXMgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltjbGFzcz1cImFkZi1wYWdpbmF0aW9uX190b3RhbC1wYWdlc1wiXScpKTtcbiAgICBwYWdpbmF0aW9uUmFuZ2UgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltjbGFzcz1cImFkZi1wYWdpbmF0aW9uX19yYW5nZVwiXScpKTtcbiAgICBuZXh0UGFnZUJ1dHRvbiA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX25leHQtYnV0dG9uXCJdJykpO1xuICAgIG5leHRCdXR0b25EaXNhYmxlZCA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX25leHQtYnV0dG9uXCJdW2Rpc2FibGVkXScpKTtcbiAgICBwcmV2aW91c0J1dHRvbkRpc2FibGVkID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltjbGFzcyo9XCJhZGYtcGFnaW5hdGlvbl9fcHJldmlvdXMtYnV0dG9uXCJdW2Rpc2FibGVkXScpKTtcbiAgICBwYWdlRHJvcERvd24gPSBlbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19hY3R1YWxpbmZvLWJsb2NrXCJdIGJ1dHRvbicpKTtcbiAgICBwYWdlRHJvcERvd25PcHRpb25zID0gYnkuY3NzKCdkaXZbY2xhc3MqPVwibWF0LW1lbnUtY29udGVudFwiXSBidXR0b24nKTtcbiAgICBwYWdpbmF0aW9uU2VjdGlvbiA9IGVsZW1lbnQoYnkuY3NzKCdhZGYtcGFnaW5hdGlvbicpKTtcbiAgICBwYWdpbmF0aW9uU2VjdGlvbkVtcHR5ID0gZWxlbWVudChieS5jc3MoJ2FkZi1wYWdpbmF0aW9uW2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19lbXB0eVwiXScpKTtcbiAgICB0b3RhbEZpbGVzID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fcmFuZ2VcIl0nKSk7XG5cbiAgICBzZWxlY3RJdGVtc1BlclBhZ2UobnVtYmVyT2ZJdGVtOiBzdHJpbmcpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLml0ZW1zUGVyUGFnZURyb3Bkb3duKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24pO1xuICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5tb3VzZU1vdmUodGhpcy5pdGVtc1BlclBhZ2VEcm9wZG93bikucGVyZm9ybSgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5pdGVtc1BlclBhZ2VEcm9wZG93bik7XG4gICAgICAgIHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24uY2xpY2soKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnBhZ2VTZWxlY3RvckRyb3BEb3duKTtcblxuICAgICAgICBjb25zdCBpdGVtc1BlclBhZ2UgPSBlbGVtZW50LmFsbChieS5jc3NDb250YWluaW5nVGV4dCgnLm1hdC1tZW51LWl0ZW0nLCBudW1iZXJPZkl0ZW0pKS5maXJzdCgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUoaXRlbXNQZXJQYWdlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShpdGVtc1BlclBhZ2UpO1xuICAgICAgICBpdGVtc1BlclBhZ2UuY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tQYWdlU2VsZWN0b3JJc05vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMucGFnZVNlbGVjdG9yQXJyb3cpO1xuICAgIH1cblxuICAgIGNoZWNrUGFnZVNlbGVjdG9ySXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wYWdlU2VsZWN0b3JBcnJvdyk7XG4gICAgfVxuXG4gICAgY2hlY2tQYWdpbmF0aW9uSXNOb3REaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc09uUGFnZSh0aGlzLnBhZ2luYXRpb25TZWN0aW9uRW1wdHkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50SXRlbXNQZXJQYWdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuaXRlbXNQZXJQYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNQZXJQYWdlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50UGFnZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnBhZ2luYXRpb25TZWN0aW9uKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFBhZ2UuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldFRvdGFsUGFnZXMoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy50b3RhbFBhZ2VzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxQYWdlcy5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0UGFnaW5hdGlvblJhbmdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucGFnaW5hdGlvblJhbmdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdGlvblJhbmdlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBjbGlja09uTmV4dFBhZ2UoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5uZXh0UGFnZUJ1dHRvbik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZSh0aGlzLm5leHRQYWdlQnV0dG9uKTtcbiAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkubW91c2VNb3ZlKHRoaXMubmV4dFBhZ2VCdXR0b24pLnBlcmZvcm0oKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLm5leHRQYWdlQnV0dG9uKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMubmV4dFBhZ2VCdXR0b24pO1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0UGFnZUJ1dHRvbi5jbGljaygpO1xuICAgIH1cblxuICAgIGNsaWNrT25QYWdlRHJvcGRvd24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wYWdlRHJvcERvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5wYWdlRHJvcERvd24pO1xuICAgICAgICByZXR1cm4gdGhpcy5wYWdlRHJvcERvd24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBjbGlja09uUGFnZURyb3Bkb3duT3B0aW9uKG51bWJlck9mSXRlbVBlclBhZ2U6IHN0cmluZykge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGVsZW1lbnQuYWxsKHRoaXMucGFnZURyb3BEb3duT3B0aW9ucykuZmlyc3QoKSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoJ2RpdltjbGFzcyo9XCJtYXQtbWVudS1jb250ZW50XCJdIGJ1dHRvbicsIG51bWJlck9mSXRlbVBlclBhZ2UpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShvcHRpb24pO1xuICAgICAgICBvcHRpb24uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZ2V0UGFnZURyb3Bkb3duT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBwcm90cmFjdG9yLnByb21pc2UuZGVmZXIoKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShlbGVtZW50LmFsbCh0aGlzLnBhZ2VEcm9wRG93bk9wdGlvbnMpLmZpcnN0KCkpO1xuICAgICAgICBjb25zdCBpbml0aWFsTGlzdCA9IFtdO1xuICAgICAgICBlbGVtZW50LmFsbCh0aGlzLnBhZ2VEcm9wRG93bk9wdGlvbnMpLmVhY2goZnVuY3Rpb24gKGN1cnJlbnRPcHRpb24pIHtcbiAgICAgICAgICAgIGN1cnJlbnRPcHRpb24uZ2V0VGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGV4dCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExpc3QucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5mdWxmaWxsKGluaXRpYWxMaXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGNoZWNrTmV4dFBhZ2VCdXR0b25Jc0Rpc2FibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMubmV4dEJ1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBjaGVja1ByZXZpb3VzUGFnZUJ1dHRvbklzRGlzYWJsZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wcmV2aW91c0J1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBjaGVja05leHRQYWdlQnV0dG9uSXNFbmFibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5uZXh0QnV0dG9uRGlzYWJsZWQpO1xuICAgIH1cblxuICAgIGNoZWNrUHJldmlvdXNQYWdlQnV0dG9uSXNFbmFibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5wcmV2aW91c0J1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBnZXRUb3RhbE51bWJlck9mRmlsZXMoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy50b3RhbEZpbGVzKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZGaWxlcyA9IHRoaXMudG90YWxGaWxlcy5nZXRUZXh0KCkudGhlbihmdW5jdGlvbiAodG90YWxOdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsTnVtYmVyT2ZGaWxlcyA9IHRvdGFsTnVtYmVyLnNwbGl0KCdvZiAnKVsxXTtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbE51bWJlck9mRmlsZXM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBudW1iZXJPZkZpbGVzO1xuICAgIH1cbn1cbiJdfQ==