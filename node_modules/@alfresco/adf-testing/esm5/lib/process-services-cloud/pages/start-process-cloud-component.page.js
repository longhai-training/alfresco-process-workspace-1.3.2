/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { by, element, Key, protractor, browser } from 'protractor';
import { BrowserVisibility } from '../../core/utils/browser-visibility';
var StartProcessCloudPage = /** @class */ (function () {
    function StartProcessCloudPage() {
        this.defaultProcessName = element(by.css('input[id="processName"]'));
        this.processNameInput = element(by.id('processName'));
        this.selectProcessDropdownArrow = element(by.css('button[id="adf-select-process-dropdown"]'));
        this.cancelProcessButton = element(by.id('cancel_process'));
        this.formStartProcessButton = element(by.css('button[data-automation-id="adf-form-start process"]'));
        this.startProcessButton = element(by.css('button[data-automation-id="btn-start"]'));
        this.noProcess = element(by.id('no-process-message'));
        this.processDefinition = element(by.css('input[id="processDefinitionName"]'));
        this.processDefinitionOptionsPanel = element(by.css('div[class*="processDefinitionOptions"]'));
    }
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.checkNoProcessMessage = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.noProcess);
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.pressDownArrowAndEnter = /**
     * @return {?}
     */
    function () {
        this.processDefinition.sendKeys(protractor.Key.ARROW_DOWN);
        return browser.actions().sendKeys(protractor.Key.ENTER).perform();
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.checkNoProcessDefinitionOptionIsDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.processDefinitionOptionsPanel);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    StartProcessCloudPage.prototype.enterProcessName = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        BrowserVisibility.waitUntilElementIsVisible(this.processNameInput);
        this.clearProcessName();
        this.processNameInput.sendKeys(name);
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.clearProcessName = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.processNameInput);
        this.processNameInput.clear();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    StartProcessCloudPage.prototype.selectFromProcessDropdown = /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    function (name) {
        (/** @type {?} */ (this)).clickProcessDropdownArrow();
        return (/** @type {?} */ (this)).selectOption(name);
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.clickProcessDropdownArrow = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.selectProcessDropdownArrow);
        BrowserVisibility.waitUntilElementIsClickable(this.selectProcessDropdownArrow);
        this.selectProcessDropdownArrow.click();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    StartProcessCloudPage.prototype.checkOptionIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    function (name) {
        /** @type {?} */
        var selectProcessDropdown = element(by.cssContainingText('.mat-option-text', name));
        BrowserVisibility.waitUntilElementIsVisible(selectProcessDropdown);
        BrowserVisibility.waitUntilElementIsClickable(selectProcessDropdown);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    StartProcessCloudPage.prototype.selectOption = /**
     * @template THIS
     * @this {THIS}
     * @param {?} name
     * @return {THIS}
     */
    function (name) {
        /** @type {?} */
        var selectProcessDropdown = element(by.cssContainingText('.mat-option-text', name));
        BrowserVisibility.waitUntilElementIsVisible(selectProcessDropdown);
        BrowserVisibility.waitUntilElementIsClickable(selectProcessDropdown);
        selectProcessDropdown.click();
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.clickCancelProcessButton = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.cancelProcessButton);
        this.cancelProcessButton.click();
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.checkStartProcessButtonIsEnabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsClickable(this.startProcessButton);
        expect(this.startProcessButton.isEnabled()).toBe(true);
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.checkStartProcessButtonIsDisabled = /**
     * @return {?}
     */
    function () {
        expect(this.startProcessButton.isEnabled()).toBe(false);
    };
    /**
     * @return {?}
     */
    StartProcessCloudPage.prototype.clickStartProcessButton = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsClickable(this.startProcessButton);
        return this.startProcessButton.click();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @param {?=} elementRef
     * @return {THIS}
     */
    StartProcessCloudPage.prototype.checkValidationErrorIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @param {?} error
     * @param {?=} elementRef
     * @return {THIS}
     */
    function (error, elementRef) {
        if (elementRef === void 0) { elementRef = 'mat-error'; }
        /** @type {?} */
        var errorElement = element(by.cssContainingText(elementRef, error));
        BrowserVisibility.waitUntilElementIsVisible(errorElement);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @return {THIS}
     */
    StartProcessCloudPage.prototype.blur = /**
     * @template THIS
     * @this {THIS}
     * @param {?} locator
     * @return {THIS}
     */
    function (locator) {
        locator.click();
        locator.sendKeys(Key.TAB);
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} locator
     * @return {?}
     */
    StartProcessCloudPage.prototype.clearField = /**
     * @param {?} locator
     * @return {?}
     */
    function (locator) {
        BrowserVisibility.waitUntilElementIsVisible(locator);
        locator.getAttribute('value').then((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            for (var i = result.length; i >= 0; i--) {
                locator.sendKeys(protractor.Key.BACK_SPACE);
            }
        }));
    };
    return StartProcessCloudPage;
}());
export { StartProcessCloudPage };
if (false) {
    /** @type {?} */
    StartProcessCloudPage.prototype.defaultProcessName;
    /** @type {?} */
    StartProcessCloudPage.prototype.processNameInput;
    /** @type {?} */
    StartProcessCloudPage.prototype.selectProcessDropdownArrow;
    /** @type {?} */
    StartProcessCloudPage.prototype.cancelProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.formStartProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.startProcessButton;
    /** @type {?} */
    StartProcessCloudPage.prototype.noProcess;
    /** @type {?} */
    StartProcessCloudPage.prototype.processDefinition;
    /** @type {?} */
    StartProcessCloudPage.prototype.processDefinitionOptionsPanel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcnQtcHJvY2Vzcy1jbG91ZC1jb21wb25lbnQucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9wcm9jZXNzLXNlcnZpY2VzLWNsb3VkL3BhZ2VzL3N0YXJ0LXByb2Nlc3MtY2xvdWQtY29tcG9uZW50LnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkEsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDbkUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFFeEU7SUFBQTtRQUVJLHVCQUFrQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQztRQUNoRSxxQkFBZ0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQ2pELCtCQUEwQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLENBQUMsQ0FBQztRQUN6Rix3QkFBbUIsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7UUFDdkQsMkJBQXNCLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMscURBQXFELENBQUMsQ0FBQyxDQUFDO1FBQ2hHLHVCQUFrQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHdDQUF3QyxDQUFDLENBQUMsQ0FBQztRQUMvRSxjQUFTLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO1FBQ2pELHNCQUFpQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFD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eUJBQXlCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckQsT0FBTyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJOzs7O1FBQUMsVUFBQyxNQUFNO1lBQ3RDLEtBQUssSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNyQyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDL0M7UUFDTCxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7SUFDTCw0QkFBQztBQUFELENBQUMsQUFyR0QsSUFxR0M7Ozs7SUFuR0csbURBQWdFOztJQUNoRSxpREFBaUQ7O0lBQ2pELDJEQUF5Rjs7SUFDekYsb0RBQXVEOztJQUN2RCx1REFBZ0c7O0lBQ2hHLG1EQUErRTs7SUFDL0UsMENBQWlEOztJQUNqRCxrREFBeUU7O0lBQ3pFLDhEQUEwRiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGJ5LCBlbGVtZW50LCBLZXksIHByb3RyYWN0b3IsIGJyb3dzZXIgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vLi4vY29yZS91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgU3RhcnRQcm9jZXNzQ2xvdWRQYWdlIHtcblxuICAgIGRlZmF1bHRQcm9jZXNzTmFtZSA9IGVsZW1lbnQoYnkuY3NzKCdpbnB1dFtpZD1cInByb2Nlc3NOYW1lXCJdJykpO1xuICAgIHByb2Nlc3NOYW1lSW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdwcm9jZXNzTmFtZScpKTtcbiAgICBzZWxlY3RQcm9jZXNzRHJvcGRvd25BcnJvdyA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25baWQ9XCJhZGYtc2VsZWN0LXByb2Nlc3MtZHJvcGRvd25cIl0nKSk7XG4gICAgY2FuY2VsUHJvY2Vzc0J1dHRvbiA9IGVsZW1lbnQoYnkuaWQoJ2NhbmNlbF9wcm9jZXNzJykpO1xuICAgIGZvcm1TdGFydFByb2Nlc3NCdXR0b24gPSBlbGVtZW50KGJ5LmNzcygnYnV0dG9uW2RhdGEtYXV0b21hdGlvbi1pZD1cImFkZi1mb3JtLXN0YXJ0IHByb2Nlc3NcIl0nKSk7XG4gICAgc3RhcnRQcm9jZXNzQnV0dG9uID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltkYXRhLWF1dG9tYXRpb24taWQ9XCJidG4tc3RhcnRcIl0nKSk7XG4gICAgbm9Qcm9jZXNzID0gZWxlbWVudChieS5pZCgnbm8tcHJvY2Vzcy1tZXNzYWdlJykpO1xuICAgIHByb2Nlc3NEZWZpbml0aW9uID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwicHJvY2Vzc0RlZmluaXRpb25OYW1lXCJdJykpO1xuICAgIHByb2Nlc3NEZWZpbml0aW9uT3B0aW9uc1BhbmVsID0gZWxlbWVudChieS5jc3MoJ2RpdltjbGFzcyo9XCJwcm9jZXNzRGVmaW5pdGlvbk9wdGlvbnNcIl0nKSk7XG5cbiAgICBjaGVja05vUHJvY2Vzc01lc3NhZ2UoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5ub1Byb2Nlc3MpO1xuICAgIH1cblxuICAgIHByZXNzRG93bkFycm93QW5kRW50ZXIoKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0RlZmluaXRpb24uc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQVJST1dfRE9XTik7XG4gICAgICAgIHJldHVybiBicm93c2VyLmFjdGlvbnMoKS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FTlRFUikucGVyZm9ybSgpO1xuICAgIH1cblxuICAgIGNoZWNrTm9Qcm9jZXNzRGVmaW5pdGlvbk9wdGlvbklzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5wcm9jZXNzRGVmaW5pdGlvbk9wdGlvbnNQYW5lbCk7XG4gICAgfVxuXG4gICAgZW50ZXJQcm9jZXNzTmFtZShuYW1lKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wcm9jZXNzTmFtZUlucHV0KTtcbiAgICAgICAgdGhpcy5jbGVhclByb2Nlc3NOYW1lKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc05hbWVJbnB1dC5zZW5kS2V5cyhuYW1lKTtcbiAgICB9XG5cbiAgICBjbGVhclByb2Nlc3NOYW1lKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucHJvY2Vzc05hbWVJbnB1dCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc05hbWVJbnB1dC5jbGVhcigpO1xuICAgIH1cblxuICAgIHNlbGVjdEZyb21Qcm9jZXNzRHJvcGRvd24obmFtZSkge1xuICAgICAgICB0aGlzLmNsaWNrUHJvY2Vzc0Ryb3Bkb3duQXJyb3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0T3B0aW9uKG5hbWUpO1xuICAgIH1cblxuICAgIGNsaWNrUHJvY2Vzc0Ryb3Bkb3duQXJyb3coKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5zZWxlY3RQcm9jZXNzRHJvcGRvd25BcnJvdyk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZSh0aGlzLnNlbGVjdFByb2Nlc3NEcm9wZG93bkFycm93KTtcbiAgICAgICAgdGhpcy5zZWxlY3RQcm9jZXNzRHJvcGRvd25BcnJvdy5jbGljaygpO1xuICAgIH1cblxuICAgIGNoZWNrT3B0aW9uSXNEaXNwbGF5ZWQobmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RQcm9jZXNzRHJvcGRvd24gPSBlbGVtZW50KGJ5LmNzc0NvbnRhaW5pbmdUZXh0KCcubWF0LW9wdGlvbi10ZXh0JywgbmFtZSkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHNlbGVjdFByb2Nlc3NEcm9wZG93bik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZShzZWxlY3RQcm9jZXNzRHJvcGRvd24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBzZWxlY3RPcHRpb24obmFtZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RQcm9jZXNzRHJvcGRvd24gPSBlbGVtZW50KGJ5LmNzc0NvbnRhaW5pbmdUZXh0KCcubWF0LW9wdGlvbi10ZXh0JywgbmFtZSkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHNlbGVjdFByb2Nlc3NEcm9wZG93bik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZShzZWxlY3RQcm9jZXNzRHJvcGRvd24pO1xuICAgICAgICBzZWxlY3RQcm9jZXNzRHJvcGRvd24uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2xpY2tDYW5jZWxQcm9jZXNzQnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuY2FuY2VsUHJvY2Vzc0J1dHRvbik7XG4gICAgICAgIHRoaXMuY2FuY2VsUHJvY2Vzc0J1dHRvbi5jbGljaygpO1xuICAgIH1cblxuICAgIGNoZWNrU3RhcnRQcm9jZXNzQnV0dG9uSXNFbmFibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5zdGFydFByb2Nlc3NCdXR0b24pO1xuICAgICAgICBleHBlY3QodGhpcy5zdGFydFByb2Nlc3NCdXR0b24uaXNFbmFibGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgfVxuXG4gICAgY2hlY2tTdGFydFByb2Nlc3NCdXR0b25Jc0Rpc2FibGVkKCkge1xuICAgICAgICBleHBlY3QodGhpcy5zdGFydFByb2Nlc3NCdXR0b24uaXNFbmFibGVkKCkpLnRvQmUoZmFsc2UpO1xuICAgIH1cblxuICAgIGNsaWNrU3RhcnRQcm9jZXNzQnV0dG9uKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5zdGFydFByb2Nlc3NCdXR0b24pO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFByb2Nlc3NCdXR0b24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBjaGVja1ZhbGlkYXRpb25FcnJvcklzRGlzcGxheWVkKGVycm9yLCBlbGVtZW50UmVmID0gJ21hdC1lcnJvcicpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dChlbGVtZW50UmVmLCBlcnJvcikpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGVycm9yRWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGJsdXIobG9jYXRvcikge1xuICAgICAgICBsb2NhdG9yLmNsaWNrKCk7XG4gICAgICAgIGxvY2F0b3Iuc2VuZEtleXMoS2V5LlRBQik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNsZWFyRmllbGQobG9jYXRvcikge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGxvY2F0b3IpO1xuICAgICAgICBsb2NhdG9yLmdldEF0dHJpYnV0ZSgndmFsdWUnKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSByZXN1bHQubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGxvY2F0b3Iuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQkFDS19TUEFDRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdfQ==