/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { browser, by, element, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
var DataTableComponentPage = /** @class */ (function () {
    function DataTableComponentPage(rootElement) {
        if (rootElement === void 0) { rootElement = element.all(by.css('adf-datatable')).first(); }
        this.rows = by.css("adf-datatable div[class*='adf-datatable-body'] div[class*='adf-datatable-row']");
        this.rootElement = rootElement;
        this.list = this.rootElement.all(by.css("div[class*='adf-datatable-body'] div[class*='adf-datatable-row']"));
        this.contents = this.rootElement.all(by.css('div[class="adf-datatable-body"] span'));
        this.tableBody = this.rootElement.all(by.css("div[class='adf-datatable-body']")).first();
        this.spinner = this.rootElement.element(by.css('mat-progress-spinner'));
        this.allColumns = this.rootElement.all(by.css('div[data-automation-id*="auto_id_entry."]'));
        this.selectedRowNumber = this.rootElement.element(by.css("div[class*='is-selected'] div[data-automation-id*='text_']"));
        this.allSelectedRows = this.rootElement.all(by.css("div[class*='is-selected']"));
        this.selectAll = this.rootElement.element(by.css("div[class*='adf-datatable-header'] mat-checkbox"));
        this.copyColumnTooltip = this.rootElement.element(by.css("adf-copy-content-tooltip span"));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkAllRowsButtonIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).selectAll);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkAllRows = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        var _this = this;
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).selectAll);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).selectAll).then((/**
         * @return {?}
         */
        function () {
            (/** @type {?} */ (_this)).selectAll.click();
            BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (_this)).selectAll.element(by.css('input[aria-checked="true"]')));
        }));
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.uncheckAllRows = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        var _this = this;
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).selectAll);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).selectAll).then((/**
         * @return {?}
         */
        function () {
            (/** @type {?} */ (_this)).selectAll.click();
            BrowserVisibility.waitUntilElementIsNotOnPage((/** @type {?} */ (_this)).selectAll.element(by.css('input[aria-checked="true"]')));
        }));
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.clickCheckbox = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var checkbox = this.getRowCheckbox(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsClickable(checkbox);
        checkbox.click();
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.checkRowIsNotChecked = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.getRowCheckbox(columnName, columnValue).element(by.css('input[aria-checked="true"]')));
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.checkRowIsChecked = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var rowCheckbox = this.getRowCheckbox(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsVisible(rowCheckbox.element(by.css('input[aria-checked="true"]')));
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.getRowCheckbox = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        return this.getRow(columnName, columnValue)
            .element(by.css('mat-checkbox'));
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.checkNoRowIsSelected = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.selectedRowNumber);
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.getNumberOfSelectedRows = /**
     * @return {?}
     */
    function () {
        return this.allSelectedRows.count();
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.selectRowWithKeyboard = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = this.getRow(columnName, columnValue);
        browser.actions().sendKeys(protractor.Key.COMMAND).click(row).perform();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.selectRow = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = (/** @type {?} */ (this)).getRow(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsVisible(row);
        BrowserVisibility.waitUntilElementIsClickable(row);
        row.click();
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkRowIsSelected = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var selectedRow = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue).element(by.xpath("ancestor::div[contains(@class, 'is-selected')]"));
        BrowserVisibility.waitUntilElementIsVisible(selectedRow);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkRowIsNotSelected = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var selectedRow = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue).element(by.xpath("ancestor::div[contains(@class, 'is-selected')]"));
        BrowserVisibility.waitUntilElementIsNotOnPage(selectedRow);
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} identifyingColumn
     * @param {?} identifyingValue
     * @param {?} columnName
     * @return {?}
     */
    DataTableComponentPage.prototype.getColumnValueForRow = /**
     * @param {?} identifyingColumn
     * @param {?} identifyingValue
     * @param {?} columnName
     * @return {?}
     */
    function (identifyingColumn, identifyingValue, columnName) {
        /** @type {?} */
        var row = this.getRow(identifyingColumn, identifyingValue);
        BrowserVisibility.waitUntilElementIsVisible(row);
        /** @type {?} */
        var rowColumn = row.element(by.css("div[title=\"" + columnName + "\"] span"));
        BrowserVisibility.waitUntilElementIsVisible(rowColumn);
        return rowColumn.getText();
    };
    /**
     * Check the list is sorted.
     *
     * @param sortOrder: 'true' if the list is expected to be sorted ascendant and 'false' for descendant
     * @param locator: locator for column
     * @return 'true' if the list is sorted as expected and 'false' if it isn't
     */
    /**
     * Check the list is sorted.
     *
     * @param {?} sortOrder
     * @param {?} locator
     * @return {?} 'true' if the list is sorted as expected and 'false' if it isn't
     */
    DataTableComponentPage.prototype.checkListIsSorted = /**
     * Check the list is sorted.
     *
     * @param {?} sortOrder
     * @param {?} locator
     * @return {?} 'true' if the list is sorted as expected and 'false' if it isn't
     */
    function (sortOrder, locator) {
        /** @type {?} */
        var deferred = protractor.promise.defer();
        /** @type {?} */
        var column = element.all(by.css("div[title='" + locator + "'] span"));
        BrowserVisibility.waitUntilElementIsVisible(column.first());
        /** @type {?} */
        var initialList = [];
        column.each((/**
         * @param {?} currentElement
         * @return {?}
         */
        function (currentElement) {
            currentElement.getText().then((/**
             * @param {?} text
             * @return {?}
             */
            function (text) {
                initialList.push(text);
            }));
        })).then((/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var sortedList = initialList;
            sortedList = sortedList.sort();
            if (sortOrder === false) {
                sortedList = sortedList.reverse();
            }
            deferred.fulfill(initialList.toString() === sortedList.toString());
        }));
        return deferred.promise;
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.rightClickOnRow = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = this.getRow(columnName, columnValue);
        browser.actions().click(row, protractor.Button.RIGHT).perform();
        BrowserVisibility.waitUntilElementIsVisible(element(by.id('adf-context-menu-content')));
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.getTooltip = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        return this.getCellElementByValue(columnName, columnValue).getAttribute('title');
    };
    /**
     * @param {?} filename
     * @return {?}
     */
    DataTableComponentPage.prototype.getFileHyperlink = /**
     * @param {?} filename
     * @return {?}
     */
    function (filename) {
        return element(by.cssContainingText('adf-name-column[class*="adf-datatable-link"] span', filename));
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.numberOfRows = /**
     * @return {?}
     */
    function () {
        return this.rootElement.all(this.rows).count();
    };
    /**
     * @param {?} column
     * @return {?}
     */
    DataTableComponentPage.prototype.getAllRowsColumnValues = /**
     * @param {?} column
     * @return {?}
     */
    function (column) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var columnLocator, initialList;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        columnLocator = by.css("adf-datatable div[class*='adf-datatable-body'] div[class*='adf-datatable-row'] div[title='" + column + "'] span");
                        BrowserVisibility.waitUntilElementIsVisible(element.all(columnLocator).first());
                        return [4 /*yield*/, element.all(columnLocator).getText()];
                    case 1:
                        initialList = _a.sent();
                        return [2 /*return*/, initialList.filter((/**
                             * @param {?} el
                             * @return {?}
                             */
                            function (el) { return el; }))];
                }
            });
        });
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.getRowsWithSameColumnValues = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var columnLocator;
            return tslib_1.__generator(this, function (_a) {
                columnLocator = by.css("div[title='" + columnName + "'] div[data-automation-id=\"text_" + columnValue + "\"] span");
                BrowserVisibility.waitUntilElementIsVisible(this.rootElement.all(columnLocator).first());
                return [2 /*return*/, this.rootElement.all(columnLocator).getText()];
            });
        });
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.doubleClickRow = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = (/** @type {?} */ (this)).getRow(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsVisible(row);
        BrowserVisibility.waitUntilElementIsClickable(row);
        row.click();
        (/** @type {?} */ (this)).checkRowIsSelected(columnName, columnValue);
        browser.actions().sendKeys(protractor.Key.ENTER).perform();
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.waitForTableBody = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.tableBody);
    };
    /**
     * @param {?} detail
     * @return {?}
     */
    DataTableComponentPage.prototype.getFirstElementDetail = /**
     * @param {?} detail
     * @return {?}
     */
    function (detail) {
        /** @type {?} */
        var firstNode = element.all(by.css("adf-datatable div[title=\"" + detail + "\"] span")).first();
        return firstNode.getText();
    };
    /**
     * @param {?} detail
     * @return {?}
     */
    DataTableComponentPage.prototype.geCellElementDetail = /**
     * @param {?} detail
     * @return {?}
     */
    function (detail) {
        return element.all(by.css("adf-datatable div[title=\"" + detail + "\"] span"));
    };
    /**
     * @param {?} sortOrder
     * @param {?} column
     * @return {?}
     */
    DataTableComponentPage.prototype.sortByColumn = /**
     * @param {?} sortOrder
     * @param {?} column
     * @return {?}
     */
    function (sortOrder, column) {
        /** @type {?} */
        var locator = by.css("div[data-automation-id=\"auto_id_" + column + "\"]");
        BrowserVisibility.waitUntilElementIsVisible(element(locator));
        return element(locator).getAttribute('class').then((/**
         * @param {?} result
         * @return {?}
         */
        function (result) {
            if (sortOrder === true) {
                if (!result.includes('sorted-asc')) {
                    if (result.includes('sorted-desc') || result.includes('sortable')) {
                        element(locator).click();
                    }
                }
            }
            else {
                if (result.includes('sorted-asc')) {
                    element(locator).click();
                }
                else if (result.includes('sortable')) {
                    element(locator).click();
                    element(locator).click();
                }
            }
            return Promise.resolve();
        }));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkContentIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsVisible(row);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkContentIsNotDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue);
        BrowserVisibility.waitUntilElementIsNotOnPage(row);
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.getRow = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var row = this.rootElement.all(by.css("div[title=\"" + columnName + "\"] div[data-automation-id=\"text_" + columnValue + "\"]")).first()
            .element(by.xpath("ancestor::div[contains(@class, 'adf-datatable-row')]"));
        BrowserVisibility.waitUntilElementIsVisible(row);
        return row;
    };
    /**
     * @param {?} position
     * @return {?}
     */
    DataTableComponentPage.prototype.contentInPosition = /**
     * @param {?} position
     * @return {?}
     */
    function (position) {
        BrowserVisibility.waitUntilElementIsVisible(this.contents);
        return this.contents.get(position - 1).getText();
    };
    /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    DataTableComponentPage.prototype.getCellElementByValue = /**
     * @param {?} columnName
     * @param {?} columnValue
     * @return {?}
     */
    function (columnName, columnValue) {
        return this.rootElement.all(by.css("div[title=\"" + columnName + "\"] div[data-automation-id=\"text_" + columnValue + "\"] span")).first();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkSpinnerIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsPresent((/** @type {?} */ (this)).spinner);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkSpinnerIsNotDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage((/** @type {?} */ (this)).spinner);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.tableIsLoaded = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).rootElement);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} column
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkColumnIsDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @param {?} column
     * @return {THIS}
     */
    function (column) {
        BrowserVisibility.waitUntilElementIsVisible(element(by.css("div[data-automation-id=\"auto_id_entry." + column + "\"]")));
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.getNumberOfColumns = /**
     * @return {?}
     */
    function () {
        return this.allColumns.count();
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.getNumberOfRows = /**
     * @return {?}
     */
    function () {
        return this.list.count();
    };
    /**
     * @param {?} rowNumber
     * @param {?} columnName
     * @return {?}
     */
    DataTableComponentPage.prototype.getCellByRowNumberAndColumnName = /**
     * @param {?} rowNumber
     * @param {?} columnName
     * @return {?}
     */
    function (rowNumber, columnName) {
        return this.list.get(rowNumber).element(by.css("div[title=\"" + columnName + "\"] span"));
    };
    /**
     * @param {?} rowColumn
     * @param {?} rowContent
     * @param {?} columnName
     * @return {?}
     */
    DataTableComponentPage.prototype.getCellByRowContentAndColumn = /**
     * @param {?} rowColumn
     * @param {?} rowContent
     * @param {?} columnName
     * @return {?}
     */
    function (rowColumn, rowContent, columnName) {
        return this.getRow(rowColumn, rowContent).element(by.css("div[title='" + columnName + "']"));
    };
    /**
     * @param {?} content
     * @return {?}
     */
    DataTableComponentPage.prototype.selectRowByContent = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        /** @type {?} */
        var row = this.getCellByContent(content);
        return row.click();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} folderName
     * @return {THIS}
     */
    DataTableComponentPage.prototype.checkRowByContentIsSelected = /**
     * @template THIS
     * @this {THIS}
     * @param {?} folderName
     * @return {THIS}
     */
    function (folderName) {
        /** @type {?} */
        var selectedRow = (/** @type {?} */ (this)).getCellByContent(folderName).element(by.xpath("ancestor::div[contains(@class, 'is-selected')]"));
        BrowserVisibility.waitUntilElementIsVisible(selectedRow);
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} content
     * @return {?}
     */
    DataTableComponentPage.prototype.getCellByContent = /**
     * @param {?} content
     * @return {?}
     */
    function (content) {
        /** @type {?} */
        var cell = this.rootElement.element(by.cssContainingText("div[class*='adf-datatable-row'] div[class*='adf-name-location-cell-name']", content));
        BrowserVisibility.waitUntilElementIsVisible(cell);
        return cell;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    DataTableComponentPage.prototype.clickRowByContent = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        /** @type {?} */
        var resultElement = this.rootElement.all(by.css("div[data-automation-id='" + name + "']")).first();
        BrowserVisibility.waitUntilElementIsVisible(resultElement);
        BrowserVisibility.waitUntilElementIsClickable(resultElement);
        resultElement.click();
    };
    /**
     * @return {?}
     */
    DataTableComponentPage.prototype.getCopyContentTooltip = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.copyColumnTooltip);
        return this.copyColumnTooltip.getText();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    DataTableComponentPage.prototype.copyContentTooltipIsNotDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotPresent((/** @type {?} */ (this)).copyColumnTooltip);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.mouseOverColumn = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var column = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue);
        (/** @type {?} */ (this)).mouseOverElement(column);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} elem
     * @return {THIS}
     */
    DataTableComponentPage.prototype.mouseOverElement = /**
     * @template THIS
     * @this {THIS}
     * @param {?} elem
     * @return {THIS}
     */
    function (elem) {
        BrowserVisibility.waitUntilElementIsVisible(elem);
        browser.actions().mouseMove(elem).perform();
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    DataTableComponentPage.prototype.clickColumn = /**
     * @template THIS
     * @this {THIS}
     * @param {?} columnName
     * @param {?} columnValue
     * @return {THIS}
     */
    function (columnName, columnValue) {
        /** @type {?} */
        var column = (/** @type {?} */ (this)).getCellElementByValue(columnName, columnValue);
        (/** @type {?} */ (this)).clickElement(column);
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} elem
     * @return {THIS}
     */
    DataTableComponentPage.prototype.clickElement = /**
     * @template THIS
     * @this {THIS}
     * @param {?} elem
     * @return {THIS}
     */
    function (elem) {
        BrowserVisibility.waitUntilElementIsVisible(elem);
        BrowserVisibility.waitUntilElementIsClickable(elem);
        elem.click();
        return (/** @type {?} */ (this));
    };
    return DataTableComponentPage;
}());
export { DataTableComponentPage };
if (false) {
    /** @type {?} */
    DataTableComponentPage.prototype.rootElement;
    /** @type {?} */
    DataTableComponentPage.prototype.list;
    /** @type {?} */
    DataTableComponentPage.prototype.contents;
    /** @type {?} */
    DataTableComponentPage.prototype.tableBody;
    /** @type {?} */
    DataTableComponentPage.prototype.spinner;
    /** @type {?} */
    DataTableComponentPage.prototype.rows;
    /** @type {?} */
    DataTableComponentPage.prototype.allColumns;
    /** @type {?} */
    DataTableComponentPage.prototype.selectedRowNumber;
    /** @type {?} */
    DataTableComponentPage.prototype.allSelectedRows;
    /** @type {?} */
    DataTableComponentPage.prototype.selectAll;
    /** @type {?} */
    DataTableComponentPage.prototype.copyColumnTooltip;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YS10YWJsZS1jb21wb25lbnQucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9jb3JlL3BhZ2VzL2RhdGEtdGFibGUtY29tcG9uZW50LnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFaEU7SUFjSSxnQ0FBWSxXQUF5RTtRQUF6RSw0QkFBQSxFQUFBLGNBQTZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtRQVByRixTQUFJLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxnRkFBZ0YsQ0FBQyxDQUFDO1FBUTVGLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDLENBQUM7UUFDN0csSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxDQUFDLENBQUMsQ0FBQztRQUNyRixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3pGLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FB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Ozs7SUEvVUcsNkNBQTJCOztJQUMzQixzQ0FBeUI7O0lBQ3pCLDBDQUFTOztJQUNULDJDQUFVOztJQUNWLHlDQUFROztJQUNSLHNDQUFnRzs7SUFDaEcsNENBQVc7O0lBQ1gsbURBQWtCOztJQUNsQixpREFBZ0I7O0lBQ2hCLDJDQUFVOztJQUNWLG1EQUFrQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEFsZnJlc2NvIFNvZnR3YXJlLCBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGJyb3dzZXIsIGJ5LCBlbGVtZW50LCBwcm90cmFjdG9yIH0gZnJvbSAncHJvdHJhY3Rvcic7XG5pbXBvcnQgeyBFbGVtZW50RmluZGVyLCBFbGVtZW50QXJyYXlGaW5kZXIgfSBmcm9tICdwcm90cmFjdG9yL2J1aWx0L2VsZW1lbnQnO1xuaW1wb3J0IHsgQnJvd3NlclZpc2liaWxpdHkgfSBmcm9tICcuLi91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgRGF0YVRhYmxlQ29tcG9uZW50UGFnZSB7XG5cbiAgICByb290RWxlbWVudDogRWxlbWVudEZpbmRlcjtcbiAgICBsaXN0OiBFbGVtZW50QXJyYXlGaW5kZXI7XG4gICAgY29udGVudHM7XG4gICAgdGFibGVCb2R5O1xuICAgIHNwaW5uZXI7XG4gICAgcm93cyA9IGJ5LmNzcyhgYWRmLWRhdGF0YWJsZSBkaXZbY2xhc3MqPSdhZGYtZGF0YXRhYmxlLWJvZHknXSBkaXZbY2xhc3MqPSdhZGYtZGF0YXRhYmxlLXJvdyddYCk7XG4gICAgYWxsQ29sdW1ucztcbiAgICBzZWxlY3RlZFJvd051bWJlcjtcbiAgICBhbGxTZWxlY3RlZFJvd3M7XG4gICAgc2VsZWN0QWxsO1xuICAgIGNvcHlDb2x1bW5Ub29sdGlwO1xuXG4gICAgY29uc3RydWN0b3Iocm9vdEVsZW1lbnQ6IEVsZW1lbnRGaW5kZXIgPSBlbGVtZW50LmFsbChieS5jc3MoJ2FkZi1kYXRhdGFibGUnKSkuZmlyc3QoKSkge1xuICAgICAgICB0aGlzLnJvb3RFbGVtZW50ID0gcm9vdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMubGlzdCA9IHRoaXMucm9vdEVsZW1lbnQuYWxsKGJ5LmNzcyhgZGl2W2NsYXNzKj0nYWRmLWRhdGF0YWJsZS1ib2R5J10gZGl2W2NsYXNzKj0nYWRmLWRhdGF0YWJsZS1yb3cnXWApKTtcbiAgICAgICAgdGhpcy5jb250ZW50cyA9IHRoaXMucm9vdEVsZW1lbnQuYWxsKGJ5LmNzcygnZGl2W2NsYXNzPVwiYWRmLWRhdGF0YWJsZS1ib2R5XCJdIHNwYW4nKSk7XG4gICAgICAgIHRoaXMudGFibGVCb2R5ID0gdGhpcy5yb290RWxlbWVudC5hbGwoYnkuY3NzKGBkaXZbY2xhc3M9J2FkZi1kYXRhdGFibGUtYm9keSddYCkpLmZpcnN0KCk7XG4gICAgICAgIHRoaXMuc3Bpbm5lciA9IHRoaXMucm9vdEVsZW1lbnQuZWxlbWVudChieS5jc3MoJ21hdC1wcm9ncmVzcy1zcGlubmVyJykpO1xuICAgICAgICB0aGlzLmFsbENvbHVtbnMgPSB0aGlzLnJvb3RFbGVtZW50LmFsbChieS5jc3MoJ2RpdltkYXRhLWF1dG9tYXRpb24taWQqPVwiYXV0b19pZF9lbnRyeS5cIl0nKSk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dOdW1iZXIgPSB0aGlzLnJvb3RFbGVtZW50LmVsZW1lbnQoYnkuY3NzKGBkaXZbY2xhc3MqPSdpcy1zZWxlY3RlZCddIGRpdltkYXRhLWF1dG9tYXRpb24taWQqPSd0ZXh0XyddYCkpO1xuICAgICAgICB0aGlzLmFsbFNlbGVjdGVkUm93cyA9IHRoaXMucm9vdEVsZW1lbnQuYWxsKGJ5LmNzcyhgZGl2W2NsYXNzKj0naXMtc2VsZWN0ZWQnXWApKTtcbiAgICAgICAgdGhpcy5zZWxlY3RBbGwgPSB0aGlzLnJvb3RFbGVtZW50LmVsZW1lbnQoYnkuY3NzKGBkaXZbY2xhc3MqPSdhZGYtZGF0YXRhYmxlLWhlYWRlciddIG1hdC1jaGVja2JveGApKTtcbiAgICAgICAgdGhpcy5jb3B5Q29sdW1uVG9vbHRpcCA9IHRoaXMucm9vdEVsZW1lbnQuZWxlbWVudChieS5jc3MoYGFkZi1jb3B5LWNvbnRlbnQtdG9vbHRpcCBzcGFuYCkpO1xuICAgIH1cblxuICAgIGNoZWNrQWxsUm93c0J1dHRvbklzRGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0QWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tBbGxSb3dzKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0QWxsKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuc2VsZWN0QWxsKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QWxsLmNsaWNrKCk7XG4gICAgICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0QWxsLmVsZW1lbnQoYnkuY3NzKCdpbnB1dFthcmlhLWNoZWNrZWQ9XCJ0cnVlXCJdJykpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHVuY2hlY2tBbGxSb3dzKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuc2VsZWN0QWxsKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuc2VsZWN0QWxsKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0QWxsLmNsaWNrKCk7XG4gICAgICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5zZWxlY3RBbGwuZWxlbWVudChieS5jc3MoJ2lucHV0W2FyaWEtY2hlY2tlZD1cInRydWVcIl0nKSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2xpY2tDaGVja2JveChjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkge1xuICAgICAgICBjb25zdCBjaGVja2JveCA9IHRoaXMuZ2V0Um93Q2hlY2tib3goY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUoY2hlY2tib3gpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgIH1cblxuICAgIGNoZWNrUm93SXNOb3RDaGVja2VkKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdE9uUGFnZSh0aGlzLmdldFJvd0NoZWNrYm94KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKS5lbGVtZW50KGJ5LmNzcygnaW5wdXRbYXJpYS1jaGVja2VkPVwidHJ1ZVwiXScpKSk7XG4gICAgfVxuXG4gICAgY2hlY2tSb3dJc0NoZWNrZWQoY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpIHtcbiAgICAgICAgY29uc3Qgcm93Q2hlY2tib3ggPSB0aGlzLmdldFJvd0NoZWNrYm94KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3dDaGVja2JveC5lbGVtZW50KGJ5LmNzcygnaW5wdXRbYXJpYS1jaGVja2VkPVwidHJ1ZVwiXScpKSk7XG4gICAgfVxuXG4gICAgZ2V0Um93Q2hlY2tib3goY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Um93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKVxuICAgICAgICAgICAgLmVsZW1lbnQoYnkuY3NzKCdtYXQtY2hlY2tib3gnKSk7XG4gICAgfVxuXG4gICAgY2hlY2tOb1Jvd0lzU2VsZWN0ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdE9uUGFnZSh0aGlzLnNlbGVjdGVkUm93TnVtYmVyKTtcbiAgICB9XG5cbiAgICBnZXROdW1iZXJPZlNlbGVjdGVkUm93cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsU2VsZWN0ZWRSb3dzLmNvdW50KCk7XG4gICAgfVxuXG4gICAgc2VsZWN0Um93V2l0aEtleWJvYXJkKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0Um93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQ09NTUFORCkuY2xpY2socm93KS5wZXJmb3JtKCk7XG4gICAgfVxuXG4gICAgc2VsZWN0Um93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0Um93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3cpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUocm93KTtcbiAgICAgICAgcm93LmNsaWNrKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNoZWNrUm93SXNTZWxlY3RlZChjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZFJvdyA9IHRoaXMuZ2V0Q2VsbEVsZW1lbnRCeVZhbHVlKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKS5lbGVtZW50KGJ5LnhwYXRoKGBhbmNlc3Rvcjo6ZGl2W2NvbnRhaW5zKEBjbGFzcywgJ2lzLXNlbGVjdGVkJyldYCkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHNlbGVjdGVkUm93KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tSb3dJc05vdFNlbGVjdGVkKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUm93ID0gdGhpcy5nZXRDZWxsRWxlbWVudEJ5VmFsdWUoY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpLmVsZW1lbnQoYnkueHBhdGgoYGFuY2VzdG9yOjpkaXZbY29udGFpbnMoQGNsYXNzLCAnaXMtc2VsZWN0ZWQnKV1gKSk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdE9uUGFnZShzZWxlY3RlZFJvdyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGdldENvbHVtblZhbHVlRm9yUm93KGlkZW50aWZ5aW5nQ29sdW1uLCBpZGVudGlmeWluZ1ZhbHVlLCBjb2x1bW5OYW1lKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0Um93KGlkZW50aWZ5aW5nQ29sdW1uLCBpZGVudGlmeWluZ1ZhbHVlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3cpO1xuICAgICAgICBjb25zdCByb3dDb2x1bW4gPSByb3cuZWxlbWVudChieS5jc3MoYGRpdlt0aXRsZT1cIiR7Y29sdW1uTmFtZX1cIl0gc3BhbmApKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3dDb2x1bW4pO1xuICAgICAgICByZXR1cm4gcm93Q29sdW1uLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB0aGUgbGlzdCBpcyBzb3J0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc29ydE9yZGVyOiAndHJ1ZScgaWYgdGhlIGxpc3QgaXMgZXhwZWN0ZWQgdG8gYmUgc29ydGVkIGFzY2VuZGFudCBhbmQgJ2ZhbHNlJyBmb3IgZGVzY2VuZGFudFxuICAgICAqIEBwYXJhbSBsb2NhdG9yOiBsb2NhdG9yIGZvciBjb2x1bW5cbiAgICAgKiBAcmV0dXJuICd0cnVlJyBpZiB0aGUgbGlzdCBpcyBzb3J0ZWQgYXMgZXhwZWN0ZWQgYW5kICdmYWxzZScgaWYgaXQgaXNuJ3RcbiAgICAgKi9cbiAgICBjaGVja0xpc3RJc1NvcnRlZChzb3J0T3JkZXIsIGxvY2F0b3IpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBwcm90cmFjdG9yLnByb21pc2UuZGVmZXIoKTtcbiAgICAgICAgY29uc3QgY29sdW1uID0gZWxlbWVudC5hbGwoYnkuY3NzKGBkaXZbdGl0bGU9JyR7bG9jYXRvcn0nXSBzcGFuYCkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGNvbHVtbi5maXJzdCgpKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbExpc3QgPSBbXTtcbiAgICAgICAgY29sdW1uLmVhY2goZnVuY3Rpb24gKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudC5nZXRUZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAgICAgICAgIGluaXRpYWxMaXN0LnB1c2godGV4dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgc29ydGVkTGlzdCA9IGluaXRpYWxMaXN0O1xuICAgICAgICAgICAgc29ydGVkTGlzdCA9IHNvcnRlZExpc3Quc29ydCgpO1xuICAgICAgICAgICAgaWYgKHNvcnRPcmRlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBzb3J0ZWRMaXN0ID0gc29ydGVkTGlzdC5yZXZlcnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZlcnJlZC5mdWxmaWxsKGluaXRpYWxMaXN0LnRvU3RyaW5nKCkgPT09IHNvcnRlZExpc3QudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByaWdodENsaWNrT25Sb3coY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRSb3coY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpO1xuICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5jbGljayhyb3csIHByb3RyYWN0b3IuQnV0dG9uLlJJR0hUKS5wZXJmb3JtKCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZWxlbWVudChieS5pZCgnYWRmLWNvbnRleHQtbWVudS1jb250ZW50JykpKTtcbiAgICB9XG5cbiAgICBnZXRUb29sdGlwKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENlbGxFbGVtZW50QnlWYWx1ZShjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkuZ2V0QXR0cmlidXRlKCd0aXRsZScpO1xuICAgIH1cblxuICAgIGdldEZpbGVIeXBlcmxpbmsoZmlsZW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoJ2FkZi1uYW1lLWNvbHVtbltjbGFzcyo9XCJhZGYtZGF0YXRhYmxlLWxpbmtcIl0gc3BhbicsIGZpbGVuYW1lKSk7XG4gICAgfVxuXG4gICAgbnVtYmVyT2ZSb3dzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudC5hbGwodGhpcy5yb3dzKS5jb3VudCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbFJvd3NDb2x1bW5WYWx1ZXMoY29sdW1uKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbkxvY2F0b3IgPSBieS5jc3MoXCJhZGYtZGF0YXRhYmxlIGRpdltjbGFzcyo9J2FkZi1kYXRhdGFibGUtYm9keSddIGRpdltjbGFzcyo9J2FkZi1kYXRhdGFibGUtcm93J10gZGl2W3RpdGxlPSdcIiArIGNvbHVtbiArIFwiJ10gc3BhblwiKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShlbGVtZW50LmFsbChjb2x1bW5Mb2NhdG9yKS5maXJzdCgpKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbExpc3Q6IGFueSA9IGF3YWl0IGVsZW1lbnQuYWxsKGNvbHVtbkxvY2F0b3IpLmdldFRleHQoKTtcbiAgICAgICAgcmV0dXJuIGluaXRpYWxMaXN0LmZpbHRlcigoZWwpID0+IGVsKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSb3dzV2l0aFNhbWVDb2x1bW5WYWx1ZXMoY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpIHtcbiAgICAgICAgY29uc3QgY29sdW1uTG9jYXRvciA9IGJ5LmNzcyhgZGl2W3RpdGxlPScke2NvbHVtbk5hbWV9J10gZGl2W2RhdGEtYXV0b21hdGlvbi1pZD1cInRleHRfJHtjb2x1bW5WYWx1ZX1cIl0gc3BhbmApO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucm9vdEVsZW1lbnQuYWxsKGNvbHVtbkxvY2F0b3IpLmZpcnN0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudC5hbGwoY29sdW1uTG9jYXRvcikuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGRvdWJsZUNsaWNrUm93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0Um93KGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3cpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUocm93KTtcbiAgICAgICAgcm93LmNsaWNrKCk7XG4gICAgICAgIHRoaXMuY2hlY2tSb3dJc1NlbGVjdGVkKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuRU5URVIpLnBlcmZvcm0oKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgd2FpdEZvclRhYmxlQm9keSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnRhYmxlQm9keSk7XG4gICAgfVxuXG4gICAgZ2V0Rmlyc3RFbGVtZW50RGV0YWlsKGRldGFpbCkge1xuICAgICAgICBjb25zdCBmaXJzdE5vZGUgPSBlbGVtZW50LmFsbChieS5jc3MoYGFkZi1kYXRhdGFibGUgZGl2W3RpdGxlPVwiJHtkZXRhaWx9XCJdIHNwYW5gKSkuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuIGZpcnN0Tm9kZS5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2VDZWxsRWxlbWVudERldGFpbChkZXRhaWwpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQuYWxsKGJ5LmNzcyhgYWRmLWRhdGF0YWJsZSBkaXZbdGl0bGU9XCIke2RldGFpbH1cIl0gc3BhbmApKTtcbiAgICB9XG5cbiAgICBzb3J0QnlDb2x1bW4oc29ydE9yZGVyLCBjb2x1bW4pIHtcbiAgICAgICAgY29uc3QgbG9jYXRvciA9IGJ5LmNzcyhgZGl2W2RhdGEtYXV0b21hdGlvbi1pZD1cImF1dG9faWRfJHtjb2x1bW59XCJdYCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZWxlbWVudChsb2NhdG9yKSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50KGxvY2F0b3IpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChzb3J0T3JkZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5pbmNsdWRlcygnc29ydGVkLWFzYycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW5jbHVkZXMoJ3NvcnRlZC1kZXNjJykgfHwgcmVzdWx0LmluY2x1ZGVzKCdzb3J0YWJsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50KGxvY2F0b3IpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuaW5jbHVkZXMoJ3NvcnRlZC1hc2MnKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50KGxvY2F0b3IpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuaW5jbHVkZXMoJ3NvcnRhYmxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudChsb2NhdG9yKS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50KGxvY2F0b3IpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNoZWNrQ29udGVudElzRGlzcGxheWVkKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuZ2V0Q2VsbEVsZW1lbnRCeVZhbHVlKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShyb3cpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjaGVja0NvbnRlbnRJc05vdERpc3BsYXllZChjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkge1xuICAgICAgICBjb25zdCByb3cgPSB0aGlzLmdldENlbGxFbGVtZW50QnlWYWx1ZShjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdE9uUGFnZShyb3cpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRSb3coY29sdW1uTmFtZSwgY29sdW1uVmFsdWUpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5yb290RWxlbWVudC5hbGwoYnkuY3NzKGBkaXZbdGl0bGU9XCIke2NvbHVtbk5hbWV9XCJdIGRpdltkYXRhLWF1dG9tYXRpb24taWQ9XCJ0ZXh0XyR7Y29sdW1uVmFsdWV9XCJdYCkpLmZpcnN0KClcbiAgICAgICAgICAgIC5lbGVtZW50KGJ5LnhwYXRoKGBhbmNlc3Rvcjo6ZGl2W2NvbnRhaW5zKEBjbGFzcywgJ2FkZi1kYXRhdGFibGUtcm93JyldYCkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHJvdyk7XG4gICAgICAgIHJldHVybiByb3c7XG4gICAgfVxuXG4gICAgY29udGVudEluUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmNvbnRlbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudHMuZ2V0KHBvc2l0aW9uIC0gMSkuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldENlbGxFbGVtZW50QnlWYWx1ZShjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290RWxlbWVudC5hbGwoYnkuY3NzKGBkaXZbdGl0bGU9XCIke2NvbHVtbk5hbWV9XCJdIGRpdltkYXRhLWF1dG9tYXRpb24taWQ9XCJ0ZXh0XyR7Y29sdW1uVmFsdWV9XCJdIHNwYW5gKSkuZmlyc3QoKTtcbiAgICB9XG5cbiAgICBjaGVja1NwaW5uZXJJc0Rpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzUHJlc2VudCh0aGlzLnNwaW5uZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjaGVja1NwaW5uZXJJc05vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRhYmxlSXNMb2FkZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5yb290RWxlbWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNoZWNrQ29sdW1uSXNEaXNwbGF5ZWQoY29sdW1uKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZWxlbWVudChieS5jc3MoYGRpdltkYXRhLWF1dG9tYXRpb24taWQ9XCJhdXRvX2lkX2VudHJ5LiR7Y29sdW1ufVwiXWApKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGdldE51bWJlck9mQ29sdW1ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsQ29sdW1ucy5jb3VudCgpO1xuICAgIH1cblxuICAgIGdldE51bWJlck9mUm93cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdC5jb3VudCgpO1xuICAgIH1cblxuICAgIGdldENlbGxCeVJvd051bWJlckFuZENvbHVtbk5hbWUocm93TnVtYmVyLCBjb2x1bW5OYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3QuZ2V0KHJvd051bWJlcikuZWxlbWVudChieS5jc3MoYGRpdlt0aXRsZT1cIiR7Y29sdW1uTmFtZX1cIl0gc3BhbmApKTtcbiAgICB9XG5cbiAgICBnZXRDZWxsQnlSb3dDb250ZW50QW5kQ29sdW1uKHJvd0NvbHVtbiwgcm93Q29udGVudCwgY29sdW1uTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSb3cocm93Q29sdW1uLCByb3dDb250ZW50KS5lbGVtZW50KGJ5LmNzcyhgZGl2W3RpdGxlPScke2NvbHVtbk5hbWV9J11gKSk7XG4gICAgfVxuXG4gICAgc2VsZWN0Um93QnlDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5nZXRDZWxsQnlDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gcm93LmNsaWNrKCk7XG4gICAgfVxuXG4gICAgY2hlY2tSb3dCeUNvbnRlbnRJc1NlbGVjdGVkKGZvbGRlck5hbWUpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRSb3cgPSB0aGlzLmdldENlbGxCeUNvbnRlbnQoZm9sZGVyTmFtZSkuZWxlbWVudChieS54cGF0aChgYW5jZXN0b3I6OmRpdltjb250YWlucyhAY2xhc3MsICdpcy1zZWxlY3RlZCcpXWApKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShzZWxlY3RlZFJvdyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGdldENlbGxCeUNvbnRlbnQoY29udGVudCkge1xuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5yb290RWxlbWVudC5lbGVtZW50KGJ5LmNzc0NvbnRhaW5pbmdUZXh0KGBkaXZbY2xhc3MqPSdhZGYtZGF0YXRhYmxlLXJvdyddIGRpdltjbGFzcyo9J2FkZi1uYW1lLWxvY2F0aW9uLWNlbGwtbmFtZSddYCwgY29udGVudCkpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGNlbGwpO1xuICAgICAgICByZXR1cm4gY2VsbDtcbiAgICB9XG5cbiAgICBjbGlja1Jvd0J5Q29udGVudChuYW1lKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdEVsZW1lbnQgPSB0aGlzLnJvb3RFbGVtZW50LmFsbChieS5jc3MoYGRpdltkYXRhLWF1dG9tYXRpb24taWQ9JyR7bmFtZX0nXWApKS5maXJzdCgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHJlc3VsdEVsZW1lbnQpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUocmVzdWx0RWxlbWVudCk7XG4gICAgICAgIHJlc3VsdEVsZW1lbnQuY2xpY2soKTtcbiAgICB9XG5cbiAgICBnZXRDb3B5Q29udGVudFRvb2x0aXAoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5jb3B5Q29sdW1uVG9vbHRpcCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHlDb2x1bW5Ub29sdGlwLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBjb3B5Q29udGVudFRvb2x0aXBJc05vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90UHJlc2VudCh0aGlzLmNvcHlDb2x1bW5Ub29sdGlwKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbW91c2VPdmVyQ29sdW1uKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGNvbHVtbiA9IHRoaXMuZ2V0Q2VsbEVsZW1lbnRCeVZhbHVlKGNvbHVtbk5hbWUsIGNvbHVtblZhbHVlKTtcbiAgICAgICAgdGhpcy5tb3VzZU92ZXJFbGVtZW50KGNvbHVtbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG1vdXNlT3ZlckVsZW1lbnQoZWxlbSkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGVsZW0pO1xuICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5tb3VzZU1vdmUoZWxlbSkucGVyZm9ybSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjbGlja0NvbHVtbihjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSkge1xuICAgICAgICBjb25zdCBjb2x1bW4gPSB0aGlzLmdldENlbGxFbGVtZW50QnlWYWx1ZShjb2x1bW5OYW1lLCBjb2x1bW5WYWx1ZSk7XG4gICAgICAgIHRoaXMuY2xpY2tFbGVtZW50KGNvbHVtbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNsaWNrRWxlbWVudChlbGVtKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUoZWxlbSk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZShlbGVtKTtcbiAgICAgICAgZWxlbS5jbGljaygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iXX0=