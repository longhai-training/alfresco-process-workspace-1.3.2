/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { FormControllersPage } from './form-controller.page';
import { browser, by, element, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
import { LocalStorageUtil } from '../utils/local-storage.util';
var LoginPage = /** @class */ (function () {
    function LoginPage() {
        this.loginURL = browser.baseUrl + '/login';
        this.formControllersPage = new FormControllersPage();
        this.txtUsername = element(by.css('input[id="username"]'));
        this.txtPassword = element(by.css('input[id="password"]'));
        this.logoImg = element(by.css('img[id="adf-login-img-logo"]'));
        this.successRouteTxt = element(by.css('input[data-automation-id="adf-success-route"]'));
        this.logoTxt = element(by.css('input[data-automation-id="adf-url-logo"]'));
        this.usernameTooltip = element(by.css('span[data-automation-id="username-error"]'));
        this.passwordTooltip = element(by.css('span[data-automation-id="password-required"]'));
        this.loginTooltip = element(by.css('span[class="adf-login-error-message"]'));
        this.usernameInactive = element(by.css('input[id="username"][aria-invalid="false"]'));
        this.passwordInactive = element(by.css('input[id="password"][aria-invalid="false"]'));
        this.adfLogo = element(by.css('img[class="adf-img-logo ng-star-inserted"]'));
        this.usernameHighlighted = element(by.css('input[id="username"][aria-invalid="true"]'));
        this.passwordHighlighted = element(by.css('input[id="password"][aria-invalid="true"]'));
        this.signInButton = element(by.id('login-button'));
        this.showPasswordElement = element(by.css('mat-icon[data-automation-id="show_password"]'));
        this.hidePasswordElement = element(by.css('mat-icon[data-automation-id="hide_password"]'));
        this.rememberMe = element(by.css('mat-checkbox[id="adf-login-remember"]'));
        this.needHelp = element(by.css('div[id="adf-login-action-left"]'));
        this.register = element(by.css('div[id="adf-login-action-right"]'));
        this.footerSwitch = element(by.id('switch4'));
        this.rememberMeSwitch = element(by.id('adf-toggle-show-rememberme'));
        this.successRouteSwitch = element(by.id('adf-toggle-show-successRoute'));
        this.logoSwitch = element(by.id('adf-toggle-logo'));
        this.header = element(by.id('adf-header'));
        this.settingsIcon = element(by.cssContainingText('a[data-automation-id="settings"] mat-icon', 'settings'));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    LoginPage.prototype.goToLoginPage = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        browser.waitForAngularEnabled(true);
        browser.driver.get((/** @type {?} */ (this)).loginURL);
        (/** @type {?} */ (this)).waitForElements();
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    LoginPage.prototype.waitForElements = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).txtUsername);
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).txtPassword);
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} username
     * @return {?}
     */
    LoginPage.prototype.enterUsername = /**
     * @param {?} username
     * @return {?}
     */
    function (username) {
        BrowserVisibility.waitUntilElementIsVisible(this.txtUsername);
        this.txtUsername.sendKeys('');
        this.txtUsername.clear();
        return this.txtUsername.sendKeys(username);
    };
    /**
     * @param {?} password
     * @return {?}
     */
    LoginPage.prototype.enterPassword = /**
     * @param {?} password
     * @return {?}
     */
    function (password) {
        BrowserVisibility.waitUntilElementIsVisible(this.txtPassword);
        this.txtPassword.clear();
        return this.txtPassword.sendKeys(password);
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    LoginPage.prototype.clearUsername = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        var _this = this;
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).txtUsername);
        (/** @type {?} */ (this)).txtUsername.click();
        (/** @type {?} */ (this)).txtUsername.getAttribute('value').then((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            for (var i = value.length; i >= 0; i--) {
                (/** @type {?} */ (_this)).txtUsername.sendKeys(protractor.Key.BACK_SPACE);
            }
        }));
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.clearPassword = /**
     * @return {?}
     */
    function () {
        var _this = this;
        BrowserVisibility.waitUntilElementIsVisible(this.txtPassword);
        this.txtPassword.getAttribute('value').then((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            for (var i = value.length; i >= 0; i--) {
                _this.txtPassword.sendKeys(protractor.Key.BACK_SPACE);
            }
        }));
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.getUsernameTooltip = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.usernameTooltip);
        return this.usernameTooltip.getText();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.getPasswordTooltip = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.passwordTooltip);
        return this.passwordTooltip.getText();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.getLoginError = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.loginTooltip);
        return this.loginTooltip.getText();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkLoginImgURL = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.logoImg);
        return this.logoImg.getAttribute('src');
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkUsernameInactive = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.usernameInactive);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkPasswordInactive = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.passwordInactive);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkUsernameHighlighted = /**
     * @return {?}
     */
    function () {
        this.adfLogo.click();
        BrowserVisibility.waitUntilElementIsVisible(this.usernameHighlighted);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkPasswordHighlighted = /**
     * @return {?}
     */
    function () {
        this.adfLogo.click();
        BrowserVisibility.waitUntilElementIsVisible(this.passwordHighlighted);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkUsernameTooltipIsNotVisible = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotVisible(this.usernameTooltip);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkPasswordTooltipIsNotVisible = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotVisible(this.passwordTooltip);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.getSignInButtonIsEnabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.signInButton);
        return this.signInButton.isEnabled();
    };
    /**
     * @param {?} userModel
     * @return {?}
     */
    LoginPage.prototype.loginToProcessServicesUsingUserModel = /**
     * @param {?} userModel
     * @return {?}
     */
    function (userModel) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.goToLoginPage();
                        return [4 /*yield*/, LocalStorageUtil.clearStorage()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.setStorageItem('providers', 'BPM')];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.apiReset()];
                    case 3:
                        _a.sent();
                        this.login(userModel.email, userModel.password);
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * @param {?} userModel
     * @return {?}
     */
    LoginPage.prototype.loginToContentServicesUsingUserModel = /**
     * @param {?} userModel
     * @return {?}
     */
    function (userModel) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.goToLoginPage();
                        return [4 /*yield*/, LocalStorageUtil.clearStorage()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.setStorageItem('providers', 'ECM')];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.apiReset()];
                    case 3:
                        _a.sent();
                        this.login(userModel.getId(), userModel.getPassword());
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    LoginPage.prototype.loginToContentServices = /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    function (username, password) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.goToLoginPage();
                        return [4 /*yield*/, LocalStorageUtil.clearStorage()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.setStorageItem('providers', 'ECM')];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, LocalStorageUtil.apiReset()];
                    case 3:
                        _a.sent();
                        this.waitForElements();
                        this.login(username, password);
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.clickSignInButton = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.signInButton);
        this.signInButton.click();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.clickSettingsIcon = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.settingsIcon);
        this.settingsIcon.click();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.showPassword = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.showPasswordElement);
        this.showPasswordElement.click();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.hidePassword = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.hidePasswordElement);
        this.hidePasswordElement.click();
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.getShownPassword = /**
     * @return {?}
     */
    function () {
        return this.txtPassword.getAttribute('value');
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkPasswordIsHidden = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.txtPassword);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkRememberIsDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.rememberMe);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkRememberIsNotDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotVisible(this.rememberMe);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkNeedHelpIsDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.needHelp);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkNeedHelpIsNotDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotVisible(this.needHelp);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkRegisterDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.register);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.checkRegisterIsNotDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotVisible(this.register);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.enableFooter = /**
     * @return {?}
     */
    function () {
        this.formControllersPage.enableToggle(this.footerSwitch);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.disableFooter = /**
     * @return {?}
     */
    function () {
        this.formControllersPage.disableToggle(this.footerSwitch);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.disableRememberMe = /**
     * @return {?}
     */
    function () {
        this.formControllersPage.disableToggle(this.rememberMeSwitch);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.enableSuccessRouteSwitch = /**
     * @return {?}
     */
    function () {
        this.formControllersPage.enableToggle(this.successRouteSwitch);
    };
    /**
     * @return {?}
     */
    LoginPage.prototype.enableLogoSwitch = /**
     * @return {?}
     */
    function () {
        this.formControllersPage.enableToggle(this.logoSwitch);
    };
    /**
     * @param {?} route
     * @return {?}
     */
    LoginPage.prototype.enterSuccessRoute = /**
     * @param {?} route
     * @return {?}
     */
    function (route) {
        BrowserVisibility.waitUntilElementIsVisible(this.successRouteTxt);
        this.successRouteTxt.sendKeys('');
        this.successRouteTxt.clear();
        return this.successRouteTxt.sendKeys(route);
    };
    /**
     * @param {?} logo
     * @return {?}
     */
    LoginPage.prototype.enterLogo = /**
     * @param {?} logo
     * @return {?}
     */
    function (logo) {
        BrowserVisibility.waitUntilElementIsVisible(this.logoTxt);
        this.logoTxt.sendKeys('');
        this.logoTxt.clear();
        return this.logoTxt.sendKeys(logo);
    };
    /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    LoginPage.prototype.login = /**
     * @param {?} username
     * @param {?} password
     * @return {?}
     */
    function (username, password) {
        this.waitForElements();
        this.enterUsername(username);
        this.enterPassword(password);
        this.clickSignInButton();
        return BrowserVisibility.waitUntilElementIsVisible(this.header);
    };
    return LoginPage;
}());
export { LoginPage };
if (false) {
    /** @type {?} */
    LoginPage.prototype.loginURL;
    /** @type {?} */
    LoginPage.prototype.formControllersPage;
    /** @type {?} */
    LoginPage.prototype.txtUsername;
    /** @type {?} */
    LoginPage.prototype.txtPassword;
    /** @type {?} */
    LoginPage.prototype.logoImg;
    /** @type {?} */
    LoginPage.prototype.successRouteTxt;
    /** @type {?} */
    LoginPage.prototype.logoTxt;
    /** @type {?} */
    LoginPage.prototype.usernameTooltip;
    /** @type {?} */
    LoginPage.prototype.passwordTooltip;
    /** @type {?} */
    LoginPage.prototype.loginTooltip;
    /** @type {?} */
    LoginPage.prototype.usernameInactive;
    /** @type {?} */
    LoginPage.prototype.passwordInactive;
    /** @type {?} */
    LoginPage.prototype.adfLogo;
    /** @type {?} */
    LoginPage.prototype.usernameHighlighted;
    /** @type {?} */
    LoginPage.prototype.passwordHighlighted;
    /** @type {?} */
    LoginPage.prototype.signInButton;
    /** @type {?} */
    LoginPage.prototype.showPasswordElement;
    /** @type {?} */
    LoginPage.prototype.hidePasswordElement;
    /** @type {?} */
    LoginPage.prototype.rememberMe;
    /** @type {?} */
    LoginPage.prototype.needHelp;
    /** @type {?} */
    LoginPage.prototype.register;
    /** @type {?} */
    LoginPage.prototype.footerSwitch;
    /** @type {?} */
    LoginPage.prototype.rememberMeSwitch;
    /** @type {?} */
    LoginPage.prototype.successRouteSwitch;
    /** @type {?} */
    LoginPage.prototype.logoSwitch;
    /** @type {?} */
    LoginPage.prototype.header;
    /** @type {?} */
    LoginPage.prototype.settingsIcon;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4ucGFnZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BhbGZyZXNjby9hZGYtdGVzdGluZy8iLCJzb3VyY2VzIjpbImxpYi9jb3JlL3BhZ2VzL2xvZ2luLnBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQzdELE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDaEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFL0Q7SUFBQTtRQUVJLGFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQztRQUV0Qyx3QkFBbUIsR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUM7UUFDaEQsZ0JBQVcsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7UUFDdEQsZ0JBQVcsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7UUFDdEQsWUFBTyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDhCQUE4QixDQUFDLENBQUMsQ0FBQztRQUMxRCxvQkFBZSxHQUFHLE9BQU8sQ0FDckIsRUFBRSxDQUFDLEdBQUcsQ0FBQywrQ0FBK0MsQ0FBQyxDQUMxRCxDQUFDO1FBQ0YsWUFBTyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLENBQUMsQ0FBQztRQUN0RSxvQkFBZSxHQUFHLE9BQU8sQ0FDckIsRUFBRSxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUN0RCxDQUFDO1FBQ0Ysb0JBQWUsR0FBRyxP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SUFDOUMsd0NBRUU7O0lBQ0Ysd0NBRUU7O0lBQ0YsK0JBQXNFOztJQUN0RSw2QkFBOEQ7O0lBQzlELDZCQUErRDs7SUFDL0QsaUNBQXlDOztJQUN6QyxxQ0FBZ0U7O0lBQ2hFLHVDQUFvRTs7SUFDcEUsK0JBQStDOztJQUMvQywyQkFBc0M7O0lBQ3RDLGlDQUtFIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgQWxmcmVzY28gU29mdHdhcmUsIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgRm9ybUNvbnRyb2xsZXJzUGFnZSB9IGZyb20gJy4vZm9ybS1jb250cm9sbGVyLnBhZ2UnO1xuaW1wb3J0IHsgYnJvd3NlciwgYnksIGVsZW1lbnQsIHByb3RyYWN0b3IgfSBmcm9tICdwcm90cmFjdG9yJztcbmltcG9ydCB7IEJyb3dzZXJWaXNpYmlsaXR5IH0gZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci12aXNpYmlsaXR5JztcbmltcG9ydCB7IExvY2FsU3RvcmFnZVV0aWwgfSBmcm9tICcuLi91dGlscy9sb2NhbC1zdG9yYWdlLnV0aWwnO1xuXG5leHBvcnQgY2xhc3MgTG9naW5QYWdlIHtcblxuICAgIGxvZ2luVVJMID0gYnJvd3Nlci5iYXNlVXJsICsgJy9sb2dpbic7XG5cbiAgICBmb3JtQ29udHJvbGxlcnNQYWdlID0gbmV3IEZvcm1Db250cm9sbGVyc1BhZ2UoKTtcbiAgICB0eHRVc2VybmFtZSA9IGVsZW1lbnQoYnkuY3NzKCdpbnB1dFtpZD1cInVzZXJuYW1lXCJdJykpO1xuICAgIHR4dFBhc3N3b3JkID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2lkPVwicGFzc3dvcmRcIl0nKSk7XG4gICAgbG9nb0ltZyA9IGVsZW1lbnQoYnkuY3NzKCdpbWdbaWQ9XCJhZGYtbG9naW4taW1nLWxvZ29cIl0nKSk7XG4gICAgc3VjY2Vzc1JvdXRlVHh0ID0gZWxlbWVudChcbiAgICAgICAgYnkuY3NzKCdpbnB1dFtkYXRhLWF1dG9tYXRpb24taWQ9XCJhZGYtc3VjY2Vzcy1yb3V0ZVwiXScpXG4gICAgKTtcbiAgICBsb2dvVHh0ID0gZWxlbWVudChieS5jc3MoJ2lucHV0W2RhdGEtYXV0b21hdGlvbi1pZD1cImFkZi11cmwtbG9nb1wiXScpKTtcbiAgICB1c2VybmFtZVRvb2x0aXAgPSBlbGVtZW50KFxuICAgICAgICBieS5jc3MoJ3NwYW5bZGF0YS1hdXRvbWF0aW9uLWlkPVwidXNlcm5hbWUtZXJyb3JcIl0nKVxuICAgICk7XG4gICAgcGFzc3dvcmRUb29sdGlwID0gZWxlbWVudChcbiAgICAgICAgYnkuY3NzKCdzcGFuW2RhdGEtYXV0b21hdGlvbi1pZD1cInBhc3N3b3JkLXJlcXVpcmVkXCJdJylcbiAgICApO1xuICAgIGxvZ2luVG9vbHRpcCA9IGVsZW1lbnQoYnkuY3NzKCdzcGFuW2NsYXNzPVwiYWRmLWxvZ2luLWVycm9yLW1lc3NhZ2VcIl0nKSk7XG4gICAgdXNlcm5hbWVJbmFjdGl2ZSA9IGVsZW1lbnQoXG4gICAgICAgIGJ5LmNzcygnaW5wdXRbaWQ9XCJ1c2VybmFtZVwiXVthcmlhLWludmFsaWQ9XCJmYWxzZVwiXScpXG4gICAgKTtcbiAgICBwYXNzd29yZEluYWN0aXZlID0gZWxlbWVudChcbiAgICAgICAgYnkuY3NzKCdpbnB1dFtpZD1cInBhc3N3b3JkXCJdW2FyaWEtaW52YWxpZD1cImZhbHNlXCJdJylcbiAgICApO1xuICAgIGFkZkxvZ28gPSBlbGVtZW50KGJ5LmNzcygnaW1nW2NsYXNzPVwiYWRmLWltZy1sb2dvIG5nLXN0YXItaW5zZXJ0ZWRcIl0nKSk7XG4gICAgdXNlcm5hbWVIaWdobGlnaHRlZCA9IGVsZW1lbnQoXG4gICAgICAgIGJ5LmNzcygnaW5wdXRbaWQ9XCJ1c2VybmFtZVwiXVthcmlhLWludmFsaWQ9XCJ0cnVlXCJdJylcbiAgICApO1xuICAgIHBhc3N3b3JkSGlnaGxpZ2h0ZWQgPSBlbGVtZW50KFxuICAgICAgICBieS5jc3MoJ2lucHV0W2lkPVwicGFzc3dvcmRcIl1bYXJpYS1pbnZhbGlkPVwidHJ1ZVwiXScpXG4gICAgKTtcbiAgICBzaWduSW5CdXR0b24gPSBlbGVtZW50KGJ5LmlkKCdsb2dpbi1idXR0b24nKSk7XG4gICAgc2hvd1Bhc3N3b3JkRWxlbWVudCA9IGVsZW1lbnQoXG4gICAgICAgIGJ5LmNzcygnbWF0LWljb25bZGF0YS1hdXRvbWF0aW9uLWlkPVwic2hvd19wYXNzd29yZFwiXScpXG4gICAgKTtcbiAgICBoaWRlUGFzc3dvcmRFbGVtZW50ID0gZWxlbWVudChcbiAgICAgICAgYnkuY3NzKCdtYXQtaWNvbltkYXRhLWF1dG9tYXRpb24taWQ9XCJoaWRlX3Bhc3N3b3JkXCJdJylcbiAgICApO1xuICAgIHJlbWVtYmVyTWUgPSBlbGVtZW50KGJ5LmNzcygnbWF0LWNoZWNrYm94W2lkPVwiYWRmLWxvZ2luLXJlbWVtYmVyXCJdJykpO1xuICAgIG5lZWRIZWxwID0gZWxlbWVudChieS5jc3MoJ2RpdltpZD1cImFkZi1sb2dpbi1hY3Rpb24tbGVmdFwiXScpKTtcbiAgICByZWdpc3RlciA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbaWQ9XCJhZGYtbG9naW4tYWN0aW9uLXJpZ2h0XCJdJykpO1xuICAgIGZvb3RlclN3aXRjaCA9IGVsZW1lbnQoYnkuaWQoJ3N3aXRjaDQnKSk7XG4gICAgcmVtZW1iZXJNZVN3aXRjaCA9IGVsZW1lbnQoYnkuaWQoJ2FkZi10b2dnbGUtc2hvdy1yZW1lbWJlcm1lJykpO1xuICAgIHN1Y2Nlc3NSb3V0ZVN3aXRjaCA9IGVsZW1lbnQoYnkuaWQoJ2FkZi10b2dnbGUtc2hvdy1zdWNjZXNzUm91dGUnKSk7XG4gICAgbG9nb1N3aXRjaCA9IGVsZW1lbnQoYnkuaWQoJ2FkZi10b2dnbGUtbG9nbycpKTtcbiAgICBoZWFkZXIgPSBlbGVtZW50KGJ5LmlkKCdhZGYtaGVhZGVyJykpO1xuICAgIHNldHRpbmdzSWNvbiA9IGVsZW1lbnQoXG4gICAgICAgIGJ5LmNzc0NvbnRhaW5pbmdUZXh0KFxuICAgICAgICAgICAgJ2FbZGF0YS1hdXRvbWF0aW9uLWlkPVwic2V0dGluZ3NcIl0gbWF0LWljb24nLFxuICAgICAgICAgICAgJ3NldHRpbmdzJ1xuICAgICAgICApXG4gICAgKTtcblxuICAgIGdvVG9Mb2dpblBhZ2UoKSB7XG4gICAgICAgIGJyb3dzZXIud2FpdEZvckFuZ3VsYXJFbmFibGVkKHRydWUpO1xuICAgICAgICBicm93c2VyLmRyaXZlci5nZXQodGhpcy5sb2dpblVSTCk7XG4gICAgICAgIHRoaXMud2FpdEZvckVsZW1lbnRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHdhaXRGb3JFbGVtZW50cygpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnR4dFVzZXJuYW1lKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnR4dFBhc3N3b3JkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZW50ZXJVc2VybmFtZSh1c2VybmFtZSkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudHh0VXNlcm5hbWUpO1xuICAgICAgICB0aGlzLnR4dFVzZXJuYW1lLnNlbmRLZXlzKCcnKTtcbiAgICAgICAgdGhpcy50eHRVc2VybmFtZS5jbGVhcigpO1xuICAgICAgICByZXR1cm4gdGhpcy50eHRVc2VybmFtZS5zZW5kS2V5cyh1c2VybmFtZSk7XG4gICAgfVxuXG4gICAgZW50ZXJQYXNzd29yZChwYXNzd29yZCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudHh0UGFzc3dvcmQpO1xuICAgICAgICB0aGlzLnR4dFBhc3N3b3JkLmNsZWFyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnR4dFBhc3N3b3JkLnNlbmRLZXlzKHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICBjbGVhclVzZXJuYW1lKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudHh0VXNlcm5hbWUpO1xuICAgICAgICB0aGlzLnR4dFVzZXJuYW1lLmNsaWNrKCk7XG4gICAgICAgIHRoaXMudHh0VXNlcm5hbWUuZ2V0QXR0cmlidXRlKCd2YWx1ZScpLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdmFsdWUubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHRoaXMudHh0VXNlcm5hbWUuc2VuZEtleXMocHJvdHJhY3Rvci5LZXkuQkFDS19TUEFDRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjbGVhclBhc3N3b3JkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudHh0UGFzc3dvcmQpO1xuICAgICAgICB0aGlzLnR4dFBhc3N3b3JkLmdldEF0dHJpYnV0ZSgndmFsdWUnKS50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHZhbHVlLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnR4dFBhc3N3b3JkLnNlbmRLZXlzKHByb3RyYWN0b3IuS2V5LkJBQ0tfU1BBQ0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRVc2VybmFtZVRvb2x0aXAoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy51c2VybmFtZVRvb2x0aXApO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VybmFtZVRvb2x0aXAuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldFBhc3N3b3JkVG9vbHRpcCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnBhc3N3b3JkVG9vbHRpcCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhc3N3b3JkVG9vbHRpcC5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0TG9naW5FcnJvcigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmxvZ2luVG9vbHRpcCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ2luVG9vbHRpcC5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgY2hlY2tMb2dpbkltZ1VSTCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmxvZ29JbWcpO1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dvSW1nLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgfVxuXG4gICAgY2hlY2tVc2VybmFtZUluYWN0aXZlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMudXNlcm5hbWVJbmFjdGl2ZSk7XG4gICAgfVxuXG4gICAgY2hlY2tQYXNzd29yZEluYWN0aXZlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucGFzc3dvcmRJbmFjdGl2ZSk7XG4gICAgfVxuXG4gICAgY2hlY2tVc2VybmFtZUhpZ2hsaWdodGVkKCkge1xuICAgICAgICB0aGlzLmFkZkxvZ28uY2xpY2soKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnVzZXJuYW1lSGlnaGxpZ2h0ZWQpO1xuICAgIH1cblxuICAgIGNoZWNrUGFzc3dvcmRIaWdobGlnaHRlZCgpIHtcbiAgICAgICAgdGhpcy5hZGZMb2dvLmNsaWNrKCk7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wYXNzd29yZEhpZ2hsaWdodGVkKTtcbiAgICB9XG5cbiAgICBjaGVja1VzZXJuYW1lVG9vbHRpcElzTm90VmlzaWJsZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90VmlzaWJsZSh0aGlzLnVzZXJuYW1lVG9vbHRpcCk7XG4gICAgfVxuXG4gICAgY2hlY2tQYXNzd29yZFRvb2x0aXBJc05vdFZpc2libGUoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdFZpc2libGUodGhpcy5wYXNzd29yZFRvb2x0aXApO1xuICAgIH1cblxuICAgIGdldFNpZ25JbkJ1dHRvbklzRW5hYmxlZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNpZ25JbkJ1dHRvbik7XG4gICAgICAgIHJldHVybiB0aGlzLnNpZ25JbkJ1dHRvbi5pc0VuYWJsZWQoKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2dpblRvUHJvY2Vzc1NlcnZpY2VzVXNpbmdVc2VyTW9kZWwodXNlck1vZGVsKSB7XG4gICAgICAgIHRoaXMuZ29Ub0xvZ2luUGFnZSgpO1xuICAgICAgICBhd2FpdCBMb2NhbFN0b3JhZ2VVdGlsLmNsZWFyU3RvcmFnZSgpO1xuICAgICAgICBhd2FpdCBMb2NhbFN0b3JhZ2VVdGlsLnNldFN0b3JhZ2VJdGVtKCdwcm92aWRlcnMnLCAnQlBNJyk7XG4gICAgICAgIGF3YWl0IExvY2FsU3RvcmFnZVV0aWwuYXBpUmVzZXQoKTtcbiAgICAgICAgdGhpcy5sb2dpbih1c2VyTW9kZWwuZW1haWwsIHVzZXJNb2RlbC5wYXNzd29yZCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9naW5Ub0NvbnRlbnRTZXJ2aWNlc1VzaW5nVXNlck1vZGVsKHVzZXJNb2RlbCkge1xuICAgICAgICB0aGlzLmdvVG9Mb2dpblBhZ2UoKTtcbiAgICAgICAgYXdhaXQgTG9jYWxTdG9yYWdlVXRpbC5jbGVhclN0b3JhZ2UoKTtcbiAgICAgICAgYXdhaXQgTG9jYWxTdG9yYWdlVXRpbC5zZXRTdG9yYWdlSXRlbSgncHJvdmlkZXJzJywgJ0VDTScpO1xuICAgICAgICBhd2FpdCBMb2NhbFN0b3JhZ2VVdGlsLmFwaVJlc2V0KCk7XG4gICAgICAgIHRoaXMubG9naW4odXNlck1vZGVsLmdldElkKCksIHVzZXJNb2RlbC5nZXRQYXNzd29yZCgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2dpblRvQ29udGVudFNlcnZpY2VzKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICB0aGlzLmdvVG9Mb2dpblBhZ2UoKTtcbiAgICAgICAgYXdhaXQgTG9jYWxTdG9yYWdlVXRpbC5jbGVhclN0b3JhZ2UoKTtcbiAgICAgICAgYXdhaXQgTG9jYWxTdG9yYWdlVXRpbC5zZXRTdG9yYWdlSXRlbSgncHJvdmlkZXJzJywgJ0VDTScpO1xuICAgICAgICBhd2FpdCBMb2NhbFN0b3JhZ2VVdGlsLmFwaVJlc2V0KCk7XG4gICAgICAgIHRoaXMud2FpdEZvckVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICBjbGlja1NpZ25JbkJ1dHRvbigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNpZ25JbkJ1dHRvbik7XG4gICAgICAgIHRoaXMuc2lnbkluQnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuXG4gICAgY2xpY2tTZXR0aW5nc0ljb24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5zZXR0aW5nc0ljb24pO1xuICAgICAgICB0aGlzLnNldHRpbmdzSWNvbi5jbGljaygpO1xuICAgIH1cblxuICAgIHNob3dQYXNzd29yZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnNob3dQYXNzd29yZEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnNob3dQYXNzd29yZEVsZW1lbnQuY2xpY2soKTtcbiAgICB9XG5cbiAgICBoaWRlUGFzc3dvcmQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5oaWRlUGFzc3dvcmRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5oaWRlUGFzc3dvcmRFbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuXG4gICAgZ2V0U2hvd25QYXNzd29yZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHh0UGFzc3dvcmQuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgIH1cblxuICAgIGNoZWNrUGFzc3dvcmRJc0hpZGRlbigpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnR4dFBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICBjaGVja1JlbWVtYmVySXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5yZW1lbWJlck1lKTtcbiAgICB9XG5cbiAgICBjaGVja1JlbWVtYmVySXNOb3REaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc05vdFZpc2libGUodGhpcy5yZW1lbWJlck1lKTtcbiAgICB9XG5cbiAgICBjaGVja05lZWRIZWxwSXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5uZWVkSGVscCk7XG4gICAgfVxuXG4gICAgY2hlY2tOZWVkSGVscElzTm90RGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RWaXNpYmxlKHRoaXMubmVlZEhlbHApO1xuICAgIH1cblxuICAgIGNoZWNrUmVnaXN0ZXJEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5yZWdpc3Rlcik7XG4gICAgfVxuXG4gICAgY2hlY2tSZWdpc3RlcklzTm90RGlzcGxheWVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RWaXNpYmxlKHRoaXMucmVnaXN0ZXIpO1xuICAgIH1cblxuICAgIGVuYWJsZUZvb3RlcigpIHtcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbGxlcnNQYWdlLmVuYWJsZVRvZ2dsZSh0aGlzLmZvb3RlclN3aXRjaCk7XG4gICAgfVxuXG4gICAgZGlzYWJsZUZvb3RlcigpIHtcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbGxlcnNQYWdlLmRpc2FibGVUb2dnbGUodGhpcy5mb290ZXJTd2l0Y2gpO1xuICAgIH1cblxuICAgIGRpc2FibGVSZW1lbWJlck1lKCkge1xuICAgICAgICB0aGlzLmZvcm1Db250cm9sbGVyc1BhZ2UuZGlzYWJsZVRvZ2dsZSh0aGlzLnJlbWVtYmVyTWVTd2l0Y2gpO1xuICAgIH1cblxuICAgIGVuYWJsZVN1Y2Nlc3NSb3V0ZVN3aXRjaCgpIHtcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbGxlcnNQYWdlLmVuYWJsZVRvZ2dsZSh0aGlzLnN1Y2Nlc3NSb3V0ZVN3aXRjaCk7XG4gICAgfVxuXG4gICAgZW5hYmxlTG9nb1N3aXRjaCgpIHtcbiAgICAgICAgdGhpcy5mb3JtQ29udHJvbGxlcnNQYWdlLmVuYWJsZVRvZ2dsZSh0aGlzLmxvZ29Td2l0Y2gpO1xuICAgIH1cblxuICAgIGVudGVyU3VjY2Vzc1JvdXRlKHJvdXRlKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5zdWNjZXNzUm91dGVUeHQpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NSb3V0ZVR4dC5zZW5kS2V5cygnJyk7XG4gICAgICAgIHRoaXMuc3VjY2Vzc1JvdXRlVHh0LmNsZWFyKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NSb3V0ZVR4dC5zZW5kS2V5cyhyb3V0ZSk7XG4gICAgfVxuXG4gICAgZW50ZXJMb2dvKGxvZ28pIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmxvZ29UeHQpO1xuICAgICAgICB0aGlzLmxvZ29UeHQuc2VuZEtleXMoJycpO1xuICAgICAgICB0aGlzLmxvZ29UeHQuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nb1R4dC5zZW5kS2V5cyhsb2dvKTtcbiAgICB9XG5cbiAgICBsb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgdGhpcy53YWl0Rm9yRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5lbnRlclVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgdGhpcy5lbnRlclBhc3N3b3JkKHBhc3N3b3JkKTtcbiAgICAgICAgdGhpcy5jbGlja1NpZ25JbkJ1dHRvbigpO1xuICAgICAgICByZXR1cm4gQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmhlYWRlcik7XG4gICAgfVxufVxuIl19