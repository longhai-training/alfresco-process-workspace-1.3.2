/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*!
 * @license
 * Copyright 2019 Alfresco Software, Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { browser, by, element, protractor } from 'protractor';
import { BrowserVisibility } from '../utils/browser-visibility';
var PaginationPage = /** @class */ (function () {
    function PaginationPage() {
        this.itemsPerPageDropdown = element(by.css('div[class*="adf-pagination__perpage-block"] button'));
        this.pageSelectorDropDown = element(by.css('div[class*="adf-pagination__page-selector"]'));
        this.pageSelectorArrow = element(by.css('button[data-automation-id="page-selector"]'));
        this.itemsPerPage = element(by.css('span[class="adf-pagination__max-items"]'));
        this.currentPage = element(by.css('span[class="adf-pagination__current-page"]'));
        this.totalPages = element(by.css('span[class="adf-pagination__total-pages"]'));
        this.paginationRange = element(by.css('span[class="adf-pagination__range"]'));
        this.nextPageButton = element(by.css('button[class*="adf-pagination__next-button"]'));
        this.nextButtonDisabled = element(by.css('button[class*="adf-pagination__next-button"][disabled]'));
        this.previousButtonDisabled = element(by.css('button[class*="adf-pagination__previous-button"][disabled]'));
        this.pageDropDown = element(by.css('div[class*="adf-pagination__actualinfo-block"] button'));
        this.pageDropDownOptions = by.css('div[class*="mat-menu-content"] button');
        this.paginationSection = element(by.css('adf-pagination'));
        this.paginationSectionEmpty = element(by.css('adf-pagination[class*="adf-pagination__empty"]'));
        this.totalFiles = element(by.css('span[class="adf-pagination__range"]'));
    }
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItem
     * @return {THIS}
     */
    PaginationPage.prototype.selectItemsPerPage = /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItem
     * @return {THIS}
     */
    function (numberOfItem) {
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).itemsPerPageDropdown);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).itemsPerPageDropdown);
        browser.actions().mouseMove((/** @type {?} */ (this)).itemsPerPageDropdown).perform();
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).itemsPerPageDropdown);
        BrowserVisibility.waitUntilElementIsClickable((/** @type {?} */ (this)).itemsPerPageDropdown);
        (/** @type {?} */ (this)).itemsPerPageDropdown.click();
        BrowserVisibility.waitUntilElementIsVisible((/** @type {?} */ (this)).pageSelectorDropDown);
        /** @type {?} */
        var itemsPerPage = element.all(by.cssContainingText('.mat-menu-item', numberOfItem)).first();
        BrowserVisibility.waitUntilElementIsClickable(itemsPerPage);
        BrowserVisibility.waitUntilElementIsVisible(itemsPerPage);
        itemsPerPage.click();
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkPageSelectorIsNotDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.pageSelectorArrow);
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkPageSelectorIsDisplayed = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.pageSelectorArrow);
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    PaginationPage.prototype.checkPaginationIsNotDisplayed = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        BrowserVisibility.waitUntilElementIsOnPage((/** @type {?} */ (this)).paginationSectionEmpty);
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getCurrentItemsPerPage = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.itemsPerPage);
        return this.itemsPerPage.getText();
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getCurrentPage = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.paginationSection);
        BrowserVisibility.waitUntilElementIsVisible(this.currentPage);
        return this.currentPage.getText();
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getTotalPages = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.totalPages);
        return this.totalPages.getText();
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getPaginationRange = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.paginationRange);
        return this.paginationRange.getText();
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.clickOnNextPage = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.nextPageButton);
        BrowserVisibility.waitUntilElementIsClickable(this.nextPageButton);
        browser.actions().mouseMove(this.nextPageButton).perform();
        BrowserVisibility.waitUntilElementIsVisible(this.nextPageButton);
        BrowserVisibility.waitUntilElementIsClickable(this.nextPageButton);
        return this.nextPageButton.click();
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.clickOnPageDropdown = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.pageDropDown);
        BrowserVisibility.waitUntilElementIsClickable(this.pageDropDown);
        return this.pageDropDown.click();
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItemPerPage
     * @return {THIS}
     */
    PaginationPage.prototype.clickOnPageDropdownOption = /**
     * @template THIS
     * @this {THIS}
     * @param {?} numberOfItemPerPage
     * @return {THIS}
     */
    function (numberOfItemPerPage) {
        BrowserVisibility.waitUntilElementIsVisible(element.all((/** @type {?} */ (this)).pageDropDownOptions).first());
        /** @type {?} */
        var option = element(by.cssContainingText('div[class*="mat-menu-content"] button', numberOfItemPerPage));
        BrowserVisibility.waitUntilElementIsVisible(option);
        option.click();
        return (/** @type {?} */ (this));
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getPageDropdownOptions = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var deferred = protractor.promise.defer();
        BrowserVisibility.waitUntilElementIsVisible(element.all(this.pageDropDownOptions).first());
        /** @type {?} */
        var initialList = [];
        element.all(this.pageDropDownOptions).each((/**
         * @param {?} currentOption
         * @return {?}
         */
        function (currentOption) {
            currentOption.getText().then((/**
             * @param {?} text
             * @return {?}
             */
            function (text) {
                if (text !== '') {
                    initialList.push(text);
                }
            }));
        })).then((/**
         * @return {?}
         */
        function () {
            deferred.fulfill(initialList);
        }));
        return deferred.promise;
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkNextPageButtonIsDisabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.nextButtonDisabled);
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkPreviousPageButtonIsDisabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.previousButtonDisabled);
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkNextPageButtonIsEnabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.nextButtonDisabled);
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.checkPreviousPageButtonIsEnabled = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsNotOnPage(this.previousButtonDisabled);
    };
    /**
     * @return {?}
     */
    PaginationPage.prototype.getTotalNumberOfFiles = /**
     * @return {?}
     */
    function () {
        BrowserVisibility.waitUntilElementIsVisible(this.totalFiles);
        /** @type {?} */
        var numberOfFiles = this.totalFiles.getText().then((/**
         * @param {?} totalNumber
         * @return {?}
         */
        function (totalNumber) {
            /** @type {?} */
            var totalNumberOfFiles = totalNumber.split('of ')[1];
            return totalNumberOfFiles;
        }));
        return numberOfFiles;
    };
    return PaginationPage;
}());
export { PaginationPage };
if (false) {
    /** @type {?} */
    PaginationPage.prototype.itemsPerPageDropdown;
    /** @type {?} */
    PaginationPage.prototype.pageSelectorDropDown;
    /** @type {?} */
    PaginationPage.prototype.pageSelectorArrow;
    /** @type {?} */
    PaginationPage.prototype.itemsPerPage;
    /** @type {?} */
    PaginationPage.prototype.currentPage;
    /** @type {?} */
    PaginationPage.prototype.totalPages;
    /** @type {?} */
    PaginationPage.prototype.paginationRange;
    /** @type {?} */
    PaginationPage.prototype.nextPageButton;
    /** @type {?} */
    PaginationPage.prototype.nextButtonDisabled;
    /** @type {?} */
    PaginationPage.prototype.previousButtonDisabled;
    /** @type {?} */
    PaginationPage.prototype.pageDropDown;
    /** @type {?} */
    PaginationPage.prototype.pageDropDownOptions;
    /** @type {?} */
    PaginationPage.prototype.paginationSection;
    /** @type {?} */
    PaginationPage.prototype.paginationSectionEmpty;
    /** @type {?} */
    PaginationPage.prototype.totalFiles;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5wYWdlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGFsZnJlc2NvL2FkZi10ZXN0aW5nLyIsInNvdXJjZXMiOlsibGliL2NvcmUvcGFnZXMvcGFnaW5hdGlvbi5wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLE9BQU8sRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDOUQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFaEU7SUFBQTtRQUVJLHlCQUFvQixHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLG9EQUFvRCxDQUFDLENBQUMsQ0FBQztRQUM3Rix5QkFBb0IsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDLENBQUM7UUFDdEYsc0JBQWlCLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsNENBQTRDLENBQUMsQ0FBQyxDQUFDO1FBQ2xGLGlCQUFZLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMseUNBQXlDLENBQUMsQ0FBQyxDQUFDO1FBQzFFLGdCQUFXLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsNENBQTRDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLGVBQVUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDLENBQUM7UUFDMUUsb0JBQWUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDLENBQUM7UUFDekUsbUJBQWMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDLENBQUM7UUFDakYsdUJBQWtCLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENB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b3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBBbGZyZXNjbyBTb2Z0d2FyZSwgTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBicm93c2VyLCBieSwgZWxlbWVudCwgcHJvdHJhY3RvciB9IGZyb20gJ3Byb3RyYWN0b3InO1xuaW1wb3J0IHsgQnJvd3NlclZpc2liaWxpdHkgfSBmcm9tICcuLi91dGlscy9icm93c2VyLXZpc2liaWxpdHknO1xuXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvblBhZ2Uge1xuXG4gICAgaXRlbXNQZXJQYWdlRHJvcGRvd24gPSBlbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19wZXJwYWdlLWJsb2NrXCJdIGJ1dHRvbicpKTtcbiAgICBwYWdlU2VsZWN0b3JEcm9wRG93biA9IGVsZW1lbnQoYnkuY3NzKCdkaXZbY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX3BhZ2Utc2VsZWN0b3JcIl0nKSk7XG4gICAgcGFnZVNlbGVjdG9yQXJyb3cgPSBlbGVtZW50KGJ5LmNzcygnYnV0dG9uW2RhdGEtYXV0b21hdGlvbi1pZD1cInBhZ2Utc2VsZWN0b3JcIl0nKSk7XG4gICAgaXRlbXNQZXJQYWdlID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fbWF4LWl0ZW1zXCJdJykpO1xuICAgIGN1cnJlbnRQYWdlID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fY3VycmVudC1wYWdlXCJdJykpO1xuICAgIHRvdGFsUGFnZXMgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltjbGFzcz1cImFkZi1wYWdpbmF0aW9uX190b3RhbC1wYWdlc1wiXScpKTtcbiAgICBwYWdpbmF0aW9uUmFuZ2UgPSBlbGVtZW50KGJ5LmNzcygnc3BhbltjbGFzcz1cImFkZi1wYWdpbmF0aW9uX19yYW5nZVwiXScpKTtcbiAgICBuZXh0UGFnZUJ1dHRvbiA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX25leHQtYnV0dG9uXCJdJykpO1xuICAgIG5leHRCdXR0b25EaXNhYmxlZCA9IGVsZW1lbnQoYnkuY3NzKCdidXR0b25bY2xhc3MqPVwiYWRmLXBhZ2luYXRpb25fX25leHQtYnV0dG9uXCJdW2Rpc2FibGVkXScpKTtcbiAgICBwcmV2aW91c0J1dHRvbkRpc2FibGVkID0gZWxlbWVudChieS5jc3MoJ2J1dHRvbltjbGFzcyo9XCJhZGYtcGFnaW5hdGlvbl9fcHJldmlvdXMtYnV0dG9uXCJdW2Rpc2FibGVkXScpKTtcbiAgICBwYWdlRHJvcERvd24gPSBlbGVtZW50KGJ5LmNzcygnZGl2W2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19hY3R1YWxpbmZvLWJsb2NrXCJdIGJ1dHRvbicpKTtcbiAgICBwYWdlRHJvcERvd25PcHRpb25zID0gYnkuY3NzKCdkaXZbY2xhc3MqPVwibWF0LW1lbnUtY29udGVudFwiXSBidXR0b24nKTtcbiAgICBwYWdpbmF0aW9uU2VjdGlvbiA9IGVsZW1lbnQoYnkuY3NzKCdhZGYtcGFnaW5hdGlvbicpKTtcbiAgICBwYWdpbmF0aW9uU2VjdGlvbkVtcHR5ID0gZWxlbWVudChieS5jc3MoJ2FkZi1wYWdpbmF0aW9uW2NsYXNzKj1cImFkZi1wYWdpbmF0aW9uX19lbXB0eVwiXScpKTtcbiAgICB0b3RhbEZpbGVzID0gZWxlbWVudChieS5jc3MoJ3NwYW5bY2xhc3M9XCJhZGYtcGFnaW5hdGlvbl9fcmFuZ2VcIl0nKSk7XG5cbiAgICBzZWxlY3RJdGVtc1BlclBhZ2UobnVtYmVyT2ZJdGVtOiBzdHJpbmcpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLml0ZW1zUGVyUGFnZURyb3Bkb3duKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24pO1xuICAgICAgICBicm93c2VyLmFjdGlvbnMoKS5tb3VzZU1vdmUodGhpcy5pdGVtc1BlclBhZ2VEcm9wZG93bikucGVyZm9ybSgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5pdGVtc1BlclBhZ2VEcm9wZG93bik7XG4gICAgICAgIHRoaXMuaXRlbXNQZXJQYWdlRHJvcGRvd24uY2xpY2soKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnBhZ2VTZWxlY3RvckRyb3BEb3duKTtcblxuICAgICAgICBjb25zdCBpdGVtc1BlclBhZ2UgPSBlbGVtZW50LmFsbChieS5jc3NDb250YWluaW5nVGV4dCgnLm1hdC1tZW51LWl0ZW0nLCBudW1iZXJPZkl0ZW0pKS5maXJzdCgpO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUoaXRlbXNQZXJQYWdlKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShpdGVtc1BlclBhZ2UpO1xuICAgICAgICBpdGVtc1BlclBhZ2UuY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY2hlY2tQYWdlU2VsZWN0b3JJc05vdERpc3BsYXllZCgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzTm90T25QYWdlKHRoaXMucGFnZVNlbGVjdG9yQXJyb3cpO1xuICAgIH1cblxuICAgIGNoZWNrUGFnZVNlbGVjdG9ySXNEaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wYWdlU2VsZWN0b3JBcnJvdyk7XG4gICAgfVxuXG4gICAgY2hlY2tQYWdpbmF0aW9uSXNOb3REaXNwbGF5ZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc09uUGFnZSh0aGlzLnBhZ2luYXRpb25TZWN0aW9uRW1wdHkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50SXRlbXNQZXJQYWdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMuaXRlbXNQZXJQYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNQZXJQYWdlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBnZXRDdXJyZW50UGFnZSgpIHtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLnBhZ2luYXRpb25TZWN0aW9uKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLmN1cnJlbnRQYWdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFBhZ2UuZ2V0VGV4dCgpO1xuICAgIH1cblxuICAgIGdldFRvdGFsUGFnZXMoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy50b3RhbFBhZ2VzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxQYWdlcy5nZXRUZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0UGFnaW5hdGlvblJhbmdlKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMucGFnaW5hdGlvblJhbmdlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdGlvblJhbmdlLmdldFRleHQoKTtcbiAgICB9XG5cbiAgICBjbGlja09uTmV4dFBhZ2UoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5uZXh0UGFnZUJ1dHRvbik7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc0NsaWNrYWJsZSh0aGlzLm5leHRQYWdlQnV0dG9uKTtcbiAgICAgICAgYnJvd3Nlci5hY3Rpb25zKCkubW91c2VNb3ZlKHRoaXMubmV4dFBhZ2VCdXR0b24pLnBlcmZvcm0oKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZSh0aGlzLm5leHRQYWdlQnV0dG9uKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzQ2xpY2thYmxlKHRoaXMubmV4dFBhZ2VCdXR0b24pO1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0UGFnZUJ1dHRvbi5jbGljaygpO1xuICAgIH1cblxuICAgIGNsaWNrT25QYWdlRHJvcGRvd24oKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wYWdlRHJvcERvd24pO1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNDbGlja2FibGUodGhpcy5wYWdlRHJvcERvd24pO1xuICAgICAgICByZXR1cm4gdGhpcy5wYWdlRHJvcERvd24uY2xpY2soKTtcbiAgICB9XG5cbiAgICBjbGlja09uUGFnZURyb3Bkb3duT3B0aW9uKG51bWJlck9mSXRlbVBlclBhZ2U6IHN0cmluZykge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKGVsZW1lbnQuYWxsKHRoaXMucGFnZURyb3BEb3duT3B0aW9ucykuZmlyc3QoKSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGVsZW1lbnQoYnkuY3NzQ29udGFpbmluZ1RleHQoJ2RpdltjbGFzcyo9XCJtYXQtbWVudS1jb250ZW50XCJdIGJ1dHRvbicsIG51bWJlck9mSXRlbVBlclBhZ2UpKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShvcHRpb24pO1xuICAgICAgICBvcHRpb24uY2xpY2soKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZ2V0UGFnZURyb3Bkb3duT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBwcm90cmFjdG9yLnByb21pc2UuZGVmZXIoKTtcbiAgICAgICAgQnJvd3NlclZpc2liaWxpdHkud2FpdFVudGlsRWxlbWVudElzVmlzaWJsZShlbGVtZW50LmFsbCh0aGlzLnBhZ2VEcm9wRG93bk9wdGlvbnMpLmZpcnN0KCkpO1xuICAgICAgICBjb25zdCBpbml0aWFsTGlzdCA9IFtdO1xuICAgICAgICBlbGVtZW50LmFsbCh0aGlzLnBhZ2VEcm9wRG93bk9wdGlvbnMpLmVhY2goZnVuY3Rpb24gKGN1cnJlbnRPcHRpb24pIHtcbiAgICAgICAgICAgIGN1cnJlbnRPcHRpb24uZ2V0VGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGV4dCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbExpc3QucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5mdWxmaWxsKGluaXRpYWxMaXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGNoZWNrTmV4dFBhZ2VCdXR0b25Jc0Rpc2FibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNWaXNpYmxlKHRoaXMubmV4dEJ1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBjaGVja1ByZXZpb3VzUGFnZUJ1dHRvbklzRGlzYWJsZWQoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy5wcmV2aW91c0J1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBjaGVja05leHRQYWdlQnV0dG9uSXNFbmFibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5uZXh0QnV0dG9uRGlzYWJsZWQpO1xuICAgIH1cblxuICAgIGNoZWNrUHJldmlvdXNQYWdlQnV0dG9uSXNFbmFibGVkKCkge1xuICAgICAgICBCcm93c2VyVmlzaWJpbGl0eS53YWl0VW50aWxFbGVtZW50SXNOb3RPblBhZ2UodGhpcy5wcmV2aW91c0J1dHRvbkRpc2FibGVkKTtcbiAgICB9XG5cbiAgICBnZXRUb3RhbE51bWJlck9mRmlsZXMoKSB7XG4gICAgICAgIEJyb3dzZXJWaXNpYmlsaXR5LndhaXRVbnRpbEVsZW1lbnRJc1Zpc2libGUodGhpcy50b3RhbEZpbGVzKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZGaWxlcyA9IHRoaXMudG90YWxGaWxlcy5nZXRUZXh0KCkudGhlbihmdW5jdGlvbiAodG90YWxOdW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsTnVtYmVyT2ZGaWxlcyA9IHRvdGFsTnVtYmVyLnNwbGl0KCdvZiAnKVsxXTtcbiAgICAgICAgICAgIHJldHVybiB0b3RhbE51bWJlck9mRmlsZXM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBudW1iZXJPZkZpbGVzO1xuICAgIH1cbn1cbiJdfQ==